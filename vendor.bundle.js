/*! For license information please see vendor.bundle.js.LICENSE.txt */
(self.webpackChunktetfu_sp=self.webpackChunktetfu_sp||[]).push([[736],{4361:(t,e,n)=>{"use strict";n.r(e),n.d(e,{a:()=>a,abbr:()=>o,address:()=>s,area:()=>h,article:()=>u,aside:()=>l,audio:()=>c,b:()=>f,bdi:()=>d,bdo:()=>g,blockquote:()=>p,br:()=>v,button:()=>y,canvas:()=>m,caption:()=>_,cite:()=>b,code:()=>x,col:()=>w,colgroup:()=>S,data:()=>k,datalist:()=>C,dd:()=>P,del:()=>O,details:()=>A,dfn:()=>T,dialog:()=>R,div:()=>L,dl:()=>E,dt:()=>M,em:()=>D,embed:()=>I,fieldset:()=>j,figcaption:()=>G,figure:()=>N,footer:()=>F,form:()=>B,h1:()=>z,h2:()=>W,h3:()=>U,h4:()=>H,h5:()=>Y,h6:()=>q,header:()=>X,hr:()=>V,i:()=>K,iframe:()=>$,img:()=>J,input:()=>Q,ins:()=>Z,kbd:()=>tt,label:()=>et,legend:()=>nt,li:()=>rt,main:()=>it,map:()=>at,mark:()=>ot,menu:()=>st,menuitem:()=>ht,meter:()=>ut,nav:()=>lt,object:()=>ct,ol:()=>ft,optgroup:()=>dt,option:()=>gt,output:()=>pt,p:()=>vt,param:()=>yt,pre:()=>mt,progress:()=>_t,q:()=>bt,rp:()=>xt,rt:()=>wt,rtc:()=>St,ruby:()=>kt,s:()=>Ct,samp:()=>Pt,section:()=>Ot,select:()=>At,small:()=>Tt,source:()=>Rt,span:()=>Lt,strong:()=>Et,sub:()=>Mt,summary:()=>Dt,sup:()=>It,svg:()=>jt,table:()=>Gt,tbody:()=>Nt,td:()=>Ft,textarea:()=>Bt,tfoot:()=>zt,th:()=>Wt,thead:()=>Ut,time:()=>Ht,tr:()=>Yt,track:()=>qt,u:()=>Xt,ul:()=>Vt,video:()=>Kt,wbr:()=>$t});var r=n(6540);function i(t){return function(e,n){return"object"!=typeof e||Array.isArray(e)?(0,r.h)(t,{},e):(0,r.h)(t,e,n)}}function a(t,e){return i("a")(t,e)}function o(t,e){return i("abbr")(t,e)}function s(t,e){return i("address")(t,e)}function h(t,e){return i("area")(t,e)}function u(t,e){return i("article")(t,e)}function l(t,e){return i("aside")(t,e)}function c(t,e){return i("audio")(t,e)}function f(t,e){return i("b")(t,e)}function d(t,e){return i("bdi")(t,e)}function g(t,e){return i("bdo")(t,e)}function p(t,e){return i("blockquote")(t,e)}function v(t,e){return i("br")(t,e)}function y(t,e){return i("button")(t,e)}function m(t,e){return i("canvas")(t,e)}function _(t,e){return i("caption")(t,e)}function b(t,e){return i("cite")(t,e)}function x(t,e){return i("code")(t,e)}function w(t,e){return i("col")(t,e)}function S(t,e){return i("colgroup")(t,e)}function k(t,e){return i("data")(t,e)}function C(t,e){return i("datalist")(t,e)}function P(t,e){return i("dd")(t,e)}function O(t,e){return i("del")(t,e)}function A(t,e){return i("details")(t,e)}function T(t,e){return i("dfn")(t,e)}function R(t,e){return i("dialog")(t,e)}function L(t,e){return i("div")(t,e)}function E(t,e){return i("dl")(t,e)}function M(t,e){return i("dt")(t,e)}function D(t,e){return i("em")(t,e)}function I(t,e){return i("embed")(t,e)}function j(t,e){return i("fieldset")(t,e)}function G(t,e){return i("figcaption")(t,e)}function N(t,e){return i("figure")(t,e)}function F(t,e){return i("footer")(t,e)}function B(t,e){return i("form")(t,e)}function z(t,e){return i("h1")(t,e)}function W(t,e){return i("h2")(t,e)}function U(t,e){return i("h3")(t,e)}function H(t,e){return i("h4")(t,e)}function Y(t,e){return i("h5")(t,e)}function q(t,e){return i("h6")(t,e)}function X(t,e){return i("header")(t,e)}function V(t,e){return i("hr")(t,e)}function K(t,e){return i("i")(t,e)}function $(t,e){return i("iframe")(t,e)}function J(t,e){return i("img")(t,e)}function Q(t,e){return i("input")(t,e)}function Z(t,e){return i("ins")(t,e)}function tt(t,e){return i("kbd")(t,e)}function et(t,e){return i("label")(t,e)}function nt(t,e){return i("legend")(t,e)}function rt(t,e){return i("li")(t,e)}function it(t,e){return i("main")(t,e)}function at(t,e){return i("map")(t,e)}function ot(t,e){return i("mark")(t,e)}function st(t,e){return i("menu")(t,e)}function ht(t,e){return i("menuitem")(t,e)}function ut(t,e){return i("meter")(t,e)}function lt(t,e){return i("nav")(t,e)}function ct(t,e){return i("object")(t,e)}function ft(t,e){return i("ol")(t,e)}function dt(t,e){return i("optgroup")(t,e)}function gt(t,e){return i("option")(t,e)}function pt(t,e){return i("output")(t,e)}function vt(t,e){return i("p")(t,e)}function yt(t,e){return i("param")(t,e)}function mt(t,e){return i("pre")(t,e)}function _t(t,e){return i("progress")(t,e)}function bt(t,e){return i("q")(t,e)}function xt(t,e){return i("rp")(t,e)}function wt(t,e){return i("rt")(t,e)}function St(t,e){return i("rtc")(t,e)}function kt(t,e){return i("ruby")(t,e)}function Ct(t,e){return i("s")(t,e)}function Pt(t,e){return i("samp")(t,e)}function Ot(t,e){return i("section")(t,e)}function At(t,e){return i("select")(t,e)}function Tt(t,e){return i("small")(t,e)}function Rt(t,e){return i("source")(t,e)}function Lt(t,e){return i("span")(t,e)}function Et(t,e){return i("strong")(t,e)}function Mt(t,e){return i("sub")(t,e)}function Dt(t,e){return i("summary")(t,e)}function It(t,e){return i("sup")(t,e)}function jt(t,e){return i("svg")(t,e)}function Gt(t,e){return i("table")(t,e)}function Nt(t,e){return i("tbody")(t,e)}function Ft(t,e){return i("td")(t,e)}function Bt(t,e){return i("textarea")(t,e)}function zt(t,e){return i("tfoot")(t,e)}function Wt(t,e){return i("th")(t,e)}function Ut(t,e){return i("thead")(t,e)}function Ht(t,e){return i("time")(t,e)}function Yt(t,e){return i("tr")(t,e)}function qt(t,e){return i("track")(t,e)}function Xt(t,e){return i("u")(t,e)}function Vt(t,e){return i("ul")(t,e)}function Kt(t,e){return i("video")(t,e)}function $t(t,e){return i("wbr")(t,e)}},1639:(t,e,n)=>{"use strict";function r(t,e,n){console.group("%c action","color: gray; font-weight: lighter;",e.name),console.log("%c prev state","color: #9E9E9E; font-weight: bold;",t),console.log("%c data","color: #03A9F4; font-weight: bold;",e.data),console.log("%c next state","color: #4CAF50; font-weight: bold;",n),console.groupEnd()}n.r(e),n.d(e,{withLogger:()=>o});var i=function(t){return"function"==typeof t};function a(t,e){return function(n,r,i,a){var o=function e(n,r){var i=r?r+".":"";return Object.keys(n||{}).reduce((function(r,a){var o=i+a,s=n[a];return r[a]="function"==typeof s?function(e){return function(n,r){var i=s(e);return i="function"==typeof i?i(n,r):i,t(n,{name:o,data:e},i),i}}:e(s,o),r}),{})}(r);return e(n,o,i,a)}}function o(t){if(i(t))return a(r,t);var e=i(t.log)?t.log:r;return function(t){return a(e,t)}}},6540:(t,e,n)=>{"use strict";function r(t,e){for(var n=[],r=[],i=arguments.length;i-- >2;)n.push(arguments[i]);for(;n.length;){var a=n.pop();if(a&&a.pop)for(i=a.length;i--;)n.push(a[i]);else null!=a&&!0!==a&&!1!==a&&r.push(a)}return"function"==typeof t?t(e||{},r):{nodeName:t,attributes:e||{},children:r,key:e&&e.key}}function i(t,e,n,r){var i,a=[].map,o=r&&r.children[0]||null,s=o&&function t(e){return{nodeName:e.nodeName.toLowerCase(),attributes:{},children:a.call(e.childNodes,(function(e){return 3===e.nodeType?e.nodeValue:t(e)}))}}(o),h=[],u=!0,l=p(t),c=function t(e,n,r){for(var i in r)"function"==typeof r[i]?function(t,i){r[t]=function(t){var a=i(t);return"function"==typeof a&&(a=a(y(e,l),r)),a&&a!==(n=y(e,l))&&!a.then&&g(l=v(e,p(n,a),l)),a}}(i,r[i]):t(e.concat(i),n[i]=p(n[i]),r[i]=p(r[i]));return r}([],l,p(e));return g(),c;function f(t){return"function"==typeof t?f(t(l,c)):null!=t?t:""}function d(){i=!i;var t=f(n);for(r&&!i&&(o=k(r,o,s,s=t)),u=!1;h.length;)h.pop()()}function g(){i||(i=!0,setTimeout(d))}function p(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}function v(t,e,n){var r={};return t.length?(r[t[0]]=t.length>1?v(t.slice(1),e,n[t[0]]):e,p(n,r)):e}function y(t,e){for(var n=0;n<t.length;)e=e[t[n++]];return e}function m(t){return t?t.key:null}function _(t){return t.currentTarget.events[t.type](t)}function b(t,e,n,r,i){if("key"===e);else if("style"===e)if("string"==typeof n)t.style.cssText=n;else for(var a in"string"==typeof r&&(r=t.style.cssText=""),p(r,n)){var o=null==n||null==n[a]?"":n[a];"-"===a[0]?t.style.setProperty(a,o):t.style[a]=o}else"o"===e[0]&&"n"===e[1]?(e=e.slice(2),t.events?r||(r=t.events[e]):t.events={},t.events[e]=n,n?r||t.addEventListener(e,_):t.removeEventListener(e,_)):e in t&&"list"!==e&&"type"!==e&&"draggable"!==e&&"spellcheck"!==e&&"translate"!==e&&!i?t[e]=null==n?"":n:null!=n&&!1!==n&&t.setAttribute(e,n),null!=n&&!1!==n||t.removeAttribute(e)}function x(t,e){var n="string"==typeof t||"number"==typeof t?document.createTextNode(t):(e=e||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),r=t.attributes;if(r){r.oncreate&&h.push((function(){r.oncreate(n)}));for(var i=0;i<t.children.length;i++)n.appendChild(x(t.children[i]=f(t.children[i]),e));for(var a in r)b(n,a,r[a],null,e)}return n}function w(t,e){var n=e.attributes;if(n){for(var r=0;r<e.children.length;r++)w(t.childNodes[r],e.children[r]);n.ondestroy&&n.ondestroy(t)}return t}function S(t,e,n){function r(){t.removeChild(w(e,n))}var i=n.attributes&&n.attributes.onremove;i?i(e,r):r()}function k(t,e,n,r,i){if(r===n);else if(null==n||n.nodeName!==r.nodeName){var a=x(r,i);t.insertBefore(a,e),null!=n&&S(t,e,n),e=a}else if(null==n.nodeName)e.nodeValue=r;else{!function(t,e,n,r){for(var i in p(e,n))n[i]!==("value"===i||"checked"===i?t[i]:e[i])&&b(t,i,n[i],e[i],r);var a=u?n.oncreate:n.onupdate;a&&h.push((function(){a(t,e)}))}(e,n.attributes,r.attributes,i=i||"svg"===r.nodeName);for(var o={},s={},l=[],c=n.children,d=r.children,g=0;g<c.length;g++)l[g]=e.childNodes[g],null!=(y=m(c[g]))&&(o[y]=[l[g],c[g]]);g=0;for(var v=0;v<d.length;){var y=m(c[g]),_=m(d[v]=f(d[v]));if(s[y])g++;else if(null==_||_!==m(c[g+1]))if(null==_||u)null==y&&(k(e,l[g],c[g],d[v],i),v++),g++;else{var w=o[_]||[];y===_?(k(e,w[0],w[1],d[v],i),g++):w[0]?k(e,e.insertBefore(w[0],l[g]),w[1],d[v],i):k(e,l[g],null,d[v],i),s[_]=d[v],v++}else null==y&&S(e,l[g],c[g]),g++}for(;g<c.length;)null==m(c[g])&&S(e,l[g],c[g]),g++;for(var g in o)s[g]||S(e,o[g][0],o[g][1])}return e}}n.r(e),n.d(e,{app:()=>i,h:()=>r})},886:(t,e,n)=>{"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,{default:()=>S});var a=[],o=a.forEach,s=a.slice;function h(t){return o.call(s.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t}var u=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,l=function(t,e,n){var r=n||{};r.path=r.path||"/";var i=t+"="+encodeURIComponent(e);if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");i+="; Max-Age="+Math.floor(a)}if(r.domain){if(!u.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain="+r.domain}if(r.path){if(!u.test(r.path))throw new TypeError("option path is invalid");i+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i},c={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&"undefined"!=typeof document){var n=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null}(t.lookupCookie);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&"undefined"!=typeof document&&function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=l(t,encodeURIComponent(e),i)}(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},f={name:"querystring",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),i=0;i<r.length;i++){var a=r[i].indexOf("=");a>0&&r[i].substring(0,a)===t.lookupQuerystring&&(e=r[i].substring(a+1))}}return e}},d=null,g=function(){if(null!==d)return d;try{d="undefined"!==window&&null!==window.localStorage;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch(t){d=!1}return d},p={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&g()){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&g()&&window.localStorage.setItem(e.lookupLocalStorage,t)}},v=null,y=function(){if(null!==v)return v;try{v="undefined"!==window&&null!==window.sessionStorage;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch(t){v=!1}return v},m={name:"sessionStorage",lookup:function(t){var e;if(t.lookupSessionStorage&&y()){var n=window.sessionStorage.getItem(t.lookupSessionStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupSessionStorage&&y()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)}},_={name:"navigator",lookup:function(t){var e=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)e.push(navigator.languages[n]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0}},b={name:"htmlTag",lookup:function(t){var e,n=t.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(e=n.getAttribute("lang")),e}},x={name:"path",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof t.lookupFromPathIndex){if("string"!=typeof n[t.lookupFromPathIndex])return;e=n[t.lookupFromPathIndex].replace("/","")}else e=n[0].replace("/","")}return e}},w={name:"subdomain",lookup:function(t){var e;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(e="number"==typeof t.lookupFromSubdomainIndex?n[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return e}},S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}var e,n;return e=t,(n=[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=h(e,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(c),this.addDetector(f),this.addDetector(p),this.addDetector(m),this.addDetector(_),this.addDetector(b),this.addDetector(x),this.addDetector(w)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var e=this;t||(t=this.options.order);var n=[];return t.forEach((function(t){if(e.detectors[t]){var r=e.detectors[t].lookup(e.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(t,e){var n=this;e||(e=this.options.caches),e&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||e.forEach((function(e){n.detectors[e]&&n.detectors[e].cacheUserLanguage(t,n.options)})))}}])&&i(e.prototype,n),t}();S.type="languageDetector"},6073:(t,e,n)=>{"use strict";var r=n(8698),i=n(7257),a=n(2478),o=n(3246),s=n(8721),h=n(6542),u=n(268),l=n(4653),c=n(4663);function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=f(r),g=f(i),p=f(a),v=f(o),y=f(s),m=f(h),_=f(u),b=f(l),x=f(c);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},C=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.default(this,t),this.init(e,n)}return p.default(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||k,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,S(S({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}}]),t}()),P=function(){function t(){g.default(this,t),this.observers={}}return p.default(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var i=[].concat(this.observers[t]);i.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function O(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function A(t){return null==t?"":""+t}function T(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function R(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"==typeof t}for(var a="string"!=typeof e?[].concat(e):e.split(".");a.length>1;){if(i())return{};var o=r(a.shift());!t[o]&&n&&(t[o]=new n),t=Object.prototype.hasOwnProperty.call(t,o)?t[o]:{}}return i()?{}:{obj:t,k:r(a.shift())}}function L(t,e,n){var r=R(t,e,Object);r.obj[r.k]=n}function E(t,e){var n=R(t,e),r=n.obj,i=n.k;if(r)return r[i]}function M(t,e,n){var r=E(t,n);return void 0!==r?r:E(e,n)}function D(t,e,n){for(var r in e)"__proto__"!==r&&"constructor"!==r&&(r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):D(t[r],e[r],n):t[r]=e[r]);return t}function I(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function G(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return j[t]})):t}var N="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,F=[" ",",","?","!",";"];function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[e])return t[e];for(var r=e.split(n),i=t,a=0;a<r.length;++a){if(!i)return;if("string"==typeof i[r[a]]&&a+1<r.length)return;if(void 0===i[r[a]]){for(var o=2,s=r.slice(a,a+o).join(n),h=i[s];void 0===h&&r.length>a+o;)o++,h=i[s=r.slice(a,a+o).join(n)];if(void 0===h)return;if(e.endsWith(s)){if("string"==typeof h)return h;if(s&&"string"==typeof h[s])return h[s]}var u=r.slice(a+o).join(n);return u?W(h,u,n):void 0}i=i[r[a]]}return i}}var U=function(t){y.default(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=_.default(e);if(n){var i=_.default(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m.default(this,t)});function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return g.default(this,i),e=r.call(this),N&&P.call(v.default(e)),e.data=t||{},e.options=n,void 0===e.options.keySeparator&&(e.options.keySeparator="."),void 0===e.options.ignoreJSONStructure&&(e.options.ignoreJSONStructure=!0),e}return p.default(i,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,o=[t,e];n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=t.split("."));var s=E(this.data,o);return s||!a||"string"!=typeof n?s:W(this.data&&this.data[t]&&this.data[t][e],n,i)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},a=this.options.keySeparator;void 0===a&&(a=".");var o=[t,e];n&&(o=o.concat(a?n.split(a):n)),t.indexOf(".")>-1&&(r=e,e=(o=t.split("."))[1]),this.addNamespaces(e),L(this.data,o,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},o=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(o=t.split("."))[1]),this.addNamespaces(e);var s=E(this.data,o)||{};r?D(s,n,i):s=z(z({},s),n),L(this.data,o,s),a.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?z(z({},{}),this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"hasLanguageSomeTranslations",value:function(t){var e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find((function(t){return e[t]&&Object.keys(e[t]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),i}(P),H={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var a=this;return t.forEach((function(t){a.processors[t]&&(e=a.processors[t].process(e,n,r,i))})),e}};function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={},V=function(t){y.default(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=_.default(e);if(n){var i=_.default(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m.default(this,t)});function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.default(this,i),e=r.call(this),N&&P.call(v.default(e)),T(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,v.default(e)),e.options=n,void 0===e.options.keySeparator&&(e.options.keySeparator="."),e.logger=C.create("translator"),e}return p.default(i,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==t)return!1;var n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS||[],a=n&&t.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||function(t,e,n){e=e||"",n=n||"";var r=F.filter((function(t){return e.indexOf(t)<0&&n.indexOf(t)<0}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(t){return"?"===t?"\\?":t})).join("|"),")")),a=!i.test(t);if(!a){var o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a}(t,n,r));if(a&&!o){var s=t.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:t,namespaces:i};var h=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),t=h.join(r)}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,e,n){var r=this;if("object"!==d.default(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var a=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,o=this.extractFromKey(t[t.length-1],e),s=o.key,h=o.namespaces,u=h[h.length-1],l=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){var f=e.nsSeparator||this.options.nsSeparator;return u+f+s}return s}var g=this.resolve(t,e),p=g&&g.res,v=g&&g.usedKey||s,y=g&&g.exactUsedKey||s,m=Object.prototype.toString.apply(p),_=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,w="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(x&&p&&w&&_.indexOf(m)<0&&("string"!=typeof b||"[object Array]"!==m)){if(!e.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,p,q(q({},e),{},{ns:h})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(a){var S="[object Array]"===m,k=S?[]:{},C=S?y:v;for(var P in p)if(Object.prototype.hasOwnProperty.call(p,P)){var O="".concat(C).concat(a).concat(P);k[P]=this.translate(O,q(q({},e),{joinArrays:!1,ns:h})),k[P]===O&&(k[P]=p[P])}p=k}}else if(x&&"string"==typeof b&&"[object Array]"===m)(p=p.join(b))&&(p=this.extendTranslation(p,t,e,n));else{var A=!1,T=!1,R=void 0!==e.count&&"string"!=typeof e.count,L=i.hasDefaultValue(e),E=R?this.pluralResolver.getSuffix(l,e.count,e):"",M=e["defaultValue".concat(E)]||e.defaultValue;!this.isValidLookup(p)&&L&&(A=!0,p=M),this.isValidLookup(p)||(T=!0,p=s);var D=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,I=D&&T?void 0:p,j=L&&M!==p&&this.options.updateMissing;if(T||A||j){if(this.logger.log(j?"updateKey":"missingKey",l,u,s,j?M:p),a){var G=this.resolve(s,q(q({},e),{},{keySeparator:!1}));G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var N=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var B=0;B<F.length;B++)N.push(F[B]);else"all"===this.options.saveMissingTo?N=this.languageUtils.toResolveHierarchy(e.lng||this.language):N.push(e.lng||this.language);var z=function(t,n,i){var a=L&&i!==p?i:I;r.options.missingKeyHandler?r.options.missingKeyHandler(t,u,n,a,j,e):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(t,u,n,a,j,e),r.emit("missingKey",t,u,n,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?N.forEach((function(t){r.pluralResolver.getSuffixes(t,e).forEach((function(n){z([t],s+n,e["defaultValue".concat(n)]||M)}))})):z(N,s,M))}p=this.extendTranslation(p,t,e,g,n),T&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(u,":").concat(s)),(T||A)&&this.options.parseMissingKeyHandler&&(p="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(s,A?p:void 0):this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(t,e,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,q(q({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(q(q({},n),{interpolation:q(q({},this.options.interpolation),n.interpolation)}));var o,s="string"==typeof t&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var h=t.match(this.interpolator.nestingRegexp);o=h&&h.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=q(q({},this.options.interpolation.defaultVariables),u)),t=this.interpolator.interpolate(t,u,n.lng||this.language,n),s){var l=t.match(this.interpolator.nestingRegexp);o<(l&&l.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(e[0])),null):a.translate.apply(a,r.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var c=n.postProcess||this.options.postProcess,f="string"==typeof c?[c]:c;return null!=t&&f&&f.length&&!1!==n.applyPostProcessor&&(t=H.handle(f,t,e,this.options&&this.options.postProcessPassResolved?q({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,a,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!o.isValidLookup(e)){var h=o.extractFromKey(t,s),u=h.key;n=u;var l=h.namespaces;o.options.fallbackNS&&(l=l.concat(o.options.fallbackNS));var c=void 0!==s.count&&"string"!=typeof s.count,f=c&&!s.ordinal&&0===s.count&&o.pluralResolver.shouldUseIntlApi(),d=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,g=s.lngs?s.lngs:o.languageUtils.toResolveHierarchy(s.lng||o.language,s.fallbackLng);l.forEach((function(t){o.isValidLookup(e)||(a=t,!X["".concat(g[0],"-").concat(t)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(a)&&(X["".concat(g[0],"-").concat(t)]=!0,o.logger.warn('key "'.concat(n,'" for languages "').concat(g.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach((function(n){if(!o.isValidLookup(e)){i=n;var a,h=[u];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(h,u,n,t,s);else{var l;c&&(l=o.pluralResolver.getSuffix(n,s.count,s));var g="_zero";if(c&&(h.push(u+l),f&&h.push(u+g)),d){var p="".concat(u).concat(o.options.contextSeparator).concat(s.context);h.push(p),c&&(h.push(p+l),f&&h.push(p+g))}}for(;a=h.pop();)o.isValidLookup(e)||(r=a,e=o.getResource(n,t,a,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:a}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&void 0!==t[n])return!0;return!1}}]),i}(P);function K(t){return t.charAt(0).toUpperCase()+t.slice(1)}var $=function(){function t(e){g.default(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=C.create("languageUtils")}return p.default(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=K(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=K(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=K(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var r=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(r)||(e=r)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var r=n.getLanguagePartFromCode(t);if(n.isSupportedCode(r))return e=r;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(r))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],a=function(t){t&&(n.isSupportedCode(t)?i.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&a(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&a(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&a(this.getLanguagePartFromCode(t))):"string"==typeof t&&a(this.formatLanguageCode(t)),r.forEach((function(t){i.indexOf(t)<0&&a(n.formatLanguageCode(t))})),i}}]),t}(),J=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Q={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}},Z=["v1","v2","v3"],tt={zero:0,one:1,two:2,few:3,many:4,other:5};function et(){var t={};return J.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:Q[e.fc]}}))})),t}var nt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g.default(this,t),this.languageUtils=e,this.options=n,this.logger=C.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=et()}return p.default(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:e.ordinal?"ordinal":"cardinal"})}catch(t){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(t,n).map((function(t){return"".concat(e).concat(t)}))}},{key:"getSuffixes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(t,e){return tt[t]-tt[e]})).map((function(t){return"".concat(e.options.prepend).concat(t)})):r.numbers.map((function(r){return e.getSuffix(t,r,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(t,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(e)):this.getSuffixRetroCompatible(r,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,e){var n=this,r=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),i=t.numbers[r];this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===t.numbers.length&&1===t.numbers[0]?a():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!Z.includes(this.options.compatibilityJSON)}}]),t}();function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var at=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.default(this,t),this.logger=C.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return p.default(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:G,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?I(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?I(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?I(e.nestingPrefix):e.nestingPrefixEscaped||I("$t("),this.nestingSuffix=e.nestingSuffix?I(e.nestingSuffix):e.nestingSuffixEscaped||I(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var i,a,o,s=this,h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(t){return t.replace(/\$/g,"$$$$")}var l=function(t){if(t.indexOf(s.formatSeparator)<0){var i=M(e,h,t);return s.alwaysFormat?s.format(i,void 0,n,it(it(it({},r),e),{},{interpolationkey:t})):i}var a=t.split(s.formatSeparator),o=a.shift().trim(),u=a.join(s.formatSeparator).trim();return s.format(M(e,h,o),u,n,it(it(it({},r),e),{},{interpolationkey:o}))};this.resetRegExp();var c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return u(t)}},{regex:this.regexp,safeValue:function(t){return s.escapeValue?u(s.escape(t)):u(t)}}].forEach((function(e){for(o=0;i=e.regex.exec(t);){var n=i[1].trim();if(void 0===(a=l(n)))if("function"==typeof c){var h=c(t,i,r);a="string"==typeof h?h:""}else if(r&&r.hasOwnProperty(n))a="";else{if(f){a=i[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(t)),a=""}else"string"==typeof a||s.useRawValueToEscape||(a=A(a));var u=e.safeValue(a);if(t=t.replace(i[0],u),f?(e.regex.lastIndex+=u.length,e.regex.lastIndex-=i[0].length):e.regex.lastIndex=0,++o>=s.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,r,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=it({},a);function s(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var r=t.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);t=r[0],i=(i=this.interpolate(i,o)).replace(/'/g,'"');try{o=JSON.parse(i),e&&(o=it(it({},e),o))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),e),"".concat(t).concat(n).concat(i)}return delete o.defaultValue,t}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(t);){var h=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var l=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=l.shift(),h=l,u=!0}if((r=e(s.call(this,n[1].trim(),o),o))&&n[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=A(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),u&&(r=h.reduce((function(t,e){return i.format(t,e,a.lng,it(it({},a),{},{interpolationkey:n[1].trim()}))}),r.trim())),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}();function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ht=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.default(this,t),this.logger=C.create("formatter"),this.options=e,this.formats={number:function(t,e,n){return new Intl.NumberFormat(e,n).format(t)},currency:function(t,e,n){return new Intl.NumberFormat(e,st(st({},n),{},{style:"currency"})).format(t)},datetime:function(t,e,n){return new Intl.DateTimeFormat(e,st({},n)).format(t)},relativetime:function(t,e,n){return new Intl.RelativeTimeFormat(e,st({},n)).format(t,n.range||"day")},list:function(t,e,n){return new Intl.ListFormat(e,st({},n)).format(t)}},this.init(e)}return p.default(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=e.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(t,e){this.formats[t.toLowerCase().trim()]=e}},{key:"format",value:function(t,e,n,r){var i=this;return e.split(this.formatSeparator).reduce((function(t,e){var a=function(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var r=t.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===e&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===e&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((function(t){if(t){var e=t.split(":"),r=x.default(e),i=r[0],a=r.slice(1).join(":");n[i.trim()]||(n[i.trim()]=a.trim()),"false"===a.trim()&&(n[i.trim()]=!1),"true"===a.trim()&&(n[i.trim()]=!0),isNaN(a.trim())||(n[i.trim()]=parseInt(a.trim(),10))}}))}return{formatName:e,formatOptions:n}}(e),o=a.formatName,s=a.formatOptions;if(i.formats[o]){var h=t;try{var u=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},l=u.locale||u.lng||r.locale||r.lng||n;h=i.formats[o](t,l,st(st(st({},s),r),u))}catch(t){i.logger.warn(t)}return h}return i.logger.warn("there was no format function for ".concat(o)),t}),t)}}]),t}();function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct=function(t){y.default(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=_.default(e);if(n){var i=_.default(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m.default(this,t)});function i(t,e,n){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return g.default(this,i),a=r.call(this),N&&P.call(v.default(a)),a.backend=t,a.store=e,a.services=n,a.languageUtils=n.languageUtils,a.options=o,a.logger=C.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(n,o.backend,o),a}return p.default(i,[{key:"queueLoad",value:function(t,e,n,r){var i=this,a=[],o=[],s=[],h=[];return t.forEach((function(t){var r=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?o.indexOf(s)<0&&o.push(s):(i.state[s]=1,r=!1,o.indexOf(s)<0&&o.push(s),a.indexOf(s)<0&&a.push(s),h.indexOf(e)<0&&h.push(e)))})),r||s.push(t)})),(a.length||o.length)&&this.queue.push({pending:o,loaded:{},errors:[],callback:r}),{toLoad:a,pending:o,toLoadLanguages:s,toLoadNamespaces:h}}},{key:"loaded",value:function(t,e,n){var r=t.split("|"),i=r[0],a=r[1];e&&this.emit("failedLoading",i,a,e),n&&this.store.addResourceBundle(i,a,n),this.state[t]=e?-1:2;var o={};this.queue.forEach((function(n){var r,s,h,u,l;r=n.loaded,s=a,(u=(h=R(r,[i],Object)).obj)[l=h.k]=u[l]||[],u[l].push(s),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){o[t]||(o[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){o[t].indexOf(e)<0&&o[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,o=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(s,h){s&&h&&i<5?setTimeout((function(){r.read.call(r,t,e,n,i+1,2*a,o)}),a):o(s,h)})):o(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var a=this.queueLoad(t,e,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(function(r,o){r&&e.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),r),!r&&o&&e.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),o),e.loaded(t,r,o)}))}},{key:"saveMissing",value:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,lt(lt({},a),{},{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),i}(P);function ft(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===d.default(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===d.default(t[2])||"object"===d.default(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,r){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function dt(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(n),!0).forEach((function(e){b.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(){}function yt(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach((function(e){"function"==typeof t[e]&&(t[e]=t[e].bind(t))}))}var mt=function(t){y.default(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=_.default(e);if(n){var i=_.default(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return m.default(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(g.default(this,i),t=r.call(this),N&&P.call(v.default(t)),t.options=dt(e),t.services={},t.logger=C,t.modules={external:[]},yt(v.default(t)),n&&!t.isInitialized&&!e.isClone){if(!t.options.initImmediate)return t.init(e,n),m.default(t,v.default(t));setTimeout((function(){t.init(e,n)}),0)}return t}return p.default(i,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof e&&(n=e,e={}),!e.defaultNS&&e.ns&&("string"==typeof e.ns?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var r=ft();function i(t){return t?"function"==typeof t?new t:t:null}if(this.options=pt(pt(pt({},r),this.options),dt(e)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=pt(pt({},r.interpolation),this.options.interpolation)),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),!this.options.isClone){var a;this.modules.logger?C.init(i(this.modules.logger),this.options):C.init(null,this.options),this.modules.formatter?a=this.modules.formatter:"undefined"!=typeof Intl&&(a=ht);var o=new $(this.options);this.store=new U(this.options.resources,this.options);var s=this.services;s.logger=C,s.resourceStore=this.store,s.languageUtils=o,s.pluralResolver=new nt(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!a||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(a),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new at(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ct(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new V(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.format=this.options.interpolation.format,n||(n=vt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&"dev"!==h[0]&&(this.options.lng=h[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var u=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];u.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var c=O(),f=function(){var e=function(e,r){t.isInitialized&&!t.initializedStoreOnce&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),c.resolve(r),n(e,r)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),c}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt,r=n,i="string"==typeof t?t:this.language;if("function"==typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return r();var a=[],o=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){a.indexOf(t)<0&&a.push(t)}))};if(i)o(i);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(t){return o(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return o(t)})),this.services.backendConnector.load(a,this.options.ns,(function(t){t||e.resolvedLanguage||!e.language||e.setResolvedLanguage(e.language),r(t)}))}else r(null)}},{key:"reloadResources",value:function(t,e,n){var r=O();return t||(t=this.languages),e||(e=this.options.ns),n||(n=vt),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&H.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"setResolvedLanguage",value:function(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1))for(var e=0;e<this.languages.length;e++){var n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var r=O();this.emit("languageChanging",t);var i=function(t){n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.resolvedLanguage=void 0,n.setResolvedLanguage(t)},a=function(a){t||a||!n.services.languageDetector||(a=[]);var o="string"==typeof a?a:n.services.languageUtils.getBestMatchFromCodes(a);o&&(n.language||i(o),n.translator.language||n.translator.changeLanguage(o),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(o)),n.loadResources(o,(function(t){!function(t,a){a?(i(a),n.translator.changeLanguage(a),n.isLanguageChangingTo=void 0,n.emit("languageChanged",a),n.logger.log("languageChanged",a)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,o)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(t):a(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e,n){var r=this,i=function t(e,i){var a;if("object"!==d.default(i)){for(var o=arguments.length,s=new Array(o>2?o-2:0),h=2;h<o;h++)s[h-2]=arguments[h];a=r.options.overloadTranslationOptionHandler([e,i].concat(s))}else a=pt({},i);a.lng=a.lng||t.lng,a.lngs=a.lngs||t.lngs,a.ns=a.ns||t.ns;var u=r.options.keySeparator||".",l=n?"".concat(n).concat(u).concat(e):e;return r.t(l,a)};return"string"==typeof t?i.lng=t:i.lngs=t,i.ns=e,i.keyPrefix=n,i}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var o=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,o);if(void 0!==s)return s}return!(!this.hasResourceBundle(r,t)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!o(r,t)||i&&!o(a,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=O();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=O();"string"==typeof t&&(t=[t]);var r=this.options.preload||[],i=t.filter((function(t){return r.indexOf(t)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){return t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),t?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt,r=pt(pt(pt({},this.options),e),{isClone:!0}),a=new i(r),o=["store","services","language"];return o.forEach((function(e){a[e]=t[e]})),a.services=pt({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new V(a.services,a.options),a.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];a.emit.apply(a,[t].concat(n))})),a.init(r,n),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),i}(P);b.default(mt,"createInstance",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new mt(t,e)}));var _t=mt.createInstance();_t.createInstance=mt.createInstance,t.exports=_t},1306:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},435:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3246:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},7257:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},2478:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},4653:t=>{t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},268:t=>{function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},8721:(t,e,n)=>{var r=n(5508);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},7054:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},9680:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},6542:(t,e,n)=>{var r=n(8698).default,i=n(3246);t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},5508:t=>{function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4663:(t,e,n)=>{var r=n(435),i=n(7054),a=n(1170),o=n(9680);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},8698:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1170:(t,e,n)=>{var r=n(1306);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},6486:function(t,e,n){var r;t=n.nmd(t),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",h=32,u=128,l=1/0,c=9007199254740991,f=NaN,d=4294967295,g=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",h],["partialRight",64],["rearg",256]],p="[object Arguments]",v="[object Array]",y="[object Boolean]",m="[object Date]",_="[object Error]",b="[object Function]",x="[object GeneratorFunction]",w="[object Map]",S="[object Number]",k="[object Object]",C="[object Promise]",P="[object RegExp]",O="[object Set]",A="[object String]",T="[object Symbol]",R="[object WeakMap]",L="[object ArrayBuffer]",E="[object DataView]",M="[object Float32Array]",D="[object Float64Array]",I="[object Int8Array]",j="[object Int16Array]",G="[object Int32Array]",N="[object Uint8Array]",F="[object Uint8ClampedArray]",B="[object Uint16Array]",z="[object Uint32Array]",W=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,X=RegExp(Y.source),V=RegExp(q.source),K=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,pt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="["+kt+"]",Pt="["+xt+"]",Ot="\\d+",At="["+wt+"]",Tt="[^\\ud800-\\udfff"+kt+Ot+"\\u2700-\\u27bf"+wt+St+"]",Rt="\\ud83c[\\udffb-\\udfff]",Lt="[^\\ud800-\\udfff]",Et="(?:\\ud83c[\\udde6-\\uddff]){2}",Mt="[\\ud800-\\udbff][\\udc00-\\udfff]",Dt="["+St+"]",It="(?:"+At+"|"+Tt+")",jt="(?:"+Dt+"|"+Tt+")",Gt="(?:['](?:d|ll|m|re|s|t|ve))?",Nt="(?:['](?:D|LL|M|RE|S|T|VE))?",Ft="(?:"+Pt+"|"+Rt+")?",Bt="[\\ufe0e\\ufe0f]?",zt=Bt+Ft+"(?:\\u200d(?:"+[Lt,Et,Mt].join("|")+")"+Bt+Ft+")*",Wt="(?:"+["[\\u2700-\\u27bf]",Et,Mt].join("|")+")"+zt,Ut="(?:"+[Lt+Pt+"?",Pt,Et,Mt,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("[']","g"),Yt=RegExp(Pt,"g"),qt=RegExp(Rt+"(?="+Rt+")|"+Ut+zt,"g"),Xt=RegExp([Dt+"?"+At+"+"+Gt+"(?="+[Ct,Dt,"$"].join("|")+")",jt+"+"+Nt+"(?="+[Ct,Dt+It,"$"].join("|")+")",Dt+"?"+It+"+"+Gt,Dt+"+"+Nt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ot,Wt].join("|"),"g"),Vt=RegExp("[\\u200d\\ud800-\\udfff"+xt+"\\ufe0e\\ufe0f]"),Kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jt=-1,Qt={};Qt[M]=Qt[D]=Qt[I]=Qt[j]=Qt[G]=Qt[N]=Qt[F]=Qt[B]=Qt[z]=!0,Qt[p]=Qt[v]=Qt[L]=Qt[y]=Qt[E]=Qt[m]=Qt[_]=Qt[b]=Qt[w]=Qt[S]=Qt[k]=Qt[P]=Qt[O]=Qt[A]=Qt[R]=!1;var Zt={};Zt[p]=Zt[v]=Zt[L]=Zt[E]=Zt[y]=Zt[m]=Zt[M]=Zt[D]=Zt[I]=Zt[j]=Zt[G]=Zt[w]=Zt[S]=Zt[k]=Zt[P]=Zt[O]=Zt[A]=Zt[T]=Zt[N]=Zt[F]=Zt[B]=Zt[z]=!0,Zt[_]=Zt[b]=Zt[R]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,ae=re||ie||Function("return this")(),oe=e&&!e.nodeType&&e,se=oe&&t&&!t.nodeType&&t,he=se&&se.exports===oe,ue=he&&re.process,le=function(){try{return se&&se.require&&se.require("util").types||ue&&ue.binding&&ue.binding("util")}catch(t){}}(),ce=le&&le.isArrayBuffer,fe=le&&le.isDate,de=le&&le.isMap,ge=le&&le.isRegExp,pe=le&&le.isSet,ve=le&&le.isTypedArray;function ye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function me(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function _e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function we(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Se(t,e){return!(null==t||!t.length)&&Me(t,e,0)>-1}function ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ce(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Pe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Oe(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Ae(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Re=Ge("length");function Le(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ee(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Me(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ee(t,Ie,n)}function De(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function Ie(t){return t!=t}function je(t,e){var n=null==t?0:t.length;return n?Be(t,e)/n:f}function Ge(t){return function(e){return null==e?i:e[t]}}function Ne(t){return function(e){return null==t?i:t[e]}}function Fe(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function Be(t,e){for(var n,r=-1,a=t.length;++r<a;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function ze(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function We(t){return t?t.slice(0,sn(t)+1).replace(rt,""):t}function Ue(t){return function(e){return t(e)}}function He(t,e){return Ce(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function qe(t,e){for(var n=-1,r=t.length;++n<r&&Me(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Me(e,t[n],0)>-1;);return n}function Ve(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ke=Ne({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),$e=Ne({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Je(t){return"\\"+te[t]}function Qe(t){return Vt.test(t)}function Ze(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==s||(t[n]=s,a[i++]=n)}return a}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function an(t){return Qe(t)?function(t){for(var e=qt.lastIndex=0;qt.test(t);)++e;return e}(t):Re(t)}function on(t){return Qe(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.split("")}(t)}function sn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var hn=Ne({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),un=function t(e){var n,r=(e=null==e?ae:un.defaults(ae.Object(),e,un.pick(ae,$t))).Array,it=e.Date,xt=e.Error,wt=e.Function,St=e.Math,kt=e.Object,Ct=e.RegExp,Pt=e.String,Ot=e.TypeError,At=r.prototype,Tt=wt.prototype,Rt=kt.prototype,Lt=e["__core-js_shared__"],Et=Tt.toString,Mt=Rt.hasOwnProperty,Dt=0,It=(n=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",jt=Rt.toString,Gt=Et.call(kt),Nt=ae._,Ft=Ct("^"+Et.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=he?e.Buffer:i,zt=e.Symbol,Wt=e.Uint8Array,Ut=Bt?Bt.allocUnsafe:i,qt=tn(kt.getPrototypeOf,kt),Vt=kt.create,te=Rt.propertyIsEnumerable,re=At.splice,ie=zt?zt.isConcatSpreadable:i,oe=zt?zt.iterator:i,se=zt?zt.toStringTag:i,ue=function(){try{var t=ua(kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==ae.clearTimeout&&e.clearTimeout,Re=it&&it.now!==ae.Date.now&&it.now,Ne=e.setTimeout!==ae.setTimeout&&e.setTimeout,ln=St.ceil,cn=St.floor,fn=kt.getOwnPropertySymbols,dn=Bt?Bt.isBuffer:i,gn=e.isFinite,pn=At.join,vn=tn(kt.keys,kt),yn=St.max,mn=St.min,_n=it.now,bn=e.parseInt,xn=St.random,wn=At.reverse,Sn=ua(e,"DataView"),kn=ua(e,"Map"),Cn=ua(e,"Promise"),Pn=ua(e,"Set"),On=ua(e,"WeakMap"),An=ua(kt,"create"),Tn=On&&new On,Rn={},Ln=Na(Sn),En=Na(kn),Mn=Na(Cn),Dn=Na(Pn),In=Na(On),jn=zt?zt.prototype:i,Gn=jn?jn.valueOf:i,Nn=jn?jn.toString:i;function Fn(t){if(ns(t)&&!Yo(t)&&!(t instanceof Un)){if(t instanceof Wn)return t;if(Mt.call(t,"__wrapped__"))return Fa(t)}return new Wn(t)}var Bn=function(){function t(){}return function(e){if(!es(e))return{};if(Vt)return Vt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function zn(){}function Wn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Un(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qn;++e<n;)this.add(t[e])}function Vn(t){var e=this.__data__=new Yn(t);this.size=e.size}function Kn(t,e){var n=Yo(t),r=!n&&Ho(t),i=!n&&!r&&Ko(t),a=!n&&!r&&!i&&ls(t),o=n||r||i||a,s=o?ze(t.length,Pt):[],h=s.length;for(var u in t)!e&&!Mt.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||va(u,h))||s.push(u);return s}function $n(t){var e=t.length;return e?t[qr(0,e-1)]:i}function Jn(t,e){return Ma(Oi(t),or(e,0,t.length))}function Qn(t){return Ma(Oi(t))}function Zn(t,e,n){(n!==i&&!zo(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Mt.call(t,e)&&zo(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(zo(t[n][0],e))return n;return-1}function nr(t,e,n,r){return cr(t,(function(t,i,a){e(r,t,n(t),a)})),r}function rr(t,e){return t&&Ai(e,Es(e),t)}function ir(t,e,n){"__proto__"==e&&ue?ue(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ar(t,e){for(var n=-1,a=e.length,o=r(a),s=null==t;++n<a;)o[n]=s?i:Os(t,e[n]);return o}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function sr(t,e,n,r,a,o){var s,h=1&e,u=2&e,l=4&e;if(n&&(s=a?n(t,r,a,o):n(t)),s!==i)return s;if(!es(t))return t;var c=Yo(t);if(c){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!h)return Oi(t,s)}else{var f=fa(t),d=f==b||f==x;if(Ko(t))return xi(t,h);if(f==k||f==p||d&&!a){if(s=u||d?{}:ga(t),!h)return u?function(t,e){return Ai(t,ca(t),e)}(t,function(t,e){return t&&Ai(e,Ms(e),t)}(s,t)):function(t,e){return Ai(t,la(t),e)}(t,rr(s,t))}else{if(!Zt[f])return a?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case L:return wi(t);case y:case m:return new i(+t);case E:return function(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case D:case I:case j:case G:case N:case F:case B:case z:return Si(t,n);case w:return new i;case S:case A:return new i(t);case P:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return new i;case T:return r=t,Gn?kt(Gn.call(r)):{}}}(t,f,h)}}o||(o=new Vn);var g=o.get(t);if(g)return g;o.set(t,s),ss(t)?t.forEach((function(r){s.add(sr(r,e,n,r,t,o))})):rs(t)&&t.forEach((function(r,i){s.set(i,sr(r,e,n,i,t,o))}));var v=c?i:(l?u?na:ea:u?Ms:Es)(t);return _e(v||t,(function(r,i){v&&(r=t[i=r]),tr(s,i,sr(r,e,n,i,t,o))})),s}function hr(t,e,n){var r=n.length;if(null==t)return!r;for(t=kt(t);r--;){var a=n[r],o=e[a],s=t[a];if(s===i&&!(a in t)||!o(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Ot(a);return Ta((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,a=Se,o=!0,s=t.length,h=[],u=e.length;if(!s)return h;n&&(e=Ce(e,Ue(n))),r?(a=ke,o=!1):e.length>=200&&(a=Ye,o=!1,e=new Xn(e));t:for(;++i<s;){var l=t[i],c=null==n?l:n(l);if(l=r||0!==l?l:0,o&&c==c){for(var f=u;f--;)if(e[f]===c)continue t;h.push(l)}else a(e,c,r)||h.push(l)}return h}Fn.templateSettings={escape:K,evaluate:$,interpolate:J,variable:"",imports:{_:Fn}},Fn.prototype=zn.prototype,Fn.prototype.constructor=Fn,Wn.prototype=Bn(zn.prototype),Wn.prototype.constructor=Wn,Un.prototype=Bn(zn.prototype),Un.prototype.constructor=Un,Hn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===o?i:n}return Mt.call(e,t)?e[t]:i},Hn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==i:Mt.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===i?o:e,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Yn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Yn.prototype.has=function(t){return er(this.__data__,t)>-1},Yn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(kn||Yn),string:new Hn}},qn.prototype.delete=function(t){var e=sa(this,t).delete(t);return this.size-=e?1:0,e},qn.prototype.get=function(t){return sa(this,t).get(t)},qn.prototype.has=function(t){return sa(this,t).has(t)},qn.prototype.set=function(t,e){var n=sa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(t){return this.__data__.set(t,o),this},Xn.prototype.has=function(t){return this.__data__.has(t)},Vn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Vn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Vn.prototype.get=function(t){return this.__data__.get(t)},Vn.prototype.has=function(t){return this.__data__.has(t)},Vn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!kn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(t,e),this.size=n.size,this};var cr=Li(_r),fr=Li(br,!0);function dr(t,e){var n=!0;return cr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,n){for(var r=-1,a=t.length;++r<a;){var o=t[r],s=e(o);if(null!=s&&(h===i?s==s&&!us(s):n(s,h)))var h=s,u=o}return u}function pr(t,e){var n=[];return cr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=pa),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):Pe(i,s):r||(i[i.length]=s)}return i}var yr=Ei(),mr=Ei(!0);function _r(t,e){return t&&yr(t,e,Es)}function br(t,e){return t&&mr(t,e,Es)}function xr(t,e){return we(e,(function(e){return Qo(t[e])}))}function wr(t,e){for(var n=0,r=(e=yi(e,t)).length;null!=t&&n<r;)t=t[Ga(e[n++])];return n&&n==r?t:i}function Sr(t,e,n){var r=e(t);return Yo(t)?r:Pe(r,n(t))}function kr(t){return null==t?t===i?"[object Undefined]":"[object Null]":se&&se in kt(t)?function(t){var e=Mt.call(t,se),n=t[se];try{t[se]=i;var r=!0}catch(t){}var a=jt.call(t);return r&&(e?t[se]=n:delete t[se]),a}(t):function(t){return jt.call(t)}(t)}function Cr(t,e){return t>e}function Pr(t,e){return null!=t&&Mt.call(t,e)}function Or(t,e){return null!=t&&e in kt(t)}function Ar(t,e,n){for(var a=n?ke:Se,o=t[0].length,s=t.length,h=s,u=r(s),l=1/0,c=[];h--;){var f=t[h];h&&e&&(f=Ce(f,Ue(e))),l=mn(f.length,l),u[h]=!n&&(e||o>=120&&f.length>=120)?new Xn(h&&f):i}f=t[0];var d=-1,g=u[0];t:for(;++d<o&&c.length<l;){var p=f[d],v=e?e(p):p;if(p=n||0!==p?p:0,!(g?Ye(g,v):a(c,v,n))){for(h=s;--h;){var y=u[h];if(!(y?Ye(y,v):a(t[h],v,n)))continue t}g&&g.push(v),c.push(p)}}return c}function Tr(t,e,n){var r=null==(t=Ca(t,e=yi(e,t)))?t:t[Ga($a(e))];return null==r?i:ye(r,t,n)}function Rr(t){return ns(t)&&kr(t)==p}function Lr(t,e,n,r,a){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,a,o){var s=Yo(t),h=Yo(e),u=s?v:fa(t),l=h?v:fa(e),c=(u=u==p?k:u)==k,f=(l=l==p?k:l)==k,d=u==l;if(d&&Ko(t)){if(!Ko(e))return!1;s=!0,c=!1}if(d&&!c)return o||(o=new Vn),s||ls(t)?Zi(t,e,n,r,a,o):function(t,e,n,r,i,a,o){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!a(new Wt(t),new Wt(e)));case y:case m:case S:return zo(+t,+e);case _:return t.name==e.name&&t.message==e.message;case P:case A:return t==e+"";case w:var s=Ze;case O:var h=1&r;if(s||(s=nn),t.size!=e.size&&!h)return!1;var u=o.get(t);if(u)return u==e;r|=2,o.set(t,e);var l=Zi(s(t),s(e),r,i,a,o);return o.delete(t),l;case T:if(Gn)return Gn.call(t)==Gn.call(e)}return!1}(t,e,u,n,r,a,o);if(!(1&n)){var g=c&&Mt.call(t,"__wrapped__"),b=f&&Mt.call(e,"__wrapped__");if(g||b){var x=g?t.value():t,C=b?e.value():e;return o||(o=new Vn),a(x,C,n,r,o)}}return!!d&&(o||(o=new Vn),function(t,e,n,r,a,o){var s=1&n,h=ea(t),u=h.length;if(u!=ea(e).length&&!s)return!1;for(var l=u;l--;){var c=h[l];if(!(s?c in e:Mt.call(e,c)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var g=!0;o.set(t,e),o.set(e,t);for(var p=s;++l<u;){var v=t[c=h[l]],y=e[c];if(r)var m=s?r(y,v,c,e,t,o):r(v,y,c,t,e,o);if(!(m===i?v===y||a(v,y,n,r,o):m)){g=!1;break}p||(p="constructor"==c)}if(g&&!p){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(g=!1)}return o.delete(t),o.delete(e),g}(t,e,n,r,a,o))}(t,e,n,r,Lr,a))}function Er(t,e,n,r){var a=n.length,o=a,s=!r;if(null==t)return!o;for(t=kt(t);a--;){var h=n[a];if(s&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++a<o;){var u=(h=n[a])[0],l=t[u],c=h[1];if(s&&h[2]){if(l===i&&!(u in t))return!1}else{var f=new Vn;if(r)var d=r(l,c,u,t,e,f);if(!(d===i?Lr(c,l,3,r,f):d))return!1}}return!0}function Mr(t){return!(!es(t)||(e=t,It&&It in e))&&(Qo(t)?Ft:pt).test(Na(t));var e}function Dr(t){return"function"==typeof t?t:null==t?ih:"object"==typeof t?Yo(t)?Fr(t[0],t[1]):Nr(t):dh(t)}function Ir(t){if(!xa(t))return vn(t);var e=[];for(var n in kt(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t,e){return t<e}function Gr(t,e){var n=-1,i=Xo(t)?r(t.length):[];return cr(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function Nr(t){var e=ha(t);return 1==e.length&&e[0][2]?Sa(e[0][0],e[0][1]):function(n){return n===t||Er(n,t,e)}}function Fr(t,e){return ma(t)&&wa(e)?Sa(Ga(t),e):function(n){var r=Os(n,t);return r===i&&r===e?As(n,t):Lr(e,r,3)}}function Br(t,e,n,r,a){t!==e&&yr(e,(function(o,s){if(a||(a=new Vn),es(o))!function(t,e,n,r,a,o,s){var h=Oa(t,n),u=Oa(e,n),l=s.get(u);if(l)Zn(t,n,l);else{var c=o?o(h,u,n+"",t,e,s):i,f=c===i;if(f){var d=Yo(u),g=!d&&Ko(u),p=!d&&!g&&ls(u);c=u,d||g||p?Yo(h)?c=h:Vo(h)?c=Oi(h):g?(f=!1,c=xi(u,!0)):p?(f=!1,c=Si(u,!0)):c=[]:as(u)||Ho(u)?(c=h,Ho(h)?c=ms(h):es(h)&&!Qo(h)||(c=ga(u))):f=!1}f&&(s.set(u,c),a(c,u,r,o,s),s.delete(u)),Zn(t,n,c)}}(t,e,s,n,Br,r,a);else{var h=r?r(Oa(t,s),o,s+"",t,e,a):i;h===i&&(h=o),Zn(t,s,h)}}),Ms)}function zr(t,e){var n=t.length;if(n)return va(e+=e<0?n:0,n)?t[e]:i}function Wr(t,e,n){e=e.length?Ce(e,(function(t){return Yo(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t})):[ih];var r=-1;return e=Ce(e,Ue(oa())),function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var h=ki(i[r],a[r]);if(h)return r>=s?h:h*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(Gr(t,(function(t,n,i){return{criteria:Ce(e,(function(e){return e(t)})),index:++r,value:t}})))}function Ur(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=wr(t,o);n(s,o)&&Jr(a,yi(o,t),s)}return a}function Hr(t,e,n,r){var i=r?De:Me,a=-1,o=e.length,s=t;for(t===e&&(e=Oi(e)),n&&(s=Ce(t,Ue(n)));++a<o;)for(var h=0,u=e[a],l=n?n(u):u;(h=i(s,l,h,r))>-1;)s!==t&&re.call(s,h,1),re.call(t,h,1);return t}function Yr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;va(i)?re.call(t,i,1):ui(t,i)}}return t}function qr(t,e){return t+cn(xn()*(e-t+1))}function Xr(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=cn(e/2))&&(t+=t)}while(e);return n}function Vr(t,e){return Ra(ka(t,e,ih),t+"")}function Kr(t){return $n(zs(t))}function $r(t,e){var n=zs(t);return Ma(n,or(e,0,n.length))}function Jr(t,e,n,r){if(!es(t))return t;for(var a=-1,o=(e=yi(e,t)).length,s=o-1,h=t;null!=h&&++a<o;){var u=Ga(e[a]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(a!=s){var c=h[u];(l=r?r(c,u,h):i)===i&&(l=es(c)?c:va(e[a+1])?[]:{})}tr(h,u,l),h=h[u]}return t}var Qr=Tn?function(t,e){return Tn.set(t,e),t}:ih,Zr=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:eh(e),writable:!0})}:ih;function ti(t){return Ma(zs(t))}function ei(t,e,n){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var o=r(a);++i<a;)o[i]=t[i+e];return o}function ni(t,e){var n;return cr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!us(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return ii(t,e,ih,n)}function ii(t,e,n,r){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,h=null===e,u=us(e),l=e===i;a<o;){var c=cn((a+o)/2),f=n(t[c]),d=f!==i,g=null===f,p=f==f,v=us(f);if(s)var y=r||p;else y=l?p&&(r||d):h?p&&d&&(r||!g):u?p&&d&&!g&&(r||!v):!g&&!v&&(r?f<=e:f<e);y?a=c+1:o=c}return mn(o,4294967294)}function ai(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!zo(s,h)){var h=s;a[i++]=0===o?0:o}}return a}function oi(t){return"number"==typeof t?t:us(t)?f:+t}function si(t){if("string"==typeof t)return t;if(Yo(t))return Ce(t,si)+"";if(us(t))return Nn?Nn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function hi(t,e,n){var r=-1,i=Se,a=t.length,o=!0,s=[],h=s;if(n)o=!1,i=ke;else if(a>=200){var u=e?null:Xi(t);if(u)return nn(u);o=!1,i=Ye,h=new Xn}else h=e?[]:s;t:for(;++r<a;){var l=t[r],c=e?e(l):l;if(l=n||0!==l?l:0,o&&c==c){for(var f=h.length;f--;)if(h[f]===c)continue t;e&&h.push(c),s.push(l)}else i(h,c,n)||(h!==s&&h.push(c),s.push(l))}return s}function ui(t,e){return null==(t=Ca(t,e=yi(e,t)))||delete t[Ga($a(e))]}function li(t,e,n,r){return Jr(t,e,n(wr(t,e)),r)}function ci(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ei(t,r?0:a,r?a+1:i):ei(t,r?a+1:0,r?i:a)}function fi(t,e){var n=t;return n instanceof Un&&(n=n.value()),Oe(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),n)}function di(t,e,n){var i=t.length;if(i<2)return i?hi(t[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=t[a],h=-1;++h<i;)h!=a&&(o[a]=lr(o[a]||s,t[h],e,n));return hi(vr(o,1),e,n)}function gi(t,e,n){for(var r=-1,a=t.length,o=e.length,s={};++r<a;){var h=r<o?e[r]:i;n(s,t[r],h)}return s}function pi(t){return Vo(t)?t:[]}function vi(t){return"function"==typeof t?t:ih}function yi(t,e){return Yo(t)?t:ma(t,e)?[t]:ja(_s(t))}var mi=Vr;function _i(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var bi=le||function(t){return ae.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Ut?Ut(n):new t.constructor(n);return t.copy(r),r}function wi(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Si(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ki(t,e){if(t!==e){var n=t!==i,r=null===t,a=t==t,o=us(t),s=e!==i,h=null===e,u=e==e,l=us(e);if(!h&&!l&&!o&&t>e||o&&s&&u&&!h&&!l||r&&s&&u||!n&&u||!a)return 1;if(!r&&!o&&!l&&t<e||l&&n&&a&&!r&&!o||h&&n&&a||!s&&a||!u)return-1}return 0}function Ci(t,e,n,i){for(var a=-1,o=t.length,s=n.length,h=-1,u=e.length,l=yn(o-s,0),c=r(u+l),f=!i;++h<u;)c[h]=e[h];for(;++a<s;)(f||a<o)&&(c[n[a]]=t[a]);for(;l--;)c[h++]=t[a++];return c}function Pi(t,e,n,i){for(var a=-1,o=t.length,s=-1,h=n.length,u=-1,l=e.length,c=yn(o-h,0),f=r(c+l),d=!i;++a<c;)f[a]=t[a];for(var g=a;++u<l;)f[g+u]=e[u];for(;++s<h;)(d||a<o)&&(f[g+n[s]]=t[a++]);return f}function Oi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ai(t,e,n,r){var a=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var h=e[o],u=r?r(n[h],t[h],h,n,t):i;u===i&&(u=t[h]),a?ir(n,h,u):tr(n,h,u)}return n}function Ti(t,e){return function(n,r){var i=Yo(n)?me:nr,a=e?e():{};return i(n,t,oa(r,2),a)}}function Ri(t){return Vr((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(a--,o):i,s&&ya(n[0],n[1],s)&&(o=a<3?i:o,a=1),e=kt(e);++r<a;){var h=n[r];h&&t(e,h,r,o)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!Xo(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=kt(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Ei(t){return function(e,n,r){for(var i=-1,a=kt(e),o=r(e),s=o.length;s--;){var h=o[t?s:++i];if(!1===n(a[h],h,a))break}return e}}function Mi(t){return function(e){var n=Qe(e=_s(e))?on(e):i,r=n?n[0]:e.charAt(0),a=n?_i(n,1).join(""):e.slice(1);return r[t]()+a}}function Di(t){return function(e){return Oe(Qs(Hs(e).replace(Ht,"")),t,"")}}function Ii(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Bn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function ji(t){return function(e,n,r){var a=kt(e);if(!Xo(e)){var o=oa(n,3);e=Es(e),n=function(t){return o(a[t],t,a)}}var s=t(e,n,r);return s>-1?a[o?e[s]:s]:i}}function Gi(t){return ta((function(e){var n=e.length,r=n,o=Wn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Ot(a);if(o&&!h&&"wrapper"==ia(s))var h=new Wn([],!0)}for(r=h?r:n;++r<n;){var u=ia(s=e[r]),l="wrapper"==u?ra(s):i;h=l&&_a(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?h[ia(l[0])].apply(h,l[3]):1==s.length&&_a(s)?h[u]():h.thru(s)}return function(){var t=arguments,r=t[0];if(h&&1==t.length&&Yo(r))return h.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}}))}function Ni(t,e,n,a,o,s,h,l,c,f){var d=e&u,g=1&e,p=2&e,v=24&e,y=512&e,m=p?i:Ii(t);return function i(){for(var u=arguments.length,_=r(u),b=u;b--;)_[b]=arguments[b];if(v)var x=aa(i),w=Ve(_,x);if(a&&(_=Ci(_,a,o,v)),s&&(_=Pi(_,s,h,v)),u-=w,v&&u<f){var S=en(_,x);return Yi(t,e,Ni,i.placeholder,n,_,S,l,c,f-u)}var k=g?n:this,C=p?k[t]:t;return u=_.length,l?_=Pa(_,l):y&&u>1&&_.reverse(),d&&c<u&&(_.length=c),this&&this!==ae&&this instanceof i&&(C=m||Ii(C)),C.apply(k,_)}}function Fi(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function Bi(t,e){return function(n,r){var a;if(n===i&&r===i)return e;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=oi(n),r=oi(r)),a=t(n,r)}return a}}function zi(t){return ta((function(e){return e=Ce(e,Ue(oa())),Vr((function(n){var r=this;return t(e,(function(t){return ye(t,r,n)}))}))}))}function Wi(t,e){var n=(e=e===i?" ":si(e)).length;if(n<2)return n?Xr(e,t):e;var r=Xr(e,ln(t/an(e)));return Qe(e)?_i(on(r),0,t).join(""):r.slice(0,t)}function Ui(t){return function(e,n,a){return a&&"number"!=typeof a&&ya(e,n,a)&&(n=a=i),e=gs(e),n===i?(n=e,e=0):n=gs(n),function(t,e,n,i){for(var a=-1,o=yn(ln((e-t)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=t,t+=n;return s}(e,n,a=a===i?e<n?1:-1:gs(a),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ys(e),n=ys(n)),t(e,n)}}function Yi(t,e,n,r,a,o,s,u,l,c){var f=8&e;e|=f?h:64,4&(e&=~(f?64:h))||(e&=-4);var d=[t,e,a,f?o:i,f?s:i,f?i:o,f?i:s,u,l,c],g=n.apply(i,d);return _a(t)&&Aa(g,d),g.placeholder=r,La(g,t,e)}function qi(t){var e=St[t];return function(t,n){if(t=ys(t),(n=null==n?0:mn(ps(n),292))&&gn(t)){var r=(_s(t)+"e").split("e");return+((r=(_s(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xi=Pn&&1/nn(new Pn([,-0]))[1]==l?function(t){return new Pn(t)}:uh;function Vi(t){return function(e){var n=fa(e);return n==w?Ze(e):n==O?rn(e):function(t,e){return Ce(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ki(t,e,n,o,l,c,f,d){var g=2&e;if(!g&&"function"!=typeof t)throw new Ot(a);var p=o?o.length:0;if(p||(e&=-97,o=l=i),f=f===i?f:yn(ps(f),0),d=d===i?d:ps(d),p-=l?l.length:0,64&e){var v=o,y=l;o=l=i}var m=g?i:ra(t),_=[t,e,n,o,l,v,y,c,f,d];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<131,o=r==u&&8==n||r==u&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var h=e[3];if(h){var l=t[3];t[3]=l?Ci(l,h,e[4]):h,t[4]=l?en(t[3],s):e[4]}(h=e[5])&&(l=t[5],t[5]=l?Pi(l,h,e[6]):h,t[6]=l?en(t[5],s):e[6]),(h=e[7])&&(t[7]=h),r&u&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(_,m),t=_[0],e=_[1],n=_[2],o=_[3],l=_[4],!(d=_[9]=_[9]===i?g?0:t.length:yn(_[9]-p,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var a=Ii(t);return function o(){for(var s=arguments.length,h=r(s),u=s,l=aa(o);u--;)h[u]=arguments[u];var c=s<3&&h[0]!==l&&h[s-1]!==l?[]:en(h,l);return(s-=c.length)<n?Yi(t,e,Ni,o.placeholder,i,h,c,i,i,n-s):ye(this&&this!==ae&&this instanceof o?a:t,this,h)}}(t,e,d):e!=h&&33!=e||l.length?Ni.apply(i,_):function(t,e,n,i){var a=1&e,o=Ii(t);return function e(){for(var s=-1,h=arguments.length,u=-1,l=i.length,c=r(l+h),f=this&&this!==ae&&this instanceof e?o:t;++u<l;)c[u]=i[u];for(;h--;)c[u++]=arguments[++s];return ye(f,a?n:this,c)}}(t,e,n,o);else var b=function(t,e,n){var r=1&e,i=Ii(t);return function e(){return(this&&this!==ae&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return La((m?Qr:Aa)(b,_),t,e)}function $i(t,e,n,r){return t===i||zo(t,Rt[n])&&!Mt.call(r,n)?e:t}function Ji(t,e,n,r,a,o){return es(t)&&es(e)&&(o.set(e,t),Br(t,e,i,Ji,o),o.delete(e)),t}function Qi(t){return as(t)?i:t}function Zi(t,e,n,r,a,o){var s=1&n,h=t.length,u=e.length;if(h!=u&&!(s&&u>h))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var f=-1,d=!0,g=2&n?new Xn:i;for(o.set(t,e),o.set(e,t);++f<h;){var p=t[f],v=e[f];if(r)var y=s?r(v,p,f,e,t,o):r(p,v,f,t,e,o);if(y!==i){if(y)continue;d=!1;break}if(g){if(!Te(e,(function(t,e){if(!Ye(g,e)&&(p===t||a(p,t,n,r,o)))return g.push(e)}))){d=!1;break}}else if(p!==v&&!a(p,v,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function ta(t){return Ra(ka(t,i,Ya),t+"")}function ea(t){return Sr(t,Es,la)}function na(t){return Sr(t,Ms,ca)}var ra=Tn?function(t){return Tn.get(t)}:uh;function ia(t){for(var e=t.name+"",n=Rn[e],r=Mt.call(Rn,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function aa(t){return(Mt.call(Fn,"placeholder")?Fn:t).placeholder}function oa(){var t=Fn.iteratee||ah;return t=t===ah?Dr:t,arguments.length?t(arguments[0],arguments[1]):t}function sa(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ha(t){for(var e=Es(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,wa(i)]}return e}function ua(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Mr(n)?n:i}var la=fn?function(t){return null==t?[]:(t=kt(t),we(fn(t),(function(e){return te.call(t,e)})))}:vh,ca=fn?function(t){for(var e=[];t;)Pe(e,la(t)),t=qt(t);return e}:vh,fa=kr;function da(t,e,n){for(var r=-1,i=(e=yi(e,t)).length,a=!1;++r<i;){var o=Ga(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&ts(i)&&va(o,i)&&(Yo(t)||Ho(t))}function ga(t){return"function"!=typeof t.constructor||xa(t)?{}:Bn(qt(t))}function pa(t){return Yo(t)||Ho(t)||!!(ie&&t&&t[ie])}function va(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function ya(t,e,n){if(!es(n))return!1;var r=typeof e;return!!("number"==r?Xo(n)&&va(e,n.length):"string"==r&&e in n)&&zo(n[e],t)}function ma(t,e){if(Yo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||Z.test(t)||!Q.test(t)||null!=e&&t in kt(e)}function _a(t){var e=ia(t),n=Fn[e];if("function"!=typeof n||!(e in Un.prototype))return!1;if(t===n)return!0;var r=ra(n);return!!r&&t===r[0]}(Sn&&fa(new Sn(new ArrayBuffer(1)))!=E||kn&&fa(new kn)!=w||Cn&&fa(Cn.resolve())!=C||Pn&&fa(new Pn)!=O||On&&fa(new On)!=R)&&(fa=function(t){var e=kr(t),n=e==k?t.constructor:i,r=n?Na(n):"";if(r)switch(r){case Ln:return E;case En:return w;case Mn:return C;case Dn:return O;case In:return R}return e});var ba=Lt?Qo:yh;function xa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function wa(t){return t==t&&!es(t)}function Sa(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in kt(n))}}function ka(t,e,n){return e=yn(e===i?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=yn(i.length-e,0),s=r(o);++a<o;)s[a]=i[e+a];a=-1;for(var h=r(e+1);++a<e;)h[a]=i[a];return h[e]=n(s),ye(t,this,h)}}function Ca(t,e){return e.length<2?t:wr(t,ei(e,0,-1))}function Pa(t,e){for(var n=t.length,r=mn(e.length,n),a=Oi(t);r--;){var o=e[r];t[r]=va(o,n)?a[o]:i}return t}function Oa(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Aa=Ea(Qr),Ta=Ne||function(t,e){return ae.setTimeout(t,e)},Ra=Ea(Zr);function La(t,e,n){var r=e+"";return Ra(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return _e(g,(function(n){var r="_."+n[0];e&n[1]&&!Se(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(st):[]}(r),n)))}function Ea(t){var e=0,n=0;return function(){var r=_n(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Ma(t,e){var n=-1,r=t.length,a=r-1;for(e=e===i?r:e;++n<e;){var o=qr(n,a),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var Da,Ia,ja=(Da=Io((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)})),e}),(function(t){return 500===Ia.size&&Ia.clear(),t})),Ia=Da.cache,Da);function Ga(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Na(t){if(null!=t){try{return Et.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Fa(t){if(t instanceof Un)return t.clone();var e=new Wn(t.__wrapped__,t.__chain__);return e.__actions__=Oi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ba=Vr((function(t,e){return Vo(t)?lr(t,vr(e,1,Vo,!0)):[]})),za=Vr((function(t,e){var n=$a(e);return Vo(n)&&(n=i),Vo(t)?lr(t,vr(e,1,Vo,!0),oa(n,2)):[]})),Wa=Vr((function(t,e){var n=$a(e);return Vo(n)&&(n=i),Vo(t)?lr(t,vr(e,1,Vo,!0),i,n):[]}));function Ua(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=yn(r+i,0)),Ee(t,oa(e,3),i)}function Ha(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ps(n),a=n<0?yn(r+a,0):mn(a,r-1)),Ee(t,oa(e,3),a,!0)}function Ya(t){return null!=t&&t.length?vr(t,1):[]}function qa(t){return t&&t.length?t[0]:i}var Xa=Vr((function(t){var e=Ce(t,pi);return e.length&&e[0]===t[0]?Ar(e):[]})),Va=Vr((function(t){var e=$a(t),n=Ce(t,pi);return e===$a(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Ar(n,oa(e,2)):[]})),Ka=Vr((function(t){var e=$a(t),n=Ce(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,i,e):[]}));function $a(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Ja=Vr(Qa);function Qa(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var Za=ta((function(t,e){var n=null==t?0:t.length,r=ar(t,e);return Yr(t,Ce(e,(function(t){return va(t,n)?+t:t})).sort(ki)),r}));function to(t){return null==t?t:wn.call(t)}var eo=Vr((function(t){return hi(vr(t,1,Vo,!0))})),no=Vr((function(t){var e=$a(t);return Vo(e)&&(e=i),hi(vr(t,1,Vo,!0),oa(e,2))})),ro=Vr((function(t){var e=$a(t);return e="function"==typeof e?e:i,hi(vr(t,1,Vo,!0),i,e)}));function io(t){if(!t||!t.length)return[];var e=0;return t=we(t,(function(t){if(Vo(t))return e=yn(t.length,e),!0})),ze(e,(function(e){return Ce(t,Ge(e))}))}function ao(t,e){if(!t||!t.length)return[];var n=io(t);return null==e?n:Ce(n,(function(t){return ye(e,i,t)}))}var oo=Vr((function(t,e){return Vo(t)?lr(t,e):[]})),so=Vr((function(t){return di(we(t,Vo))})),ho=Vr((function(t){var e=$a(t);return Vo(e)&&(e=i),di(we(t,Vo),oa(e,2))})),uo=Vr((function(t){var e=$a(t);return e="function"==typeof e?e:i,di(we(t,Vo),i,e)})),lo=Vr(io),co=Vr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ao(t,n)}));function fo(t){var e=Fn(t);return e.__chain__=!0,e}function go(t,e){return e(t)}var po=ta((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,a=function(e){return ar(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Un&&va(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:go,args:[a],thisArg:i}),new Wn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(a)})),vo=Ti((function(t,e,n){Mt.call(t,n)?++t[n]:ir(t,n,1)})),yo=ji(Ua),mo=ji(Ha);function _o(t,e){return(Yo(t)?_e:cr)(t,oa(e,3))}function bo(t,e){return(Yo(t)?be:fr)(t,oa(e,3))}var xo=Ti((function(t,e,n){Mt.call(t,n)?t[n].push(e):ir(t,n,[e])})),wo=Vr((function(t,e,n){var i=-1,a="function"==typeof e,o=Xo(t)?r(t.length):[];return cr(t,(function(t){o[++i]=a?ye(e,t,n):Tr(t,e,n)})),o})),So=Ti((function(t,e,n){ir(t,n,e)}));function ko(t,e){return(Yo(t)?Ce:Gr)(t,oa(e,3))}var Co=Ti((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Po=Vr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ya(t,e[0],e[1])?e=[]:n>2&&ya(e[0],e[1],e[2])&&(e=[e[0]]),Wr(t,vr(e,1),[])})),Oo=Re||function(){return ae.Date.now()};function Ao(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Ki(t,u,i,i,i,i,e)}function To(t,e){var n;if("function"!=typeof e)throw new Ot(a);return t=ps(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ro=Vr((function(t,e,n){var r=1;if(n.length){var i=en(n,aa(Ro));r|=h}return Ki(t,r,e,n,i)})),Lo=Vr((function(t,e,n){var r=3;if(n.length){var i=en(n,aa(Lo));r|=h}return Ki(e,r,t,n,i)}));function Eo(t,e,n){var r,o,s,h,u,l,c=0,f=!1,d=!1,g=!0;if("function"!=typeof t)throw new Ot(a);function p(e){var n=r,a=o;return r=o=i,c=e,h=t.apply(a,n)}function v(t){return c=t,u=Ta(m,e),f?p(t):h}function y(t){var n=t-l;return l===i||n>=e||n<0||d&&t-c>=s}function m(){var t=Oo();if(y(t))return _(t);u=Ta(m,function(t){var n=e-(t-l);return d?mn(n,s-(t-c)):n}(t))}function _(t){return u=i,g&&r?p(t):(r=o=i,h)}function b(){var t=Oo(),n=y(t);if(r=arguments,o=this,l=t,n){if(u===i)return v(l);if(d)return bi(u),u=Ta(m,e),p(l)}return u===i&&(u=Ta(m,e)),h}return e=ys(e)||0,es(n)&&(f=!!n.leading,s=(d="maxWait"in n)?yn(ys(n.maxWait)||0,e):s,g="trailing"in n?!!n.trailing:g),b.cancel=function(){u!==i&&bi(u),c=0,r=l=o=u=i},b.flush=function(){return u===i?h:_(Oo())},b}var Mo=Vr((function(t,e){return ur(t,1,e)})),Do=Vr((function(t,e,n){return ur(t,ys(e)||0,n)}));function Io(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Io.Cache||qn),n}function jo(t){if("function"!=typeof t)throw new Ot(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Io.Cache=qn;var Go=mi((function(t,e){var n=(e=1==e.length&&Yo(e[0])?Ce(e[0],Ue(oa())):Ce(vr(e,1),Ue(oa()))).length;return Vr((function(r){for(var i=-1,a=mn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return ye(t,this,r)}))})),No=Vr((function(t,e){var n=en(e,aa(No));return Ki(t,h,i,e,n)})),Fo=Vr((function(t,e){var n=en(e,aa(Fo));return Ki(t,64,i,e,n)})),Bo=ta((function(t,e){return Ki(t,256,i,i,i,e)}));function zo(t,e){return t===e||t!=t&&e!=e}var Wo=Hi(Cr),Uo=Hi((function(t,e){return t>=e})),Ho=Rr(function(){return arguments}())?Rr:function(t){return ns(t)&&Mt.call(t,"callee")&&!te.call(t,"callee")},Yo=r.isArray,qo=ce?Ue(ce):function(t){return ns(t)&&kr(t)==L};function Xo(t){return null!=t&&ts(t.length)&&!Qo(t)}function Vo(t){return ns(t)&&Xo(t)}var Ko=dn||yh,$o=fe?Ue(fe):function(t){return ns(t)&&kr(t)==m};function Jo(t){if(!ns(t))return!1;var e=kr(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function Qo(t){if(!es(t))return!1;var e=kr(t);return e==b||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zo(t){return"number"==typeof t&&t==ps(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=de?Ue(de):function(t){return ns(t)&&fa(t)==w};function is(t){return"number"==typeof t||ns(t)&&kr(t)==S}function as(t){if(!ns(t)||kr(t)!=k)return!1;var e=qt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Et.call(n)==Gt}var os=ge?Ue(ge):function(t){return ns(t)&&kr(t)==P},ss=pe?Ue(pe):function(t){return ns(t)&&fa(t)==O};function hs(t){return"string"==typeof t||!Yo(t)&&ns(t)&&kr(t)==A}function us(t){return"symbol"==typeof t||ns(t)&&kr(t)==T}var ls=ve?Ue(ve):function(t){return ns(t)&&ts(t.length)&&!!Qt[kr(t)]},cs=Hi(jr),fs=Hi((function(t,e){return t<=e}));function ds(t){if(!t)return[];if(Xo(t))return hs(t)?on(t):Oi(t);if(oe&&t[oe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[oe]());var e=fa(t);return(e==w?Ze:e==O?nn:zs)(t)}function gs(t){return t?(t=ys(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ps(t){var e=gs(t),n=e%1;return e==e?n?e-n:e:0}function vs(t){return t?or(ps(t),0,d):0}function ys(t){if("number"==typeof t)return t;if(us(t))return f;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=We(t);var n=gt.test(t);return n||vt.test(t)?ne(t.slice(2),n?2:8):dt.test(t)?f:+t}function ms(t){return Ai(t,Ms(t))}function _s(t){return null==t?"":si(t)}var bs=Ri((function(t,e){if(xa(e)||Xo(e))Ai(e,Es(e),t);else for(var n in e)Mt.call(e,n)&&tr(t,n,e[n])})),xs=Ri((function(t,e){Ai(e,Ms(e),t)})),ws=Ri((function(t,e,n,r){Ai(e,Ms(e),t,r)})),Ss=Ri((function(t,e,n,r){Ai(e,Es(e),t,r)})),ks=ta(ar),Cs=Vr((function(t,e){t=kt(t);var n=-1,r=e.length,a=r>2?e[2]:i;for(a&&ya(e[0],e[1],a)&&(r=1);++n<r;)for(var o=e[n],s=Ms(o),h=-1,u=s.length;++h<u;){var l=s[h],c=t[l];(c===i||zo(c,Rt[l])&&!Mt.call(t,l))&&(t[l]=o[l])}return t})),Ps=Vr((function(t){return t.push(i,Ji),ye(Is,i,t)}));function Os(t,e,n){var r=null==t?i:wr(t,e);return r===i?n:r}function As(t,e){return null!=t&&da(t,e,Or)}var Ts=Fi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n}),eh(ih)),Rs=Fi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),oa),Ls=Vr(Tr);function Es(t){return Xo(t)?Kn(t):Ir(t)}function Ms(t){return Xo(t)?Kn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=xa(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}(t)}var Ds=Ri((function(t,e,n){Br(t,e,n)})),Is=Ri((function(t,e,n,r){Br(t,e,n,r)})),js=ta((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ce(e,(function(e){return e=yi(e,t),r||(r=e.length>1),e})),Ai(t,na(t),n),r&&(n=sr(n,7,Qi));for(var i=e.length;i--;)ui(n,e[i]);return n})),Gs=ta((function(t,e){return null==t?{}:function(t,e){return Ur(t,e,(function(e,n){return As(t,n)}))}(t,e)}));function Ns(t,e){if(null==t)return{};var n=Ce(na(t),(function(t){return[t]}));return e=oa(e),Ur(t,n,(function(t,n){return e(t,n[0])}))}var Fs=Vi(Es),Bs=Vi(Ms);function zs(t){return null==t?[]:He(t,Es(t))}var Ws=Di((function(t,e,n){return e=e.toLowerCase(),t+(n?Us(e):e)}));function Us(t){return Js(_s(t).toLowerCase())}function Hs(t){return(t=_s(t))&&t.replace(mt,Ke).replace(Yt,"")}var Ys=Di((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),qs=Di((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=Mi("toLowerCase"),Vs=Di((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ks=Di((function(t,e,n){return t+(n?" ":"")+Js(e)})),$s=Di((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Js=Mi("toUpperCase");function Qs(t,e,n){return t=_s(t),(e=n?i:e)===i?function(t){return Kt.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Zs=Vr((function(t,e){try{return ye(t,i,e)}catch(t){return Jo(t)?t:new xt(t)}})),th=ta((function(t,e){return _e(e,(function(e){e=Ga(e),ir(t,e,Ro(t[e],t))})),t}));function eh(t){return function(){return t}}var nh=Gi(),rh=Gi(!0);function ih(t){return t}function ah(t){return Dr("function"==typeof t?t:sr(t,1))}var oh=Vr((function(t,e){return function(n){return Tr(n,t,e)}})),sh=Vr((function(t,e){return function(n){return Tr(t,n,e)}}));function hh(t,e,n){var r=Es(e),i=xr(e,r);null!=n||es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Es(e)));var a=!(es(n)&&"chain"in n&&!n.chain),o=Qo(t);return _e(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i=n.__actions__=Oi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Pe([this.value()],arguments))})})),t}function uh(){}var lh=zi(Ce),ch=zi(xe),fh=zi(Te);function dh(t){return ma(t)?Ge(Ga(t)):function(t){return function(e){return wr(e,t)}}(t)}var gh=Ui(),ph=Ui(!0);function vh(){return[]}function yh(){return!1}var mh,_h=Bi((function(t,e){return t+e}),0),bh=qi("ceil"),xh=Bi((function(t,e){return t/e}),1),wh=qi("floor"),Sh=Bi((function(t,e){return t*e}),1),kh=qi("round"),Ch=Bi((function(t,e){return t-e}),0);return Fn.after=function(t,e){if("function"!=typeof e)throw new Ot(a);return t=ps(t),function(){if(--t<1)return e.apply(this,arguments)}},Fn.ary=Ao,Fn.assign=bs,Fn.assignIn=xs,Fn.assignInWith=ws,Fn.assignWith=Ss,Fn.at=ks,Fn.before=To,Fn.bind=Ro,Fn.bindAll=th,Fn.bindKey=Lo,Fn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Yo(t)?t:[t]},Fn.chain=fo,Fn.chunk=function(t,e,n){e=(n?ya(t,e,n):e===i)?1:yn(ps(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var o=0,s=0,h=r(ln(a/e));o<a;)h[s++]=ei(t,o,o+=e);return h},Fn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},Fn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Pe(Yo(n)?Oi(n):[n],vr(e,1))},Fn.cond=function(t){var e=null==t?0:t.length,n=oa();return t=e?Ce(t,(function(t){if("function"!=typeof t[1])throw new Ot(a);return[n(t[0]),t[1]]})):[],Vr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ye(i[0],this,n))return ye(i[1],this,n)}}))},Fn.conforms=function(t){return function(t){var e=Es(t);return function(n){return hr(n,t,e)}}(sr(t,1))},Fn.constant=eh,Fn.countBy=vo,Fn.create=function(t,e){var n=Bn(t);return null==e?n:rr(n,e)},Fn.curry=function t(e,n,r){var a=Ki(e,8,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},Fn.curryRight=function t(e,n,r){var a=Ki(e,16,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},Fn.debounce=Eo,Fn.defaults=Cs,Fn.defaultsDeep=Ps,Fn.defer=Mo,Fn.delay=Do,Fn.difference=Ba,Fn.differenceBy=za,Fn.differenceWith=Wa,Fn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:ps(e))<0?0:e,r):[]},Fn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:ps(e)))<0?0:e):[]},Fn.dropRightWhile=function(t,e){return t&&t.length?ci(t,oa(e,3),!0,!0):[]},Fn.dropWhile=function(t,e){return t&&t.length?ci(t,oa(e,3),!0):[]},Fn.fill=function(t,e,n,r){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&ya(t,e,n)&&(n=0,r=a),function(t,e,n,r){var a=t.length;for((n=ps(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ps(r))<0&&(r+=a),r=n>r?0:vs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Fn.filter=function(t,e){return(Yo(t)?we:pr)(t,oa(e,3))},Fn.flatMap=function(t,e){return vr(ko(t,e),1)},Fn.flatMapDeep=function(t,e){return vr(ko(t,e),l)},Fn.flatMapDepth=function(t,e,n){return n=n===i?1:ps(n),vr(ko(t,e),n)},Fn.flatten=Ya,Fn.flattenDeep=function(t){return null!=t&&t.length?vr(t,l):[]},Fn.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===i?1:ps(e)):[]},Fn.flip=function(t){return Ki(t,512)},Fn.flow=nh,Fn.flowRight=rh,Fn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Fn.functions=function(t){return null==t?[]:xr(t,Es(t))},Fn.functionsIn=function(t){return null==t?[]:xr(t,Ms(t))},Fn.groupBy=xo,Fn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Fn.intersection=Xa,Fn.intersectionBy=Va,Fn.intersectionWith=Ka,Fn.invert=Ts,Fn.invertBy=Rs,Fn.invokeMap=wo,Fn.iteratee=ah,Fn.keyBy=So,Fn.keys=Es,Fn.keysIn=Ms,Fn.map=ko,Fn.mapKeys=function(t,e){var n={};return e=oa(e,3),_r(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Fn.mapValues=function(t,e){var n={};return e=oa(e,3),_r(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Fn.matches=function(t){return Nr(sr(t,1))},Fn.matchesProperty=function(t,e){return Fr(t,sr(e,1))},Fn.memoize=Io,Fn.merge=Ds,Fn.mergeWith=Is,Fn.method=oh,Fn.methodOf=sh,Fn.mixin=hh,Fn.negate=jo,Fn.nthArg=function(t){return t=ps(t),Vr((function(e){return zr(e,t)}))},Fn.omit=js,Fn.omitBy=function(t,e){return Ns(t,jo(oa(e)))},Fn.once=function(t){return To(2,t)},Fn.orderBy=function(t,e,n,r){return null==t?[]:(Yo(e)||(e=null==e?[]:[e]),Yo(n=r?i:n)||(n=null==n?[]:[n]),Wr(t,e,n))},Fn.over=lh,Fn.overArgs=Go,Fn.overEvery=ch,Fn.overSome=fh,Fn.partial=No,Fn.partialRight=Fo,Fn.partition=Co,Fn.pick=Gs,Fn.pickBy=Ns,Fn.property=dh,Fn.propertyOf=function(t){return function(e){return null==t?i:wr(t,e)}},Fn.pull=Ja,Fn.pullAll=Qa,Fn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,oa(n,2)):t},Fn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},Fn.pullAt=Za,Fn.range=gh,Fn.rangeRight=ph,Fn.rearg=Bo,Fn.reject=function(t,e){return(Yo(t)?we:pr)(t,jo(oa(e,3)))},Fn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=oa(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Yr(t,i),n},Fn.rest=function(t,e){if("function"!=typeof t)throw new Ot(a);return Vr(t,e=e===i?e:ps(e))},Fn.reverse=to,Fn.sampleSize=function(t,e,n){return e=(n?ya(t,e,n):e===i)?1:ps(e),(Yo(t)?Jn:$r)(t,e)},Fn.set=function(t,e,n){return null==t?t:Jr(t,e,n)},Fn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Jr(t,e,n,r)},Fn.shuffle=function(t){return(Yo(t)?Qn:ti)(t)},Fn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ya(t,e,n)?(e=0,n=r):(e=null==e?0:ps(e),n=n===i?r:ps(n)),ei(t,e,n)):[]},Fn.sortBy=Po,Fn.sortedUniq=function(t){return t&&t.length?ai(t):[]},Fn.sortedUniqBy=function(t,e){return t&&t.length?ai(t,oa(e,2)):[]},Fn.split=function(t,e,n){return n&&"number"!=typeof n&&ya(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=_s(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=si(e))&&Qe(t)?_i(on(t),0,n):t.split(e,n):[]},Fn.spread=function(t,e){if("function"!=typeof t)throw new Ot(a);return e=null==e?0:yn(ps(e),0),Vr((function(n){var r=n[e],i=_i(n,0,e);return r&&Pe(i,r),ye(t,this,i)}))},Fn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Fn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:ps(e))<0?0:e):[]},Fn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:ps(e)))<0?0:e,r):[]},Fn.takeRightWhile=function(t,e){return t&&t.length?ci(t,oa(e,3),!1,!0):[]},Fn.takeWhile=function(t,e){return t&&t.length?ci(t,oa(e,3)):[]},Fn.tap=function(t,e){return e(t),t},Fn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ot(a);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Eo(t,e,{leading:r,maxWait:e,trailing:i})},Fn.thru=go,Fn.toArray=ds,Fn.toPairs=Fs,Fn.toPairsIn=Bs,Fn.toPath=function(t){return Yo(t)?Ce(t,Ga):us(t)?[t]:Oi(ja(_s(t)))},Fn.toPlainObject=ms,Fn.transform=function(t,e,n){var r=Yo(t),i=r||Ko(t)||ls(t);if(e=oa(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:es(t)&&Qo(a)?Bn(qt(t)):{}}return(i?_e:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},Fn.unary=function(t){return Ao(t,1)},Fn.union=eo,Fn.unionBy=no,Fn.unionWith=ro,Fn.uniq=function(t){return t&&t.length?hi(t):[]},Fn.uniqBy=function(t,e){return t&&t.length?hi(t,oa(e,2)):[]},Fn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?hi(t,i,e):[]},Fn.unset=function(t,e){return null==t||ui(t,e)},Fn.unzip=io,Fn.unzipWith=ao,Fn.update=function(t,e,n){return null==t?t:li(t,e,vi(n))},Fn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,vi(n),r)},Fn.values=zs,Fn.valuesIn=function(t){return null==t?[]:He(t,Ms(t))},Fn.without=oo,Fn.words=Qs,Fn.wrap=function(t,e){return No(vi(e),t)},Fn.xor=so,Fn.xorBy=ho,Fn.xorWith=uo,Fn.zip=lo,Fn.zipObject=function(t,e){return gi(t||[],e||[],tr)},Fn.zipObjectDeep=function(t,e){return gi(t||[],e||[],Jr)},Fn.zipWith=co,Fn.entries=Fs,Fn.entriesIn=Bs,Fn.extend=xs,Fn.extendWith=ws,hh(Fn,Fn),Fn.add=_h,Fn.attempt=Zs,Fn.camelCase=Ws,Fn.capitalize=Us,Fn.ceil=bh,Fn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ys(n))==n?n:0),e!==i&&(e=(e=ys(e))==e?e:0),or(ys(t),e,n)},Fn.clone=function(t){return sr(t,4)},Fn.cloneDeep=function(t){return sr(t,5)},Fn.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:i)},Fn.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:i)},Fn.conformsTo=function(t,e){return null==e||hr(t,e,Es(e))},Fn.deburr=Hs,Fn.defaultTo=function(t,e){return null==t||t!=t?e:t},Fn.divide=xh,Fn.endsWith=function(t,e,n){t=_s(t),e=si(e);var r=t.length,a=n=n===i?r:or(ps(n),0,r);return(n-=e.length)>=0&&t.slice(n,a)==e},Fn.eq=zo,Fn.escape=function(t){return(t=_s(t))&&V.test(t)?t.replace(q,$e):t},Fn.escapeRegExp=function(t){return(t=_s(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Fn.every=function(t,e,n){var r=Yo(t)?xe:dr;return n&&ya(t,e,n)&&(e=i),r(t,oa(e,3))},Fn.find=yo,Fn.findIndex=Ua,Fn.findKey=function(t,e){return Le(t,oa(e,3),_r)},Fn.findLast=mo,Fn.findLastIndex=Ha,Fn.findLastKey=function(t,e){return Le(t,oa(e,3),br)},Fn.floor=wh,Fn.forEach=_o,Fn.forEachRight=bo,Fn.forIn=function(t,e){return null==t?t:yr(t,oa(e,3),Ms)},Fn.forInRight=function(t,e){return null==t?t:mr(t,oa(e,3),Ms)},Fn.forOwn=function(t,e){return t&&_r(t,oa(e,3))},Fn.forOwnRight=function(t,e){return t&&br(t,oa(e,3))},Fn.get=Os,Fn.gt=Wo,Fn.gte=Uo,Fn.has=function(t,e){return null!=t&&da(t,e,Pr)},Fn.hasIn=As,Fn.head=qa,Fn.identity=ih,Fn.includes=function(t,e,n,r){t=Xo(t)?t:zs(t),n=n&&!r?ps(n):0;var i=t.length;return n<0&&(n=yn(i+n,0)),hs(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Me(t,e,n)>-1},Fn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=yn(r+i,0)),Me(t,e,i)},Fn.inRange=function(t,e,n){return e=gs(e),n===i?(n=e,e=0):n=gs(n),function(t,e,n){return t>=mn(e,n)&&t<yn(e,n)}(t=ys(t),e,n)},Fn.invoke=Ls,Fn.isArguments=Ho,Fn.isArray=Yo,Fn.isArrayBuffer=qo,Fn.isArrayLike=Xo,Fn.isArrayLikeObject=Vo,Fn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&kr(t)==y},Fn.isBuffer=Ko,Fn.isDate=$o,Fn.isElement=function(t){return ns(t)&&1===t.nodeType&&!as(t)},Fn.isEmpty=function(t){if(null==t)return!0;if(Xo(t)&&(Yo(t)||"string"==typeof t||"function"==typeof t.splice||Ko(t)||ls(t)||Ho(t)))return!t.length;var e=fa(t);if(e==w||e==O)return!t.size;if(xa(t))return!Ir(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Fn.isEqual=function(t,e){return Lr(t,e)},Fn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Lr(t,e,i,n):!!r},Fn.isError=Jo,Fn.isFinite=function(t){return"number"==typeof t&&gn(t)},Fn.isFunction=Qo,Fn.isInteger=Zo,Fn.isLength=ts,Fn.isMap=rs,Fn.isMatch=function(t,e){return t===e||Er(t,e,ha(e))},Fn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Er(t,e,ha(e),n)},Fn.isNaN=function(t){return is(t)&&t!=+t},Fn.isNative=function(t){if(ba(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},Fn.isNil=function(t){return null==t},Fn.isNull=function(t){return null===t},Fn.isNumber=is,Fn.isObject=es,Fn.isObjectLike=ns,Fn.isPlainObject=as,Fn.isRegExp=os,Fn.isSafeInteger=function(t){return Zo(t)&&t>=-9007199254740991&&t<=c},Fn.isSet=ss,Fn.isString=hs,Fn.isSymbol=us,Fn.isTypedArray=ls,Fn.isUndefined=function(t){return t===i},Fn.isWeakMap=function(t){return ns(t)&&fa(t)==R},Fn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==kr(t)},Fn.join=function(t,e){return null==t?"":pn.call(t,e)},Fn.kebabCase=Ys,Fn.last=$a,Fn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ps(n))<0?yn(r+a,0):mn(a,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):Ee(t,Ie,a,!0)},Fn.lowerCase=qs,Fn.lowerFirst=Xs,Fn.lt=cs,Fn.lte=fs,Fn.max=function(t){return t&&t.length?gr(t,ih,Cr):i},Fn.maxBy=function(t,e){return t&&t.length?gr(t,oa(e,2),Cr):i},Fn.mean=function(t){return je(t,ih)},Fn.meanBy=function(t,e){return je(t,oa(e,2))},Fn.min=function(t){return t&&t.length?gr(t,ih,jr):i},Fn.minBy=function(t,e){return t&&t.length?gr(t,oa(e,2),jr):i},Fn.stubArray=vh,Fn.stubFalse=yh,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Sh,Fn.nth=function(t,e){return t&&t.length?zr(t,ps(e)):i},Fn.noConflict=function(){return ae._===this&&(ae._=Nt),this},Fn.noop=uh,Fn.now=Oo,Fn.pad=function(t,e,n){t=_s(t);var r=(e=ps(e))?an(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Wi(cn(i),n)+t+Wi(ln(i),n)},Fn.padEnd=function(t,e,n){t=_s(t);var r=(e=ps(e))?an(t):0;return e&&r<e?t+Wi(e-r,n):t},Fn.padStart=function(t,e,n){t=_s(t);var r=(e=ps(e))?an(t):0;return e&&r<e?Wi(e-r,n)+t:t},Fn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(_s(t).replace(rt,""),e||0)},Fn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ya(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=gs(t),e===i?(e=t,t=0):e=gs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var a=xn();return mn(t+a*(e-t+ee("1e-"+((a+"").length-1))),e)}return qr(t,e)},Fn.reduce=function(t,e,n){var r=Yo(t)?Oe:Fe,i=arguments.length<3;return r(t,oa(e,4),n,i,cr)},Fn.reduceRight=function(t,e,n){var r=Yo(t)?Ae:Fe,i=arguments.length<3;return r(t,oa(e,4),n,i,fr)},Fn.repeat=function(t,e,n){return e=(n?ya(t,e,n):e===i)?1:ps(e),Xr(_s(t),e)},Fn.replace=function(){var t=arguments,e=_s(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Fn.result=function(t,e,n){var r=-1,a=(e=yi(e,t)).length;for(a||(a=1,t=i);++r<a;){var o=null==t?i:t[Ga(e[r])];o===i&&(r=a,o=n),t=Qo(o)?o.call(t):o}return t},Fn.round=kh,Fn.runInContext=t,Fn.sample=function(t){return(Yo(t)?$n:Kr)(t)},Fn.size=function(t){if(null==t)return 0;if(Xo(t))return hs(t)?an(t):t.length;var e=fa(t);return e==w||e==O?t.size:Ir(t).length},Fn.snakeCase=Vs,Fn.some=function(t,e,n){var r=Yo(t)?Te:ni;return n&&ya(t,e,n)&&(e=i),r(t,oa(e,3))},Fn.sortedIndex=function(t,e){return ri(t,e)},Fn.sortedIndexBy=function(t,e,n){return ii(t,e,oa(n,2))},Fn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&zo(t[r],e))return r}return-1},Fn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Fn.sortedLastIndexBy=function(t,e,n){return ii(t,e,oa(n,2),!0)},Fn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(zo(t[n],e))return n}return-1},Fn.startCase=Ks,Fn.startsWith=function(t,e,n){return t=_s(t),n=null==n?0:or(ps(n),0,t.length),e=si(e),t.slice(n,n+e.length)==e},Fn.subtract=Ch,Fn.sum=function(t){return t&&t.length?Be(t,ih):0},Fn.sumBy=function(t,e){return t&&t.length?Be(t,oa(e,2)):0},Fn.template=function(t,e,n){var r=Fn.templateSettings;n&&ya(t,e,n)&&(e=i),t=_s(t),e=ws({},e,r,$i);var a,o,s=ws({},e.imports,r.imports,$i),h=Es(s),u=He(s,h),l=0,c=e.interpolate||_t,f="__p += '",d=Ct((e.escape||_t).source+"|"+c.source+"|"+(c===J?ct:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),g="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jt+"]")+"\n";t.replace(d,(function(e,n,r,i,s,h){return r||(r=i),f+=t.slice(l,h).replace(bt,Je),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=h+e.length,e})),f+="';\n";var p=Mt.call(e,"variable")&&e.variable;if(p){if(ut.test(p))throw new xt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(W,""):f).replace(U,"$1").replace(H,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Zs((function(){return wt(h,g+"return "+f).apply(i,u)}));if(v.source=f,Jo(v))throw v;return v},Fn.times=function(t,e){if((t=ps(t))<1||t>c)return[];var n=d,r=mn(t,d);e=oa(e),t-=d;for(var i=ze(r,e);++n<t;)e(n);return i},Fn.toFinite=gs,Fn.toInteger=ps,Fn.toLength=vs,Fn.toLower=function(t){return _s(t).toLowerCase()},Fn.toNumber=ys,Fn.toSafeInteger=function(t){return t?or(ps(t),-9007199254740991,c):0===t?t:0},Fn.toString=_s,Fn.toUpper=function(t){return _s(t).toUpperCase()},Fn.trim=function(t,e,n){if((t=_s(t))&&(n||e===i))return We(t);if(!t||!(e=si(e)))return t;var r=on(t),a=on(e);return _i(r,qe(r,a),Xe(r,a)+1).join("")},Fn.trimEnd=function(t,e,n){if((t=_s(t))&&(n||e===i))return t.slice(0,sn(t)+1);if(!t||!(e=si(e)))return t;var r=on(t);return _i(r,0,Xe(r,on(e))+1).join("")},Fn.trimStart=function(t,e,n){if((t=_s(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=si(e)))return t;var r=on(t);return _i(r,qe(r,on(e))).join("")},Fn.truncate=function(t,e){var n=30,r="...";if(es(e)){var a="separator"in e?e.separator:a;n="length"in e?ps(e.length):n,r="omission"in e?si(e.omission):r}var o=(t=_s(t)).length;if(Qe(t)){var s=on(t);o=s.length}if(n>=o)return t;var h=n-an(r);if(h<1)return r;var u=s?_i(s,0,h).join(""):t.slice(0,h);if(a===i)return u+r;if(s&&(h+=u.length-h),os(a)){if(t.slice(h).search(a)){var l,c=u;for(a.global||(a=Ct(a.source,_s(ft.exec(a))+"g")),a.lastIndex=0;l=a.exec(c);)var f=l.index;u=u.slice(0,f===i?h:f)}}else if(t.indexOf(si(a),h)!=h){var d=u.lastIndexOf(a);d>-1&&(u=u.slice(0,d))}return u+r},Fn.unescape=function(t){return(t=_s(t))&&X.test(t)?t.replace(Y,hn):t},Fn.uniqueId=function(t){var e=++Dt;return _s(t)+e},Fn.upperCase=$s,Fn.upperFirst=Js,Fn.each=_o,Fn.eachRight=bo,Fn.first=qa,hh(Fn,(mh={},_r(Fn,(function(t,e){Mt.call(Fn.prototype,e)||(mh[e]=t)})),mh),{chain:!1}),Fn.VERSION="4.17.21",_e(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Fn[t].placeholder=Fn})),_e(["drop","take"],(function(t,e){Un.prototype[t]=function(n){n=n===i?1:yn(ps(n),0);var r=this.__filtered__&&!e?new Un(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Un.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),_e(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Un.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oa(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),_e(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Un.prototype[t]=function(){return this[n](1).value()[0]}})),_e(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Un.prototype[t]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(ih)},Un.prototype.find=function(t){return this.filter(t).head()},Un.prototype.findLast=function(t){return this.reverse().find(t)},Un.prototype.invokeMap=Vr((function(t,e){return"function"==typeof t?new Un(this):this.map((function(n){return Tr(n,t,e)}))})),Un.prototype.reject=function(t){return this.filter(jo(oa(t)))},Un.prototype.slice=function(t,e){t=ps(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Un(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ps(e))<0?n.dropRight(-e):n.take(e-t)),n)},Un.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Un.prototype.toArray=function(){return this.take(d)},_r(Un.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=Fn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);a&&(Fn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,h=e instanceof Un,u=s[0],l=h||Yo(e),c=function(t){var e=a.apply(Fn,Pe([t],s));return r&&f?e[0]:e};l&&n&&"function"==typeof u&&1!=u.length&&(h=l=!1);var f=this.__chain__,d=!!this.__actions__.length,g=o&&!f,p=h&&!d;if(!o&&l){e=p?e:new Un(this);var v=t.apply(e,s);return v.__actions__.push({func:go,args:[c],thisArg:i}),new Wn(v,f)}return g&&p?t.apply(this,s):(v=this.thru(c),g?r?v.value()[0]:v.value():v)})})),_e(["pop","push","shift","sort","splice","unshift"],(function(t){var e=At[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Fn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Yo(i)?i:[],t)}return this[n]((function(n){return e.apply(Yo(n)?n:[],t)}))}})),_r(Un.prototype,(function(t,e){var n=Fn[e];if(n){var r=n.name+"";Mt.call(Rn,r)||(Rn[r]=[]),Rn[r].push({name:e,func:n})}})),Rn[Ni(i,2).name]=[{name:"wrapper",func:i}],Un.prototype.clone=function(){var t=new Un(this.__wrapped__);return t.__actions__=Oi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Oi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Oi(this.__views__),t},Un.prototype.reverse=function(){if(this.__filtered__){var t=new Un(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Un.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Yo(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=mn(e,t+o);break;case"takeRight":t=yn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,h=s-o,u=r?s:o-1,l=this.__iteratees__,c=l.length,f=0,d=mn(h,this.__takeCount__);if(!n||!r&&i==h&&d==h)return fi(t,this.__actions__);var g=[];t:for(;h--&&f<d;){for(var p=-1,v=t[u+=e];++p<c;){var y=l[p],m=y.iteratee,_=y.type,b=m(v);if(2==_)v=b;else if(!b){if(1==_)continue t;break t}}g[f++]=v}return g},Fn.prototype.at=po,Fn.prototype.chain=function(){return fo(this)},Fn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===i&&(this.__values__=ds(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Fn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=Fa(n);r.__index__=0,r.__values__=i,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e},Fn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Un){var e=t;return this.__actions__.length&&(e=new Un(this)),(e=e.reverse()).__actions__.push({func:go,args:[to],thisArg:i}),new Wn(e,this.__chain__)}return this.thru(to)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,oe&&(Fn.prototype[oe]=function(){return this}),Fn}();ae._=un,(r=function(){return un}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},655:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__assign:()=>a,__asyncDelegator:()=>x,__asyncGenerator:()=>b,__asyncValues:()=>w,__await:()=>_,__awaiter:()=>l,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>A,__createBinding:()=>f,__decorate:()=>s,__exportStar:()=>d,__extends:()=>i,__generator:()=>c,__importDefault:()=>P,__importStar:()=>C,__makeTemplateObject:()=>S,__metadata:()=>u,__param:()=>h,__read:()=>p,__rest:()=>o,__spread:()=>v,__spreadArray:()=>m,__spreadArrays:()=>y,__values:()=>g});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function h(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{h(r.next(t))}catch(t){a(t)}}function s(t){try{h(r.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}h((r=r.apply(t,e||[])).next())}))}function c(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function g(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function m(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){a.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof _?Promise.resolve(n.value.v).then(h,u):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function h(t){s("next",t)}function u(t){s("throw",t)}function l(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}}function x(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:_(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=g(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var k=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return k(e,t),e}function P(t){return t&&t.__esModule?t:{default:t}}function O(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function A(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},4920:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>an});var r=Math.PI/180;const i="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},a={_global:i,version:"8.3.5",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:t=>a.angleDeg?t*r:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>a.DD.isDragging,isDragReady:()=>!!a.DD.node,document:i.document,_injectGlobal(t){i.Konva=t}},o=t=>{a[t.prototype.getClassName()]=t};a._injectGlobal(a);class s{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new s(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,a=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){var n=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=a,this}multiply(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,r=-this.m[2]*t,i=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}setAbsolutePosition(t,e){var n=this.m[0],r=this.m[1],i=this.m[2],a=this.m[3],o=this.m[4],s=(n*(e-this.m[5])-r*(t-o))/(n*a-r*i),h=(t-o-i*s)/n;return this.translate(h,s)}decompose(){var t=this.m[0],e=this.m[1],n=this.m[2],r=this.m[3],i=t*r-e*n;let a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=e){var o=Math.sqrt(t*t+e*e);a.rotation=e>0?Math.acos(t/o):-Math.acos(t/o),a.scaleX=o,a.scaleY=i/o,a.skewX=(t*n+e*r)/i,a.skewY=0}else if(0!=n||0!=r){var s=Math.sqrt(n*n+r*r);a.rotation=Math.PI/2-(r>0?Math.acos(-n/s):-Math.acos(n/s)),a.scaleX=i/s,a.scaleY=s,a.skewX=0,a.skewY=(t*n+e*r)/i}return a.rotation=p._getRotation(a.rotation),a}}var h=Math.PI/180,u=180/Math.PI,l="Konva error: ",c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},f=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,d=[];const g="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)},p={_isElement:t=>!(!t||1!=t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t||t>0?1:-1,requestAnimFrame(t){d.push(t),1===d.length&&g((function(){const t=d;d=[],t.forEach((function(t){t()}))}))},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=p.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex:(t,e,n)=>((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1),_hexToRgb(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB(t){var e;return t in c?{r:(e=c[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=f.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",p._namedColorToRBA(t)||p._hex3ColorToRGBA(t)||p._hex6ColorToRGBA(t)||p._rgbColorToRGBA(t)||p._rgbaColorToRGBA(t)||p._hslColorToRGBA(t)),_namedColorToRBA(t){var e=c[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,a=Number(n[2])/100;let o,s,h;if(0===i)return h=255*a,{r:Math.round(h),g:Math.round(h),b:Math.round(h),a:1};o=a<.5?a*(1+i):a+i-a*i;const u=2*a-o,l=[0,0,0];for(let t=0;t<3;t++)s=r+1/3*-(t-1),s<0&&s++,s>1&&s--,h=6*s<1?u+6*(o-u)*s:2*s<1?o:3*s<2?u+(o-u)*(2/3-s)*6:u,l[t]=255*h;return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*h,radToDeg:t=>t*u,_degToRad:t=>(p.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),p.degToRad(t)),_radToDeg:t=>(p.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),p.radToDeg(t)),_getRotation:t=>a.angleDeg?p.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw new Error(l+t)},error(t){console.error(l+t)},warn(t){a.showWarnings&&console.warn("Konva warning: "+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange:(t,e,n)=>e<=t&&t<n,_getProjectionToSegment(t,e,n,r,i,a){var o,s,h,u=(t-n)*(t-n)+(e-r)*(e-r);if(0==u)o=t,s=e,h=(i-n)*(i-n)+(a-r)*(a-r);else{var l=((i-t)*(n-t)+(a-e)*(r-e))/u;l<0?(o=t,s=e,h=(t-i)*(t-i)+(e-a)*(e-a)):l>1?(o=n,s=r,h=(n-i)*(n-i)+(r-a)*(r-a)):h=((o=t+l*(n-t))-i)*(o-i)+((s=e+l*(r-e))-a)*(s-a)}return[o,s,h]},_getProjectionToLine(t,e,n){var r=p.cloneObject(t),i=Number.MAX_VALUE;return e.forEach((function(a,o){if(n||o!==e.length-1){var s=e[(o+1)%e.length],h=p._getProjectionToSegment(a.x,a.y,s.x,s.y,t.x,t.y),u=h[0],l=h[1],c=h[2];c<i&&(r.x=u,r.y=l,i=c)}})),r},_prepareArrayForTween(t,e,n){var r,i=[],a=[];if(t.length>e.length){var o=e;e=t,t=o}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)a.push({x:e[r],y:e[r+1]});var s=[];return a.forEach((function(t){var e=p._getProjectionToLine(t,i,n);s.push(e.x),s.push(e.y)})),s},_prepareToStringify(t){var e;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||p._isElement(t[n])){if(!e.configurable)return null;delete t[n]}else if(null===p._prepareToStringify(t[n])){if(!e.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:t.pointerId||999};function v(t){return p._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||p._isBoolean(t)?t:Object.prototype.toString.call(t)}function y(t){return t>255?255:t<0?0:Math.round(t)}function m(){if(a.isUnminified)return function(t,e){return p._isNumber(t)||p.warn(v(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function _(t){if(a.isUnminified)return function(e,n){let r=p._isNumber(e),i=p._isArray(e)&&e.length==t;return r||i||p.warn(v(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function b(){if(a.isUnminified)return function(t,e){return p._isNumber(t)||"auto"===t||p.warn(v(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function x(){if(a.isUnminified)return function(t,e){return p._isString(t)||p.warn(v(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function w(){if(a.isUnminified)return function(t,e){const n=p._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return n||r||p.warn(v(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function S(){if(a.isUnminified)return function(t,e){return!0===t||!1===t||p.warn(v(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}var k="get",C="set";const P={addGetterSetter(t,e,n,r,i){P.addGetter(t,e,n),P.addSetter(t,e,r,i),P.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=k+p._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter(t,e,n,r){var i=C+p._capitalize(e);t.prototype[i]||P.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=C+p._capitalize(e);t.prototype[i]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var o,s,h=n.length,u=p._capitalize,l=k+u(e),c=C+u(e);t.prototype[l]=function(){var t={};for(o=0;o<h;o++)t[s=n[o]]=this.getAttr(e+u(s));return t};var f=function(t){if(a.isUnminified)return function(e,n){return p.isObject(e)||p.warn(v(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(n);t.prototype[c]=function(t){var n,a=this.attrs[e];for(n in r&&(t=r.call(this,t)),f&&f.call(this,t,e),t)t.hasOwnProperty(n)&&this._setAttr(e+u(n),t[n]);return this._fireChangeEvent(e,a,t),i&&i.call(this),this},P.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=p._capitalize(e),r=C+n,i=k+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){p.error("Adding deprecated "+e);var i=k+p._capitalize(e),a=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){p.error(a);var t=this.attrs[e];return void 0===t?n:t},P.addSetter(t,e,r,(function(){p.error(a)})),P.addOverloadedGetterSetter(t,e)},backCompat(t,e){p.each(e,(function(e,n){var r=t.prototype[n],i=k+p._capitalize(e),a=C+p._capitalize(e);function o(){r.apply(this,arguments),p.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=o,t.prototype[i]=o,t.prototype[a]=o}))},afterSetFilter(){this._filterUpToDate=!1}};function O(t){var e,n,r=[],i=t.length,a=p;for(e=0;e<i;e++)n=t[e],a._isNumber(n)?n=Math.round(1e3*n)/1e3:a._isString(n)||(n+=""),r.push(n);return r}var A,T=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class R{constructor(t){this.canvas=t,this._context=t._canvas.getContext("2d"),a.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){var n,r,i,a,o=this.traceArr,s=o.length,h="";for(n=0;n<s;n++)(i=(r=o[n]).method)?(a=r.args,h+=i,t?h+="()":p._isArray(a[0])?h+="(["+a.join(",")+"])":(e&&(a=a.map((t=>"number"==typeof t?Math.floor(t):t))),h+="("+a.join(",")+")")):(h+=r.property,t||(h+="="+r.val)),h+=";";return h}clearTrace(){this.traceArr=[]}_trace(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)}_applyOpacity(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,n,r,i,a){this._context.arc(t,e,n,r,i,a)}arcTo(t,e,n,r,i){this._context.arcTo(t,e,n,r,i)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,n,r,i,a){this._context.bezierCurveTo(t,e,n,r,i,a)}clearRect(t,e,n,r){this._context.clearRect(t,e,n,r)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,n,r){return this._context.createLinearGradient(t,e,n,r)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,n,r,i,a){return this._context.createRadialGradient(t,e,n,r,i,a)}drawImage(t,e,n,r,i,a,o,s,h){var u=arguments,l=this._context;3===u.length?l.drawImage(t,e,n):5===u.length?l.drawImage(t,e,n,r,i):9===u.length&&l.drawImage(t,e,n,r,i,a,o,s,h)}ellipse(t,e,n,r,i,a,o,s){this._context.ellipse(t,e,n,r,i,a,o,s)}isPointInPath(t,e){return this._context.isPointInPath(t,e)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,e,n,r){this._context.fillRect(t,e,n,r)}strokeRect(t,e,n,r){this._context.strokeRect(t,e,n,r)}fillText(t,e,n,r){r?this._context.fillText(t,e,n,r):this._context.fillText(t,e,n)}measureText(t){return this._context.measureText(t)}getImageData(t,e,n,r){return this._context.getImageData(t,e,n,r)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,n,r){this._context.rect(t,e,n,r)}putImageData(t,e,n){this._context.putImageData(t,e,n)}quadraticCurveTo(t,e,n,r){this._context.quadraticCurveTo(t,e,n,r)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,n,r,i,a){this._context.setTransform(t,e,n,r,i,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,n,r){this._context.strokeText(t,e,n,r)}transform(t,e,n,r,i,a){this._context.transform(t,e,n,r,i,a)}translate(t,e){this._context.translate(t,e)}_enableTrace(){var t,e,n=this,r=T.length,i=this.setAttr,a=function(t){var r,i=n[t];n[t]=function(){return e=O(Array.prototype.slice.call(arguments,0)),r=i.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)a(T[t]);n.setAttr=function(){i.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(R.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})}));class L extends R{_fillColor(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var r=t.getFillPatternImage();if(r&&"pattern"===n)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)this._fillLinearGradient(t);else{var a=t.getFillRadialGradientColorStops();a&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):i?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}}}}_strokeLinearGradient(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var a=0;a<r.length;a+=2)i.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",i)}}_stroke(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var e,n,r,i=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",a=null!==(n=t.getShadowBlur())&&void 0!==n?n:5,o=null!==(r=t.getShadowOffset())&&void 0!==r?r:{x:0,y:0},s=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),u=s.x*h,l=s.y*h;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",a*Math.min(Math.abs(u),Math.abs(l))),this.setAttr("shadowOffsetX",o.x*u),this.setAttr("shadowOffsetY",o.y*l)}}class E extends R{_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}class M{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||a.pixelRatio||function(){if(A)return A;var t=p.createCanvasElement().getContext("2d");return A=(a._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=p.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return p.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}P.addGetterSetter(M,"pixelRatio",void 0,m());class D extends M{constructor(t={width:0,height:0}){super(t),this.context=new L(this),this.setSize(t.width,t.height)}}class I extends M{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new E(this),this.setSize(t.width,t.height)}}const j={get isDragging(){var t=!1;return j._dragElements.forEach((e=>{"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return j._dragElements.forEach((e=>{t=e.node})),t},_dragElements:new Map,_drag(t){const e=[];j._dragElements.forEach(((n,r)=>{const{node:i}=n,a=i.getStage();a.setPointersPositions(t),void 0===n.pointerId&&(n.pointerId=p._getFirstPointerId(t));const o=a._changedPointerPositions.find((t=>t.id===n.pointerId));if(o){if("dragging"!==n.dragStatus){var s=i.dragDistance();if(Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y))<s)return;if(i.startDrag({evt:t}),!i.isDragging())return}i._setDragPosition(t,n),e.push(i)}})),e.forEach((e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore(t){j._dragElements.forEach((e=>{const{node:n}=e,r=n.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find((t=>t.id===e.pointerId)))return;"dragging"!==e.dragStatus&&"stopped"!==e.dragStatus||(j.justDragged=!0,a._mouseListenClick=!1,a._touchListenClick=!1,a._pointerListenClick=!1,e.dragStatus="stopped");const i=e.node.getLayer()||e.node instanceof a.Stage&&e.node;i&&i.batchDraw()}))},_endDragAfter(t){j._dragElements.forEach(((e,n)=>{"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),"dragging"!==e.dragStatus&&j._dragElements.delete(n)}))}};a.isBrowser&&(window.addEventListener("mouseup",j._endDragBefore,!0),window.addEventListener("touchend",j._endDragBefore,!0),window.addEventListener("mousemove",j._drag),window.addEventListener("touchmove",j._drag),window.addEventListener("mouseup",j._endDragAfter,!1),window.addEventListener("touchend",j._endDragAfter,!1));var G="absoluteOpacity",N="allEventListeners",F="absoluteTransform",B="absoluteScale",z="canvas",W="listening",U="mouseenter",H="mouseleave",Y="Shape",q=" ",X="stage",V="transform",K="visible",$=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(q);let J=1;class Q{constructor(t){this._id=J++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==V&&t!==F||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){var n=this._cache.get(t);return(void 0===n||(t===V||t===F)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n}_calculate(t,e,n){if(!this._attachedDepsListeners.get(t)){const n=e.map((t=>t+"Change.konva")).join(q);this.on(n,(()=>{this._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(z)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===F&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(z),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(e.width||n.width),i=Math.ceil(e.height||n.height),a=e.pixelRatio,o=void 0===e.x?Math.floor(n.x):e.x,s=void 0===e.y?Math.floor(n.y):e.y,h=e.offset||0,u=e.drawBorder||!1,l=e.hitCanvasPixelRatio||1;if(r&&i){o-=h,s-=h;var c=new D({pixelRatio:a,width:r+=2*h+1,height:i+=2*h+1}),f=new D({pixelRatio:a,width:0,height:0}),d=new I({pixelRatio:l,width:r,height:i}),g=c.getContext(),v=d.getContext();return d.isCache=!0,c.isCache=!0,this._cache.delete(z),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(c.getContext()._context.imageSmoothingEnabled=!1,f.getContext()._context.imageSmoothingEnabled=!1),g.save(),v.save(),g.translate(-o,-s),v.translate(-o,-s),this._isUnderCache=!0,this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(B),this.drawScene(c,this),this.drawHit(d,this),this._isUnderCache=!1,g.restore(),v.restore(),u&&(g.save(),g.beginPath(),g.rect(0,0,r,i),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set(z,{scene:c,filter:f,hit:d,x:o,y:s}),this._requestDraw(),this}p.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(z)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){var n,r,i,a,o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return o.forEach((function(t){var e=s.point(t);void 0===n&&(n=i=e.x,r=a=e.y),n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),a=Math.max(a,e.y)})),{x:n,y:r,width:i-n,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/r,n.height/r),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t,e,n,r,i=this.filters(),a=this._getCanvasCache(),o=a.scene,s=a.filter,h=s.getContext();if(i){if(!this._filterUpToDate){var u=o.pixelRatio;s.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=i.length,h.clear(),h.drawImage(o._canvas,0,0,o.getWidth()/u,o.getHeight()/u),e=h.getImageData(0,0,s.getWidth(),s.getHeight()),n=0;n<t;n++)"function"==typeof(r=i[n])?(r.call(this,e),h.putImageData(e,0,0)):p.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(t){p.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return o}on(t,e){if(this._cache&&this._cache.delete(N),3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,a,o=t.split(q),s=o.length;for(n=0;n<s;n++)i=(r=o[n].split("."))[0],a=r[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:a,handler:e});return this}off(t,e){var n,r,i,a,o,s=(t||"").split(q),h=s.length;if(this._cache&&this._cache.delete(N),!t)for(r in this.eventListeners)this._off(r);for(n=0;n<h;n++)if(a=(i=s[n].split("."))[0],o=i[1],a)this.eventListeners[a]&&this._off(a,o,e);else for(r in this.eventListeners)this._off(r,o,e);return this}dispatchEvent(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,n){var r=this;this.on(t,(function(t){for(var i=t.target.findAncestors(e,!0,r),a=0;a<i.length;a++)(t=p.cloneObject(t)).currentTarget=i[a],n.call(i[a],t)}))}remove(){return this.isDragging()&&this.stopDrag(),j._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(F),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(X),this._clearSelfAndDescendantCache(K),this._clearSelfAndDescendantCache(W)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(t){var e="get"+p._capitalize(t);return p._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges((()=>{var e,n;if(!t)return this;for(e in t)"children"!==e&&(n="set"+p._capitalize(e),p._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]))})),this}isListening(){return this._getCache(W,this._isListening)}_isListening(t){if(!this.listening())return!1;const e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(K,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),r=!1;j._dragElements.forEach((t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(r=!0)}));var i=!e&&!a.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t,e,n,r,i=this.getDepth(),a=this,o=0;return"Stage"!==a.nodeType&&function s(h){for(t=[],e=h.length,n=0;n<e;n++)r=h[n],o++,r.nodeType!==Y&&(t=t.concat(r.getChildren().slice())),r._id===a._id&&(n=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(a.getStage().getChildren()),o}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(V),this._clearSelfAndDescendantCache(F)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges((()=>{this.x(t.x),this.y(t.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)}getAbsolutePosition(t){let e=!1,n=this.parent;for(;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var r=this.getAbsoluteTransform(t).getMatrix(),i=new s,a=this.offset();return i.m=r.slice(),i.translate(a.x,a.y),i.getTranslation()}setAbsolutePosition(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(V);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(V),this._clearSelfAndDescendantCache(F),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,n=t.y,r=this.x(),i=this.y();return void 0!==e&&(r+=e),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this}_eachAncestorReverse(t,e){var n,r,i=[],a=this.getParent();if(!e||e._id!==this._id){for(i.unshift(this);a&&(!e||a._id!==e._id);)i.unshift(a),a=a.parent;for(n=i.length,r=0;r<n;r++)t(i[r])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return p.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return p.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return p.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return p.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return p.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&p.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(G,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t,e,n,r,i={},a=this.getAttrs();for(t in i.attrs={},a)e=a[t],p.isObject(e)&&!p._isPlainObject(e)&&!p._isArray(e)||(n="function"==typeof this[t]&&this[t],delete a[t],r=n?n.call(this):null,a[t]=e,r!==e&&(i.attrs[t]=e));return i.className=this.getClassName(),p._prepareToStringify(i)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,n){var r=[];e&&this._isMatch(t)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(t)&&r.push(i),i=i.parent}return r}isAncestorOf(t){return!1}findAncestor(t,e,n){return this.findAncestors(t,e,n)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,r=t.replace(/ /g,"").split(","),i=r.length;for(e=0;e<i;e++)if(n=r[e],p.isValidSelector(n)||(p.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),p.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),p.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(X,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():void 0}fire(t,e={},n){return e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(F,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var e;if(t)return e=new s,this._eachAncestorReverse((function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this._cache.get(F)||new s,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();if("all"===n)e.multiply(this.getTransform());else if("position"===n){const t=this.attrs.x||0,n=this.attrs.y||0,r=this.attrs.offsetX||0,i=this.attrs.offsetY||0;e.translate(t-r,n-i)}return e.dirty=!1,e}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(V,this._getTransform)}_getTransform(){var t,e,n=this._cache.get(V)||new s;n.reset();var r=this.x(),i=this.y(),o=a.getAngle(this.rotation()),h=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,u=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,l=this.attrs.skewX||0,c=this.attrs.skewY||0,f=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==o&&n.rotate(o),0===l&&0===c||n.skew(l,c),1===h&&1===u||n.scale(h,u),0===f&&0===d||n.translate(-1*f,-1*d),n.dirty=!1,n}clone(t){var e,n,r,i,a,o=p.cloneObject(this.attrs);for(e in t)o[e]=t[e];var s=new this.constructor(o);for(e in this.eventListeners)for(r=(n=this.eventListeners[e]).length,i=0;i<r;i++)(a=n[i]).name.indexOf("konva")<0&&(s.eventListeners[e]||(s.eventListeners[e]=[]),s.eventListeners[e].push(a));return s}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),r=void 0!==t.x?t.x:Math.floor(e.x),i=void 0!==t.y?t.y:Math.floor(e.y),a=t.pixelRatio||1,o=new D({width:t.width||Math.ceil(e.width)||(n?n.width():0),height:t.height||Math.ceil(e.height)||(n?n.height():0),pixelRatio:a}),s=o.getContext();return s.save(),(r||i)&&s.translate(-1*r,-1*i),this.drawScene(o),s.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(r),r}toImage(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,p._urlToImage(this.toDataURL(t),(function(t){e(t)}))}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.dragDistance}_off(t,e,n){var r,i,a,o=this.eventListeners[t];for(r=0;r<o.length;r++)if(i=o[r].name,a=o[r].handler,!("konva"===i&&"konva"!==e||e&&i!==e||n&&n!==a)){if(o.splice(r,1),0===o.length){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})}addName(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.name(e.join(" "))),this}setAttr(t,e){var n=this["set"+p._capitalize(t)];return p._isFunction(n)?n.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(a.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){var n=this.attrs[t];(n!==e||p.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,e),this._requestDraw())}_setComponentAttr(t,e,n){var r;void 0!==n&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,r,n))}_fireAndBubble(t,e,n){if(e&&this.nodeType===Y&&(e.target=this),t!==U&&t!==H||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this._fire(t,e);var r=(t===U||t===H)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){let e=this._cache.get(N);if(!e){e={};let t=Object.getPrototypeOf(this);for(;t;)if(t.eventListeners){for(var n in t.eventListeners){const r=t.eventListeners[n],i=e[n]||[];e[n]=r.concat(i)}t=Object.getPrototypeOf(t)}else t=Object.getPrototypeOf(t);this._cache.set(N,e)}return e[t]}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;const n=this._getProtoListeners(t);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,e);const i=this.eventListeners[t];if(i)for(r=0;r<i.length;r++)i[r].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition(),i=n._getPointerById(e)||n._changedPointerPositions[0]||r;j._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){j._dragElements.has(this._id)||this._createDragElement(t),j._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const n=this.getStage()._getPointerById(e.pointerId);if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y},i=this.dragBoundFunc();if(void 0!==i){const e=i.call(this,r,t);e?r=e:p.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(t){const e=j._dragElements.get(this._id);e&&(e.dragStatus="stopped"),j._endDragBefore(t),j._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=j._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){if((void 0===t.evt.button||a.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var e=!1;j._dragElements.forEach((t=>{this.isAncestorOf(t.node)&&(e=!0)})),e||this._createDragElement(t)}}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=j._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,n=t&&"ready"===t.dragStatus;e?this.stopDrag():n&&j._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const n={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return p.haveIntersection(n,this.getClientRect())}static create(t,e){return p._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){var n,r,i,o=Q.prototype.getClassName.call(t),s=t.children;if(e&&(t.attrs.container=e),a[o]||(p.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape"),n=new(0,a[o])(t.attrs),s)for(r=s.length,i=0;i<r;i++)n.add(Q._createNode(s[i]));return n}}Q.prototype.nodeType="Node",Q.prototype._attrsAffectingSize=[],Q.prototype.eventListeners={},Q.prototype.on.call(Q.prototype,$,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(V),this._clearSelfAndDescendantCache(F))})),Q.prototype.on.call(Q.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(K)})),Q.prototype.on.call(Q.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(W)})),Q.prototype.on.call(Q.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(G)}));const Z=P.addGetterSetter;Z(Q,"zIndex"),Z(Q,"absolutePosition"),Z(Q,"position"),Z(Q,"x",0,m()),Z(Q,"y",0,m()),Z(Q,"globalCompositeOperation","source-over",x()),Z(Q,"opacity",1,m()),Z(Q,"name","",x()),Z(Q,"id","",x()),Z(Q,"rotation",0,m()),P.addComponentsGetterSetter(Q,"scale",["x","y"]),Z(Q,"scaleX",1,m()),Z(Q,"scaleY",1,m()),P.addComponentsGetterSetter(Q,"skew",["x","y"]),Z(Q,"skewX",0,m()),Z(Q,"skewY",0,m()),P.addComponentsGetterSetter(Q,"offset",["x","y"]),Z(Q,"offsetX",0,m()),Z(Q,"offsetY",0,m()),Z(Q,"dragDistance",null,m()),Z(Q,"width",0,m()),Z(Q,"height",0,m()),Z(Q,"listening",!0,S()),Z(Q,"preventDefault",!0,S()),Z(Q,"filters",null,(function(t){return this._filterUpToDate=!1,t})),Z(Q,"visible",!0,S()),Z(Q,"transformsEnabled","all",x()),Z(Q,"size"),Z(Q,"dragBoundFunc"),Z(Q,"draggable",!1,S()),P.backCompat(Q,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class tt extends Q{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const e=this.children||[];var n=[];return e.forEach((function(e){t(e)&&n.push(e)})),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}var n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){var n=[];return this._descendants((r=>{const i=r._isMatch(t);return i&&n.push(r),!(!i||!e)})),n}_descendants(t){let e=!1;const n=this.getChildren();for(const r of n){if(e=t(r),e)return!0;if(r.hasChildren()&&(e=r._descendants(t),e))return!0}return!1}toObject(){var t=Q.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((e=>{t.children.push(e.toObject())})),t}isAncestorOf(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){var e=Q.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}getAllIntersections(t){var e=[];return this.find("Shape").forEach((function(n){n.isVisible()&&n.intersects(t)&&e.push(n)})),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas(),i=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,s=r&&r.isCache;if(!this.isVisible()&&!s)return this;if(o){i.save();var h=this.getAbsoluteTransform(e).getMatrix();i.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(i),i.restore()}else this._drawChildren("drawScene",r,e);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),r=t||n&&n.hitCanvas,i=r&&r.getContext(),a=this._getCanvasCache();if(a&&a.hit){i.save();var o=this.getAbsoluteTransform(e).getMatrix();i.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,e);return this}_drawChildren(t,e,n){var r,i=e&&e.getContext(),a=this.clipWidth(),o=this.clipHeight(),s=this.clipFunc(),h=a&&o||s;const u=n===this;if(h){i.save();var l=this.getAbsoluteTransform(n),c=l.getMatrix();if(i.transform(c[0],c[1],c[2],c[3],c[4],c[5]),i.beginPath(),s)s.call(this,i,this);else{var f=this.clipX(),d=this.clipY();i.rect(f,d,a,o)}i.clip(),c=l.copy().invert().getMatrix(),i.transform(c[0],c[1],c[2],c[3],c[4],c[5])}var g=!u&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;g&&(i.save(),i._applyGlobalCompositeOperation(this)),null===(r=this.children)||void 0===r||r.forEach((function(r){r[t](e,n)})),g&&i.restore(),h&&i.restore()}getClientRect(t){var e,n,r,i,a,o,s=(t=t||{}).skipTransform,h=t.relativeTo,u=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(e.visible()){var o=e.getClientRect({relativeTo:u,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===o.width&&0===o.height||(void 0===n?(n=o.x,r=o.y,i=o.x+o.width,a=o.y+o.height):(n=Math.min(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x+o.width),a=Math.max(a,o.y+o.height)))}}));for(var l=this.find("Shape"),c=!1,f=0;f<l.length;f++)if(l[f]._isVisible(this)){c=!0;break}return o=c&&void 0!==n?{x:n,y:r,width:i-n,height:a-r}:{x:0,y:0,width:0,height:0},s?o:this._transformedRect(o,h)}}P.addComponentsGetterSetter(tt,"clip",["x","y","width","height"]),P.addGetterSetter(tt,"clipX",void 0,m()),P.addGetterSetter(tt,"clipY",void 0,m()),P.addGetterSetter(tt,"clipWidth",void 0,m()),P.addGetterSetter(tt,"clipHeight",void 0,m()),P.addGetterSetter(tt,"clipFunc");const et=new Map,nt=void 0!==a._global.PointerEvent;function rt(t){return et.get(t)}function it(t){return{evt:t,pointerId:t.pointerId}}function at(t,e){return et.get(t)===e}function ot(t,e){st(t),e.getStage()&&(et.set(t,e),nt&&e._fire("gotpointercapture",it(new PointerEvent("gotpointercapture"))))}function st(t,e){const n=et.get(t);if(!n)return;const r=n.getStage();r&&r.content,et.delete(t),nt&&n._fire("lostpointercapture",it(new PointerEvent("lostpointercapture")))}var ht="mouseleave",ut="mouseover",lt="mouseenter",ct="mousemove",ft="mousedown",dt="mouseup",gt="pointermove",pt="pointerdown",vt="pointerup",yt="pointercancel",mt="pointerout",_t="pointerleave",bt="pointerover",xt="pointerenter",wt="contextmenu",St="touchstart",kt="touchend",Ct="touchmove",Pt="touchcancel",Ot="wheel",At=[[lt,"_pointerenter"],[ft,"_pointerdown"],[ct,"_pointermove"],[dt,"_pointerup"],[ht,"_pointerleave"],[St,"_pointerdown"],[Ct,"_pointermove"],[kt,"_pointerup"],[Pt,"_pointercancel"],[ut,"_pointerover"],[Ot,"_wheel"],[wt,"_contextmenu"],[pt,"_pointerdown"],[gt,"_pointermove"],[vt,"_pointerup"],[yt,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const Tt={mouse:{[mt]:"mouseout",[_t]:ht,[bt]:ut,[xt]:lt,[gt]:ct,[pt]:ft,[vt]:dt,[yt]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[mt]:"touchout",[_t]:"touchleave",[bt]:"touchover",[xt]:"touchenter",[gt]:Ct,[pt]:St,[vt]:kt,[yt]:Pt,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[mt]:mt,[_t]:_t,[bt]:bt,[xt]:xt,[gt]:gt,[pt]:pt,[vt]:vt,[yt]:yt,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Rt=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Lt=t=>{const e=Rt(t);return"pointer"===e?a.pointerEventsEnabled&&Tt.pointer:"touch"===e?Tt.touch:"mouse"===e?Tt.mouse:void 0};function Et(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&p.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const Mt=[];class Dt extends tt{constructor(t){super(Et(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Mt.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{Et(this.attrs)})),this._checkVisibility()}_validateAdd(t){const e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||p.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),tt.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&p._isInDocument(t)&&this.container().removeChild(t);var e=Mt.indexOf(this);return e>-1&&Mt.splice(e,1),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(p.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find((e=>e.id===t))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new D({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,r=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),r.forEach((function(e){if(e.isVisible()){var r=e._toKonvaCanvas(t);n.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}})),e}getIntersection(t){if(!t)return null;var e,n=this.children;for(e=n.length-1;e>=0;e--){const r=n[e].getIntersection(t);if(r)return r}return null}_resizeDOM(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((n=>{n.setSize({width:t,height:e}),n.draw()}))}add(t,...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(t);var r=this.children.length;return r>5&&p.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),a.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return at(t,this)}setPointerCapture(t){ot(t,this)}releaseCapture(t){st(t)}getLayers(){return this.children}_bindContentEvents(){a.isBrowser&&At.forEach((([t,e])=>{this.content.addEventListener(t,(t=>{this[e](t)}))}))}_pointerenter(t){this.setPointersPositions(t);const e=Lt(t.type);this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Lt(t.type);this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Lt(t.type),n=Rt(t.type);if(e){this.setPointersPositions(t);var r=this._getTargetShape(n),i=!j.isDragging||a.hitOnDragEnabled;r&&i?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):i&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const e=Lt(t.type),n=Rt(t.type);if(e){this.setPointersPositions(t);var r=!1;this._changedPointerPositions.forEach((i=>{var o=this.getIntersection(i);if(j.justDragged=!1,a["_"+n+"ListenClick"]=!0,!o||!o.isListening())return;a.capturePointerEventsEnabled&&o.setPointerCapture(i.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(e.pointerdown,{evt:t,pointerId:i.id}),r=!0;const s=t.type.indexOf("touch")>=0;o.preventDefault()&&t.cancelable&&s&&t.preventDefault()})),r||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const e=Lt(t.type),n=Rt(t.type);if(!e)return;if(j.isDragging&&j.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),j.isDragging&&!a.hitOnDragEnabled)return;var r={};let i=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach((a=>{const s=rt(a.id)||this.getIntersection(a),h=a.id,u={evt:t,pointerId:h};var l=o!==s;if(l&&o&&(o._fireAndBubble(e.pointerout,Object.assign({},u),s),o._fireAndBubble(e.pointerleave,Object.assign({},u),s)),s){if(r[s._id])return;r[s._id]=!0}s&&s.isListening()?(i=!0,l&&(s._fireAndBubble(e.pointerover,Object.assign({},u),o),s._fireAndBubble(e.pointerenter,Object.assign({},u),o),this[n+"targetShape"]=s),s._fireAndBubble(e.pointermove,Object.assign({},u))):o&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:h}),this[n+"targetShape"]=null)})),i||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Lt(t.type),n=Rt(t.type);if(!e)return;this.setPointersPositions(t);const r=this[n+"ClickStartShape"],i=this[n+"ClickEndShape"];var o={};let s=!1;this._changedPointerPositions.forEach((h=>{const u=rt(h.id)||this.getIntersection(h);if(u){if(u.releaseCapture(h.id),o[u._id])return;o[u._id]=!0}const l=h.id,c={evt:t,pointerId:l};let f=!1;a["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):j.justDragged||(a["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout((function(){a["_"+n+"InDblClickWindow"]=!1}),a.dblClickWindow),u&&u.isListening()?(s=!0,this[n+"ClickEndShape"]=u,u._fireAndBubble(e.pointerup,Object.assign({},c)),a["_"+n+"ListenClick"]&&r&&r===u&&(u._fireAndBubble(e.pointerclick,Object.assign({},c)),f&&i&&i===u&&u._fireAndBubble(e.pointerdblclick,Object.assign({},c)))):(this[n+"ClickEndShape"]=null,a["_"+n+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:l}),f&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:l}))})),s||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a["_"+n+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(wt,{evt:t}):this._fire(wt,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(Ot,{evt:t}):this._fire(Ot,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=rt(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(vt,it(t)),st(t.pointerId)}_lostpointercapture(t){st(t.pointerId)}setPointersPositions(t){var e=this._getContentPosition(),n=null,r=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}))):(n=(t.clientX-e.left)/e.scaleX,r=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:p._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:r,id:p._getFirstPointerId(t)}])}_setPointerPosition(t){p.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new D({width:this.width(),height:this.height()}),this.bufferHitCanvas=new I({pixelRatio:1,width:this.width(),height:this.height()}),a.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return p.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}Dt.prototype.nodeType="Stage",o(Dt),P.addGetterSetter(Dt,"container");var It="hasShadow",jt="shadowRGBA",Gt="patternImage",Nt="linearGradient",Ft="radialGradient";let Bt;function zt(){return Bt||(Bt=p.createCanvasElement().getContext("2d"),Bt)}const Wt={};class Ut extends Q{constructor(t){let e;for(super(t);e=p.getRandomColor(),!e||e in Wt;);this.colorKey=e,Wt[e]=this}getContext(){return p.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return p.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(It,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Gt,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=zt().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const e=new s;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(a.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=e.getMatrix(),r="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);t.setTransform(r)}return t}}_getLinearGradient(){return this._getCache(Nt,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var e=zt(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(n.x,n.y,r.x,r.y),a=0;a<t.length;a+=2)i.addColorStop(t[a],t[a+1]);return i}}_getRadialGradient(){return this._getCache(Ft,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var e=zt(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)i.addColorStop(t[a],t[a+1]);return i}}getShadowRGBA(){return this._getCache(jt,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=p.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Q.prototype.destroy.call(this),delete Wt[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!this.getStage())return!1;if(null!==(e=this.attrs.perfectDrawEnabled)&&void 0!==e&&!e)return!1;const n=t||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;const a=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!(n&&r&&a&&o)}setStrokeHitEnabled(t){p.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const e=t.skipTransform,n=t.relativeTo,r=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=r.width+i,o=r.height+i,s=!t.skipShadow&&this.hasShadow(),h=s?this.shadowOffsetX():0,u=s?this.shadowOffsetY():0,l=a+Math.abs(h),c=o+Math.abs(u),f=s&&this.shadowBlur()||0,d={width:l+2*f,height:c+2*f,x:-(i/2+f)+Math.min(h,0)+r.x,y:-(i/2+f)+Math.min(u,0)+r.y};return e?d:this._transformedRect(d,n)}drawScene(t,e){var n,r,i=this.getLayer(),a=t||i.getCanvas(),o=a.getContext(),s=this._getCanvasCache(),h=this.getSceneFunc(),u=this.hasShadow(),l=a.isCache,c=e===this;if(!this.isVisible()&&!c)return this;if(s){o.save();var f=this.getAbsoluteTransform(e).getMatrix();return o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!h)return this;if(o.save(),this._useBufferCanvas()&&!l){(r=(n=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this);var d=this.getAbsoluteTransform(e).getMatrix();r.transform(d[0],d[1],d[2],d[3],d[4],d[5]),h.call(this,r,this),r.restore();var g=n.pixelRatio;u&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(n._canvas,0,0,n.width/g,n.height/g)}else o._applyLineJoin(this),c||(d=this.getAbsoluteTransform(e).getMatrix(),o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)),u&&o._applyShadow(this),h.call(this,o,this);return o.restore(),this}drawHit(t,e,n=!1){if(!this.shouldDrawHit(e,n))return this;var r=this.getLayer(),i=t||r.hitCanvas,a=i&&i.getContext(),o=this.hitFunc()||this.sceneFunc(),s=this._getCanvasCache(),h=s&&s.hit;if(this.colorKey||p.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var u=this.getAbsoluteTransform(e).getMatrix();return a.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),this!==e){var l=this.getAbsoluteTransform(e).getMatrix();a.transform(l[0],l[1],l[2],l[3],l[4],l[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var e,n,r,i,a,o=this._getCanvasCache(),s=this._getCachedSceneCanvas(),h=o.hit,u=h.getContext(),l=h.getWidth(),c=h.getHeight();u.clear(),u.drawImage(s._canvas,0,0,l,c);try{for(r=(n=(e=u.getImageData(0,0,l,c)).data).length,i=p._hexToRgb(this.colorKey),a=0;a<r;a+=4)n[a+3]>t?(n[a]=i.r,n[a+1]=i.g,n[a+2]=i.b,n[a+3]=255):n[a+3]=0;u.putImageData(e,0,0)}catch(t){p.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}hasPointerCapture(t){return at(t,this)}setPointerCapture(t){ot(t,this)}releaseCapture(t){st(t)}}Ut.prototype._fillFunc=function(t){t.fill()},Ut.prototype._strokeFunc=function(t){t.stroke()},Ut.prototype._fillFuncHit=function(t){t.fill()},Ut.prototype._strokeFuncHit=function(t){t.stroke()},Ut.prototype._centroid=!1,Ut.prototype.nodeType="Shape",o(Ut),Ut.prototype.eventListeners={},Ut.prototype.on.call(Ut.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(It)})),Ut.prototype.on.call(Ut.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(jt)})),Ut.prototype.on.call(Ut.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(Gt)})),Ut.prototype.on.call(Ut.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(Nt)})),Ut.prototype.on.call(Ut.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(Ft)})),P.addGetterSetter(Ut,"stroke",void 0,w()),P.addGetterSetter(Ut,"strokeWidth",2,m()),P.addGetterSetter(Ut,"fillAfterStrokeEnabled",!1),P.addGetterSetter(Ut,"hitStrokeWidth","auto",b()),P.addGetterSetter(Ut,"strokeHitEnabled",!0,S()),P.addGetterSetter(Ut,"perfectDrawEnabled",!0,S()),P.addGetterSetter(Ut,"shadowForStrokeEnabled",!0,S()),P.addGetterSetter(Ut,"lineJoin"),P.addGetterSetter(Ut,"lineCap"),P.addGetterSetter(Ut,"sceneFunc"),P.addGetterSetter(Ut,"hitFunc"),P.addGetterSetter(Ut,"dash"),P.addGetterSetter(Ut,"dashOffset",0,m()),P.addGetterSetter(Ut,"shadowColor",void 0,x()),P.addGetterSetter(Ut,"shadowBlur",0,m()),P.addGetterSetter(Ut,"shadowOpacity",1,m()),P.addComponentsGetterSetter(Ut,"shadowOffset",["x","y"]),P.addGetterSetter(Ut,"shadowOffsetX",0,m()),P.addGetterSetter(Ut,"shadowOffsetY",0,m()),P.addGetterSetter(Ut,"fillPatternImage"),P.addGetterSetter(Ut,"fill",void 0,w()),P.addGetterSetter(Ut,"fillPatternX",0,m()),P.addGetterSetter(Ut,"fillPatternY",0,m()),P.addGetterSetter(Ut,"fillLinearGradientColorStops"),P.addGetterSetter(Ut,"strokeLinearGradientColorStops"),P.addGetterSetter(Ut,"fillRadialGradientStartRadius",0),P.addGetterSetter(Ut,"fillRadialGradientEndRadius",0),P.addGetterSetter(Ut,"fillRadialGradientColorStops"),P.addGetterSetter(Ut,"fillPatternRepeat","repeat"),P.addGetterSetter(Ut,"fillEnabled",!0),P.addGetterSetter(Ut,"strokeEnabled",!0),P.addGetterSetter(Ut,"shadowEnabled",!0),P.addGetterSetter(Ut,"dashEnabled",!0),P.addGetterSetter(Ut,"strokeScaleEnabled",!0),P.addGetterSetter(Ut,"fillPriority","color"),P.addComponentsGetterSetter(Ut,"fillPatternOffset",["x","y"]),P.addGetterSetter(Ut,"fillPatternOffsetX",0,m()),P.addGetterSetter(Ut,"fillPatternOffsetY",0,m()),P.addComponentsGetterSetter(Ut,"fillPatternScale",["x","y"]),P.addGetterSetter(Ut,"fillPatternScaleX",1,m()),P.addGetterSetter(Ut,"fillPatternScaleY",1,m()),P.addComponentsGetterSetter(Ut,"fillLinearGradientStartPoint",["x","y"]),P.addComponentsGetterSetter(Ut,"strokeLinearGradientStartPoint",["x","y"]),P.addGetterSetter(Ut,"fillLinearGradientStartPointX",0),P.addGetterSetter(Ut,"strokeLinearGradientStartPointX",0),P.addGetterSetter(Ut,"fillLinearGradientStartPointY",0),P.addGetterSetter(Ut,"strokeLinearGradientStartPointY",0),P.addComponentsGetterSetter(Ut,"fillLinearGradientEndPoint",["x","y"]),P.addComponentsGetterSetter(Ut,"strokeLinearGradientEndPoint",["x","y"]),P.addGetterSetter(Ut,"fillLinearGradientEndPointX",0),P.addGetterSetter(Ut,"strokeLinearGradientEndPointX",0),P.addGetterSetter(Ut,"fillLinearGradientEndPointY",0),P.addGetterSetter(Ut,"strokeLinearGradientEndPointY",0),P.addComponentsGetterSetter(Ut,"fillRadialGradientStartPoint",["x","y"]),P.addGetterSetter(Ut,"fillRadialGradientStartPointX",0),P.addGetterSetter(Ut,"fillRadialGradientStartPointY",0),P.addComponentsGetterSetter(Ut,"fillRadialGradientEndPoint",["x","y"]),P.addGetterSetter(Ut,"fillRadialGradientEndPointX",0),P.addGetterSetter(Ut,"fillRadialGradientEndPointY",0),P.addGetterSetter(Ut,"fillPatternRotation",0),P.backCompat(Ut,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var Ht=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Yt=Ht.length;class qt extends tt{constructor(t){super(t),this.canvas=new D,this.hitCanvas=new I({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Q.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Q.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content||(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(Q.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Q.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Q.prototype.remove.call(this),t&&t.parentNode&&p._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&p.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),Q.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){p.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){p.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,p.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let r=0;r<Yt;r++){const i=Ht[r],a=this._getIntersection({x:t.x+i.x*e,y:t.y+i.y*e}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(!n)return null;e+=1}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(255===r){const t=p._rgbToHex(n[0],n[1],n[2]),e=Wt["#"+t];return e?{shape:e}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),tt.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this}drawHit(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),tt.prototype.drawHit.call(this,r,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){p.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return p.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}qt.prototype.nodeType="Layer",o(qt),P.addGetterSetter(qt,"imageSmoothingEnabled",!0),P.addGetterSetter(qt,"clearBeforeDraw",!0),P.addGetterSetter(qt,"hitGraphEnabled",!0,S());class Xt extends qt{constructor(t){super(t),this.listening(!1),p.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Xt.prototype.nodeType="FastLayer",o(Xt);class Vt extends tt{_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&p.throw("You may only add groups and shapes to groups.")}}Vt.prototype.nodeType="Group",o(Vt);var Kt=i.performance&&i.performance.now?function(){return i.performance.now()}:function(){return(new Date).getTime()};class $t{constructor(t,e){this.id=$t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Kt(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){var e;return e=t?t.length>0?t:[t]:[],this.layers=e,this}getLayers(){return this.layers}addLayer(t){var e,n=this.layers,r=n.length;for(e=0;e<r;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t,e=$t.animations,n=e.length;for(t=0;t<n;t++)if(e[t].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Kt(),$t._addAnimation(this),this}stop(){return $t._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var e,n=t.id,r=this.animations,i=r.length;for(e=0;e<i;e++)if(r[e].id===n){this.animations.splice(e,1);break}}static _runFrames(){var t,e,n,r,i,a,o,s,h={},u=this.animations;for(r=0;r<u.length;r++)if(e=(t=u[r]).layers,n=t.func,t._updateFrameObject(Kt()),a=e.length,!n||!1!==n.call(t,t.frame))for(i=0;i<a;i++)void 0!==(o=e[i])._id&&(h[o._id]=o);for(s in h)h.hasOwnProperty(s)&&h[s].batchDraw()}static _animationLoop(){var t=$t;t.animations.length?(t._runFrames(),p.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,p.requestAnimFrame(this._animationLoop))}}$t.animations=[],$t.animIdCounter=0,$t.animRunning=!1;var Jt={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Qt=0,Zt=["fill","stroke","shadowColor"];class te{constructor(t,e,n,r,i,a,o){this.prop=t,this.propFunc=e,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()}fire(t){var e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class ee{constructor(t){var e,n,r=this,i=t.node,o=i._id,s=t.easing||ne.Linear,h=!!t.yoyo;e=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=i,this._id=Qt++;var u=i.getLayer()||(i instanceof a.Stage?i.getLayers():null);for(n in u||p.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new $t((function(){r.tween.onEnterFrame()}),u),this.tween=new te(n,(function(t){r._tweenFunc(t)}),s,0,1,1e3*e,h),this._addListeners(),ee.attrs[o]||(ee.attrs[o]={}),ee.attrs[o][this._id]||(ee.attrs[o][this._id]={}),ee.tweens[o]||(ee.tweens[o]={}),t)void 0===Jt[n]&&this._addAttr(n,t[n]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){var n,r,i,a,o,s,h,u,l=this.node,c=l._id;if((i=ee.tweens[c][t])&&delete ee.attrs[c][i][t],n=l.getAttr(t),p._isArray(e))if(r=[],o=Math.max(e.length,n.length),"points"===t&&e.length!==n.length&&(e.length>n.length?(h=n,n=p._prepareArrayForTween(n,e,l.closed())):(s=e,e=p._prepareArrayForTween(e,n,l.closed()))),0===t.indexOf("fill"))for(a=0;a<o;a++)if(a%2==0)r.push(e[a]-n[a]);else{var f=p.colorToRGBA(n[a]);u=p.colorToRGBA(e[a]),n[a]=f,r.push({r:u.r-f.r,g:u.g-f.g,b:u.b-f.b,a:u.a-f.a})}else for(a=0;a<o;a++)r.push(e[a]-n[a]);else-1!==Zt.indexOf(t)?(n=p.colorToRGBA(n),r={r:(u=p.colorToRGBA(e)).r-n.r,g:u.g-n.g,b:u.b-n.b,a:u.a-n.a}):r=e-n;ee.attrs[c][this._id][t]={start:n,diff:r,end:e,trueEnd:s,trueStart:h},ee.tweens[c][t]=this._id}_tweenFunc(t){var e,n,r,i,a,o,s,h,u=this.node,l=ee.attrs[u._id][this._id];for(e in l){if(r=(n=l[e]).start,i=n.diff,h=n.end,p._isArray(r))if(a=[],s=Math.max(r.length,h.length),0===e.indexOf("fill"))for(o=0;o<s;o++)o%2==0?a.push((r[o]||0)+i[o]*t):a.push("rgba("+Math.round(r[o].r+i[o].r*t)+","+Math.round(r[o].g+i[o].g*t)+","+Math.round(r[o].b+i[o].b*t)+","+(r[o].a+i[o].a*t)+")");else for(o=0;o<s;o++)a.push((r[o]||0)+i[o]*t);else a=-1!==Zt.indexOf(e)?"rgba("+Math.round(r.r+i.r*t)+","+Math.round(r.g+i.g*t)+","+Math.round(r.b+i.b*t)+","+(r.a+i.a*t)+")":r+i*t;u.setAttr(e,a)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,e=ee.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,e=ee.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t,e=this.node._id,n=this._id,r=ee.tweens[e];for(t in this.pause(),r)delete ee.tweens[e][t];delete ee.attrs[e][n]}}ee.attrs={},ee.tweens={},Q.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new ee(t).play()};const ne={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,a){var o=0;return 0===t?e:1==(t/=r)?e+n:(a||(a=.3*r),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)+e)},ElasticEaseOut(t,e,n,r,i,a){var o=0;return 0===t?e:1==(t/=r)?e+n:(a||(a=.3*r),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+n+e)},ElasticEaseInOut(t,e,n,r,i,a){var o=0;return 0===t?e:2==(t/=r/2)?e+n:(a||(a=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+n+e)},BounceEaseOut:(t,e,n,r)=>(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,e,n,r)=>n-ne.BounceEaseOut(r-t,0,n,r)+e,BounceEaseInOut:(t,e,n,r)=>t<r/2?.5*ne.BounceEaseIn(2*t,0,n,r)+e:.5*ne.BounceEaseOut(2*t-r,0,n,r)+.5*n+e,EaseIn:(t,e,n,r)=>n*(t/=r)*t+e,EaseOut:(t,e,n,r)=>-n*(t/=r)*(t-2)+e,EaseInOut:(t,e,n,r)=>(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,n,r)=>n*(t/=r)*t*t*t*t+e,StrongEaseOut:(t,e,n,r)=>n*((t=t/r-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,n,r)=>(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,n,r)=>n*t/r+e},re=p._assign(a,{Util:p,Transform:s,Node:Q,Container:tt,Stage:Dt,stages:Mt,Layer:qt,FastLayer:Xt,Group:Vt,DD:j,Shape:Ut,shapes:Wt,Animation:$t,Tween:ee,Easings:ne,Context:R,Canvas:M});class ie extends Ut{_sceneFunc(t){var e=a.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),n=this.clockwise(),r=a.getAngle(n?360-this.angle():this.angle()),i=Math.cos(Math.min(r,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),s=Math.sin(Math.min(r,Math.PI/2)),h=i*(i>0?t:e),u=o*(o>0?t:e),l=s*(s>0?e:t);return{x:h,y:n?-1*l:u,width:1*e-h,height:l-u}}}function ae(t,e,n,r,i,a,o){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),h=Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2)),u=o*s/(s+h),l=o*h/(s+h);return[n-u*(i-t),r-u*(a-e),n+l*(i-t),r+l*(a-e)]}function oe(t,e){var n,r,i=t.length,a=[];for(n=2;n<i-2;n+=2)r=ae(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),isNaN(r[0])||(a.push(r[0]),a.push(r[1]),a.push(t[n]),a.push(t[n+1]),a.push(r[2]),a.push(r[3]));return a}ie.prototype._centroid=!0,ie.prototype.className="Arc",ie.prototype._attrsAffectingSize=["innerRadius","outerRadius"],o(ie),P.addGetterSetter(ie,"innerRadius",0,m()),P.addGetterSetter(ie,"outerRadius",0,m()),P.addGetterSetter(ie,"angle",0,m()),P.addGetterSetter(ie,"clockwise",!1,S());class se extends Ut{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(t){var e,n,r,i=this.points(),a=i.length,o=this.tension(),s=this.closed(),h=this.bezier();if(a){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==o&&a>4){for(n=(e=this.getTensionPoints()).length,r=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<n-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);s||t.quadraticCurveTo(e[n-2],e[n-1],i[a-2],i[a-1])}else if(h)for(r=2;r<a;)t.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<a;r+=2)t.lineTo(i[r],i[r+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():oe(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,n=this.tension(),r=ae(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),i=ae(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),a=oe(t,n);return[r[2],r[3]].concat(a).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],r[0],r[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,r=(t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points())[0],i=t[0],a=t[1],o=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),a=Math.min(a,n),o=Math.max(o,n);return{x:r,y:a,width:i-r,height:o-a}}}se.prototype.className="Line",se.prototype._attrsAffectingSize=["points","bezier","tension"],o(se),P.addGetterSetter(se,"closed",!1),P.addGetterSetter(se,"bezier",!1),P.addGetterSetter(se,"tension",0,m()),P.addGetterSetter(se,"points",[],function(){if(a.isUnminified)return function(t,e){return p._isArray(t)?t.forEach((function(t){p._isNumber(t)||p.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):p.warn(v(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}());class he extends Ut{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=he.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength;this.on("dataChange.konva",(function(){this.dataArray=he.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}))}_sceneFunc(t){var e=this.dataArray;t.beginPath();for(var n=!1,r=0;r<e.length;r++){var i=e[r].command,a=e[r].points;switch(i){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],s=a[1],h=a[2],u=a[3],l=a[4],c=a[5],f=a[6],d=a[7],g=h>u?h:u,p=h>u?1:h/u,v=h>u?u/h:1;t.translate(o,s),t.rotate(f),t.scale(p,v),t.arc(0,0,g,l,l+c,1-d),t.scale(1/p,1/v),t.rotate(-f),t.translate(-o,-s);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach((function(e){if("A"===e.command){var n=e.points[4],r=e.points[5],i=e.points[4]+r,a=Math.PI/180;if(Math.abs(n-i)<a&&(a=Math.abs(n-i)),r<0)for(let r=n-a;r>i;r-=a){const n=he.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],r,0);t.push(n.x,n.y)}else for(let r=n+a;r<i;r+=a){const n=he.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],r,0);t.push(n.x,n.y)}}else if("C"===e.command)for(let n=0;n<=1;n+=.01){const r=he.getPointOnCubicBezier(n,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(r.x,r.y)}else t=t.concat(e.points)}));for(var e,n,r=t[0],i=t[0],a=t[1],o=t[1],s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],isNaN(e)||(r=Math.min(r,e),i=Math.max(i,e)),isNaN(n)||(a=Math.min(a,n),o=Math.max(o,n));return{x:r,y:a,width:i-r,height:o-a}}getLength(){return this.pathLength}getPointAtLength(t){var e,n=0,r=this.dataArray.length;if(!r)return null;for(;n<r&&t>this.dataArray[n].pathLength;)t-=this.dataArray[n].pathLength,++n;if(n===r)return{x:(e=this.dataArray[n-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[n].points.slice(0,2))[0],y:e[1]};var i=this.dataArray[n],a=i.points;switch(i.command){case"L":return he.getPointOnLine(t,i.start.x,i.start.y,a[0],a[1]);case"C":return he.getPointOnCubicBezier(t/i.pathLength,i.start.x,i.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return he.getPointOnQuadraticBezier(t/i.pathLength,i.start.x,i.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],s=a[1],h=a[2],u=a[3],l=a[4],c=a[5],f=a[6];return l+=c*t/i.pathLength,he.getPointOnEllipticalArc(o,s,h,u,l,f)}return null}static getLineLength(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}static getPointOnLine(t,e,n,r,i,a,o){void 0===a&&(a=e),void 0===o&&(o=n);var s=(i-n)/(r-e+1e-8),h=Math.sqrt(t*t/(1+s*s));r<e&&(h*=-1);var u,l=s*h;if(r===e)u={x:a,y:o+l};else if((o-n)/(a-e+1e-8)===s)u={x:a+h,y:o+l};else{var c,f,d=this.getLineLength(e,n,r,i),g=(a-e)*(r-e)+(o-n)*(i-n);c=e+(g/=d*d)*(r-e),f=n+g*(i-n);var p=this.getLineLength(a,o,c,f),v=Math.sqrt(t*t-p*p);h=Math.sqrt(v*v/(1+s*s)),r<e&&(h*=-1),u={x:c+h,y:f+(l=s*h)}}return u}static getPointOnCubicBezier(t,e,n,r,i,a,o,s,h){function u(t){return t*t*t}function l(t){return 3*t*t*(1-t)}function c(t){return 3*t*(1-t)*(1-t)}function f(t){return(1-t)*(1-t)*(1-t)}return{x:s*u(t)+a*l(t)+r*c(t)+e*f(t),y:h*u(t)+o*l(t)+i*c(t)+n*f(t)}}static getPointOnQuadraticBezier(t,e,n,r,i,a,o){function s(t){return t*t}function h(t){return 2*t*(1-t)}function u(t){return(1-t)*(1-t)}return{x:a*s(t)+r*h(t)+e*u(t),y:o*s(t)+i*h(t)+n*u(t)}}static getPointOnEllipticalArc(t,e,n,r,i,a){var o=Math.cos(a),s=Math.sin(a),h=n*Math.cos(i),u=r*Math.sin(i);return{x:t+(h*o-u*s),y:e+(h*s+u*o)}}static parsePathData(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)e=e.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,a=e.split("|"),o=[],s=[],h=0,u=0,l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<a.length;r++){var c=a[r],f=c.charAt(0);for(c=c.slice(1),s.length=0;i=l.exec(c);)s.push(i[0]);for(var d=[],g=0,p=s.length;g<p;g++)if("00"!==s[g]){var v=parseFloat(s[g]);isNaN(v)?d.push(0):d.push(v)}else d.push(0,0);for(;d.length>0&&!isNaN(d[0]);){var y,m,_,b,x,w,S,k,C,P,O=null,A=[],T=h,R=u;switch(f){case"l":h+=d.shift(),u+=d.shift(),O="L",A.push(h,u);break;case"L":h=d.shift(),u=d.shift(),A.push(h,u);break;case"m":var L=d.shift(),E=d.shift();if(h+=L,u+=E,O="M",o.length>2&&"z"===o[o.length-1].command)for(var M=o.length-2;M>=0;M--)if("M"===o[M].command){h=o[M].points[0]+L,u=o[M].points[1]+E;break}A.push(h,u),f="l";break;case"M":h=d.shift(),u=d.shift(),O="M",A.push(h,u),f="L";break;case"h":h+=d.shift(),O="L",A.push(h,u);break;case"H":h=d.shift(),O="L",A.push(h,u);break;case"v":u+=d.shift(),O="L",A.push(h,u);break;case"V":u=d.shift(),O="L",A.push(h,u);break;case"C":A.push(d.shift(),d.shift(),d.shift(),d.shift()),h=d.shift(),u=d.shift(),A.push(h,u);break;case"c":A.push(h+d.shift(),u+d.shift(),h+d.shift(),u+d.shift()),h+=d.shift(),u+=d.shift(),O="C",A.push(h,u);break;case"S":m=h,_=u,"C"===(y=o[o.length-1]).command&&(m=h+(h-y.points[2]),_=u+(u-y.points[3])),A.push(m,_,d.shift(),d.shift()),h=d.shift(),u=d.shift(),O="C",A.push(h,u);break;case"s":m=h,_=u,"C"===(y=o[o.length-1]).command&&(m=h+(h-y.points[2]),_=u+(u-y.points[3])),A.push(m,_,h+d.shift(),u+d.shift()),h+=d.shift(),u+=d.shift(),O="C",A.push(h,u);break;case"Q":A.push(d.shift(),d.shift()),h=d.shift(),u=d.shift(),A.push(h,u);break;case"q":A.push(h+d.shift(),u+d.shift()),h+=d.shift(),u+=d.shift(),O="Q",A.push(h,u);break;case"T":m=h,_=u,"Q"===(y=o[o.length-1]).command&&(m=h+(h-y.points[0]),_=u+(u-y.points[1])),h=d.shift(),u=d.shift(),O="Q",A.push(m,_,h,u);break;case"t":m=h,_=u,"Q"===(y=o[o.length-1]).command&&(m=h+(h-y.points[0]),_=u+(u-y.points[1])),h+=d.shift(),u+=d.shift(),O="Q",A.push(m,_,h,u);break;case"A":b=d.shift(),x=d.shift(),w=d.shift(),S=d.shift(),k=d.shift(),C=h,P=u,h=d.shift(),u=d.shift(),O="A",A=this.convertEndpointToCenterParameterization(C,P,h,u,S,k,b,x,w);break;case"a":b=d.shift(),x=d.shift(),w=d.shift(),S=d.shift(),k=d.shift(),C=h,P=u,h+=d.shift(),u+=d.shift(),O="A",A=this.convertEndpointToCenterParameterization(C,P,h,u,S,k,b,x,w)}o.push({command:O||f,points:A,start:{x:T,y:R},pathLength:this.calcLength(T,R,O||f,A)})}"z"!==f&&"Z"!==f||o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,n,r){var i,a,o,s,h=he;switch(n){case"L":return h.getLineLength(t,e,r[0],r[1]);case"C":for(i=0,a=h.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),s=.01;s<=1;s+=.01)o=h.getPointOnCubicBezier(s,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),i+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case"Q":for(i=0,a=h.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),s=.01;s<=1;s+=.01)o=h.getPointOnQuadraticBezier(s,t,e,r[0],r[1],r[2],r[3]),i+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case"A":i=0;var u=r[4],l=r[5],c=r[4]+l,f=Math.PI/180;if(Math.abs(u-c)<f&&(f=Math.abs(u-c)),a=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),l<0)for(s=u-f;s>c;s-=f)o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(s=u+f;s<c;s+=f)o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+h.getLineLength(a.x,a.y,o.x,o.y)}return 0}static convertEndpointToCenterParameterization(t,e,n,r,i,a,o,s,h){var u=h*(Math.PI/180),l=Math.cos(u)*(t-n)/2+Math.sin(u)*(e-r)/2,c=-1*Math.sin(u)*(t-n)/2+Math.cos(u)*(e-r)/2,f=l*l/(o*o)+c*c/(s*s);f>1&&(o*=Math.sqrt(f),s*=Math.sqrt(f));var d=Math.sqrt((o*o*(s*s)-o*o*(c*c)-s*s*(l*l))/(o*o*(c*c)+s*s*(l*l)));i===a&&(d*=-1),isNaN(d)&&(d=0);var g=d*o*c/s,p=d*-s*l/o,v=(t+n)/2+Math.cos(u)*g-Math.sin(u)*p,y=(e+r)/2+Math.sin(u)*g+Math.cos(u)*p,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},x=b([1,0],[(l-g)/o,(c-p)/s]),w=[(l-g)/o,(c-p)/s],S=[(-1*l-g)/o,(-1*c-p)/s],k=b(w,S);return _(w,S)<=-1&&(k=Math.PI),_(w,S)>=1&&(k=0),0===a&&k>0&&(k-=2*Math.PI),1===a&&k<0&&(k+=2*Math.PI),[v,y,o,s,x,k,u,a]}}he.prototype.className="Path",he.prototype._attrsAffectingSize=["data"],o(he),P.addGetterSetter(he,"data");class ue extends se{_sceneFunc(t){super._sceneFunc(t);var e=2*Math.PI,n=this.points(),r=n,i=0!==this.tension()&&n.length>4;i&&(r=this.getTensionPoints());var a,o,s=this.pointerLength(),h=n.length;if(i){const t=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],n[h-2],n[h-1]],e=he.calcLength(r[r.length-4],r[r.length-3],"C",t),i=he.getPointOnQuadraticBezier(Math.min(1,1-s/e),t[0],t[1],t[2],t[3],t[4],t[5]);a=n[h-2]-i.x,o=n[h-1]-i.y}else a=n[h-2]-n[h-4],o=n[h-1]-n[h-3];var u=(Math.atan2(o,a)+e)%e,l=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[h-2],n[h-1]),t.rotate(u),t.moveTo(0,0),t.lineTo(-s,l/2),t.lineTo(-s,-l/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),i?(a=(r[0]+r[2])/2-n[0],o=(r[1]+r[3])/2-n[1]):(a=n[2]-n[0],o=n[3]-n[1]),t.rotate((Math.atan2(-o,-a)+e)%e),t.moveTo(0,0),t.lineTo(-s,l/2),t.lineTo(-s,-l/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}ue.prototype.className="Arrow",o(ue),P.addGetterSetter(ue,"pointerLength",10,m()),P.addGetterSetter(ue,"pointerWidth",10,m()),P.addGetterSetter(ue,"pointerAtBeginning",!1),P.addGetterSetter(ue,"pointerAtEnding",!0);class le extends Ut{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}le.prototype._centroid=!0,le.prototype.className="Circle",le.prototype._attrsAffectingSize=["radius"],o(le),P.addGetterSetter(le,"radius",0,m());class ce extends Ut{_sceneFunc(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}ce.prototype.className="Ellipse",ce.prototype._centroid=!0,ce.prototype._attrsAffectingSize=["radiusX","radiusY"],o(ce),P.addComponentsGetterSetter(ce,"radius",["x","y"]),P.addGetterSetter(ce,"radiusX",0,m()),P.addGetterSetter(ce,"radiusY",0,m());class fe extends Ut{constructor(t){super(t),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),n=this.getHeight(),r=this.attrs.image;let i;if(r){const t=this.attrs.cropWidth,a=this.attrs.cropHeight;i=t&&a?[r,this.cropX(),this.cropY(),t,a,0,0,e,n]:[r,0,0,e,n]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)),r&&t.drawImage.apply(t,i)}_hitFunc(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,n=null){var r=p.createImageElement();r.onload=function(){var t=new fe({image:r});e(t)},r.onerror=n,r.crossOrigin="Anonymous",r.src=t}}fe.prototype.className="Image",o(fe),P.addGetterSetter(fe,"image"),P.addComponentsGetterSetter(fe,"crop",["x","y","width","height"]),P.addGetterSetter(fe,"cropX",0,m()),P.addGetterSetter(fe,"cropY",0,m()),P.addGetterSetter(fe,"cropWidth",0,m()),P.addGetterSetter(fe,"cropHeight",0,m());var de=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],ge="up",pe="right",ve="down",ye="left",me=de.length;class _e extends Vt{constructor(t){super(t),this.on("add.konva",(function(t){this._addListeners(t.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e,n=this,r=function(){n._sync()};for(e=0;e<me;e++)t.on(de[e]+"Change.konva",r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t,e,n,r,i,a,o,s=this.getText(),h=this.getTag();if(s&&h){switch(t=s.width(),e=s.height(),n=h.pointerDirection(),r=h.pointerWidth(),o=h.pointerHeight(),i=0,a=0,n){case ge:i=t/2,a=-1*o;break;case pe:i=t+r,a=e/2;break;case ve:i=t/2,a=e+o;break;case ye:i=-1*r,a=e/2}h.setAttrs({x:-1*i,y:-1*a,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*a})}}}_e.prototype.className="Label",o(_e);class be extends Ut{_sceneFunc(t){var e=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let s=0,h=0,u=0,l=0;"number"==typeof o?s=h=u=l=Math.min(o,e/2,n/2):(s=Math.min(o[0]||0,e/2,n/2),h=Math.min(o[1]||0,e/2,n/2),l=Math.min(o[2]||0,e/2,n/2),u=Math.min(o[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(s,0),r===ge&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*a),t.lineTo((e+i)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),r===pe&&(t.lineTo(e,(n-a)/2),t.lineTo(e+i,n/2),t.lineTo(e,(n+a)/2)),t.lineTo(e,n-l),t.arc(e-l,n-l,l,0,Math.PI/2,!1),r===ve&&(t.lineTo((e+i)/2,n),t.lineTo(e/2,n+a),t.lineTo((e-i)/2,n)),t.lineTo(u,n),t.arc(u,n-u,u,Math.PI/2,Math.PI,!1),r===ye&&(t.lineTo(0,(n+a)/2),t.lineTo(-1*i,n/2),t.lineTo(0,(n-a)/2)),t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),a=this.width(),o=this.height();return i===ge?(e-=r,o+=r):i===ve?o+=r:i===ye?(t-=1.5*n,a+=n):i===pe&&(a+=1.5*n),{x:t,y:e,width:a,height:o}}}be.prototype.className="Tag",o(be),P.addGetterSetter(be,"pointerDirection","none"),P.addGetterSetter(be,"pointerWidth",0,m()),P.addGetterSetter(be,"pointerHeight",0,m()),P.addGetterSetter(be,"cornerRadius",0,_(4));class xe extends Ut{_sceneFunc(t){var e=this.cornerRadius(),n=this.width(),r=this.height();if(t.beginPath(),e){let i=0,a=0,o=0,s=0;"number"==typeof e?i=a=o=s=Math.min(e,n/2,r/2):(i=Math.min(e[0]||0,n/2,r/2),a=Math.min(e[1]||0,n/2,r/2),s=Math.min(e[2]||0,n/2,r/2),o=Math.min(e[3]||0,n/2,r/2)),t.moveTo(i,0),t.lineTo(n-a,0),t.arc(n-a,a,a,3*Math.PI/2,0,!1),t.lineTo(n,r-s),t.arc(n-s,r-s,s,0,Math.PI/2,!1),t.lineTo(o,r),t.arc(o,r-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,r);t.closePath(),t.fillStrokeShape(this)}}xe.prototype.className="Rect",o(xe),P.addGetterSetter(xe,"cornerRadius",0,_(4));class we extends Ut{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,n=[];for(var r=0;r<t;r++)n.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();var e=t[0].x,n=t[0].y,r=t[0].x,i=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)})),{x:e,y:r,width:n-e,height:i-r}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}we.prototype.className="RegularPolygon",we.prototype._centroid=!0,we.prototype._attrsAffectingSize=["radius"],o(we),P.addGetterSetter(we,"radius",0,m()),P.addGetterSetter(we,"sides",0,m());var Se=2*Math.PI;class ke extends Ut{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Se,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Se,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ke.prototype.className="Ring",ke.prototype._centroid=!0,ke.prototype._attrsAffectingSize=["innerRadius","outerRadius"],o(ke),P.addGetterSetter(ke,"innerRadius",0,m()),P.addGetterSetter(ke,"outerRadius",0,m());class Ce extends Ut{constructor(t){super(t),this._updated=!0,this.anim=new $t((()=>{var t=this._updated;return this._updated=!1,t})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],a=this.frameOffsets(),o=i[r+0],s=i[r+1],h=i[r+2],u=i[r+3],l=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,u),t.closePath(),t.fillStrokeShape(this)),l)if(a){var c=a[e],f=2*n;t.drawImage(l,o,s,h,u,c[f+0],c[f+1],h,u)}else t.drawImage(l,o,s,h,u,0,0,h,u)}_hitFunc(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],a=this.frameOffsets(),o=i[r+2],s=i[r+3];if(t.beginPath(),a){var h=a[e],u=2*n;t.rect(h[u+0],h[u+1],o,s)}else t.rect(0,0,o,s);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}Ce.prototype.className="Sprite",o(Ce),P.addGetterSetter(Ce,"animation"),P.addGetterSetter(Ce,"animations"),P.addGetterSetter(Ce,"frameOffsets"),P.addGetterSetter(Ce,"image"),P.addGetterSetter(Ce,"frameIndex",0,m()),P.addGetterSetter(Ce,"frameRate",17,m()),P.backCompat(Ce,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Pe extends Ut{_sceneFunc(t){var e=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var i=1;i<2*r;i++){var a=i%2==0?n:e,o=a*Math.sin(i*Math.PI/r),s=-1*a*Math.cos(i*Math.PI/r);t.lineTo(o,s)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}function Oe(t){return Array.from(t)}Pe.prototype.className="Star",Pe.prototype._centroid=!0,Pe.prototype._attrsAffectingSize=["innerRadius","outerRadius"],o(Pe),P.addGetterSetter(Pe,"numPoints",5,m()),P.addGetterSetter(Pe,"innerRadius",0,m()),P.addGetterSetter(Pe,"outerRadius",0,m());var Ae,Te="auto",Re="justify",Le="left",Ee="middle",Me="normal",De=" ",Ie=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],je=Ie.length;function Ge(){return Ae||(Ae=p.createCanvasElement().getContext("2d"))}class Ne extends Ut{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(var e=0;e<je;e++)this.on(Ie[e]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,n=e.length;if(this.text()){var r,i=this.padding(),a=this.fontSize(),o=this.lineHeight()*a,s=this.verticalAlign(),h=0,u=this.align(),l=this.getWidth(),c=this.letterSpacing(),f=this.fill(),d=this.textDecoration(),g=-1!==d.indexOf("underline"),p=-1!==d.indexOf("line-through"),v=0,y=(v=o/2,0),m=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",Ee),t.setAttr("textAlign",Le),s===Ee?h=(this.getHeight()-n*o-2*i)/2:"bottom"===s&&(h=this.getHeight()-n*o-2*i),t.translate(i,h+i),r=0;r<n;r++){y=0,m=0;var _,b,x,w=e[r],S=w.text,k=w.width,C=w.lastInParagraph;if(t.save(),"right"===u?y+=l-k-2*i:"center"===u&&(y+=(l-k-2*i)/2),g&&(t.save(),t.beginPath(),t.moveTo(y,v+m+Math.round(a/2)),b=0==(_=S.split(" ").length-1),x=u===Re&&C&&!b?l-2*i:k,t.lineTo(y+Math.round(x),v+m+Math.round(a/2)),t.lineWidth=a/15,t.strokeStyle=f,t.stroke(),t.restore()),p&&(t.save(),t.beginPath(),t.moveTo(y,v+m),b=0==(_=S.split(" ").length-1),x=u===Re&&C&&!b?l-2*i:k,t.lineTo(y+Math.round(x),v+m),t.lineWidth=a/15,t.strokeStyle=f,t.stroke(),t.restore()),0!==c||u===Re){_=S.split(" ").length-1;for(var P=Oe(S),O=0;O<P.length;O++){var A=P[O];" "!==A||C||u!==Re||(y+=(l-2*i-k)/_),this._partialTextX=y,this._partialTextY=v+m,this._partialText=A,t.fillStrokeShape(this),y+=this.measureSize(A).width+c}}else this._partialTextX=y,this._partialTextY=v+m,this._partialText=S,t.fillStrokeShape(this);t.restore(),n>1&&(v+=o)}}}_hitFunc(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}setText(t){var e=p._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===Te||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===Te||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return p.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,n=Ge(),r=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:r}}_getContextFont(){return this.fontStyle()+De+this.fontVariant()+De+(this.fontSize()+"px ")+this.fontFamily().split(",").map((t=>{const e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t=`"${t}"`),t})).join(", ")}_addTextLine(t){this.align()===Re&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}_getTextWidth(t){var e=this.letterSpacing(),n=t.length;return Ge().measureText(t).width+(n?e*(n-1):0)}_setTextData(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,r=this.lineHeight()*e,i=this.attrs.width,a=this.attrs.height,o=i!==Te&&void 0!==i,s=a!==Te&&void 0!==a,h=this.padding(),u=i-2*h,l=a-2*h,c=0,f=this.wrap(),d="none"!==f,g="char"!==f&&d,p=this.ellipsis();this.textArr=[],Ge().font=this._getContextFont();for(var v=p?this._getTextWidth(""):0,y=0,m=t.length;y<m;++y){var _=t[y],b=this._getTextWidth(_);if(o&&b>u)for(;_.length>0;){for(var x=0,w=_.length,S="",k=0;x<w;){var C=x+w>>>1,P=_.slice(0,C+1),O=this._getTextWidth(P)+v;O<=u?(x=C+1,S=P,k=O):w=C}if(!S)break;if(g){var A,T=_[S.length];(A=(T===De||"-"===T)&&k<=u?S.length:Math.max(S.lastIndexOf(De),S.lastIndexOf("-"))+1)>0&&(x=A,S=S.slice(0,x),k=this._getTextWidth(S))}if(S=S.trimRight(),this._addTextLine(S),n=Math.max(n,k),c+=r,!d||s&&c+r>l){var R=this.textArr[this.textArr.length-1];R&&p&&(this._getTextWidth(R.text+"")<u||(R.text=R.text.slice(0,R.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(R.text+""));break}if((_=(_=_.slice(x)).trimLeft()).length>0&&(b=this._getTextWidth(_))<=u){this._addTextLine(_),c+=r,n=Math.max(n,b);break}}else this._addTextLine(_),c+=r,n=Math.max(n,b);if(s&&c+r>l)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=e,this.textWidth=n}getStrokeScaleEnabled(){return!0}}Ne.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},Ne.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},Ne.prototype.className="Text",Ne.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],o(Ne),P.overWriteSetter(Ne,"width",b()),P.overWriteSetter(Ne,"height",b()),P.addGetterSetter(Ne,"fontFamily","Arial"),P.addGetterSetter(Ne,"fontSize",12,m()),P.addGetterSetter(Ne,"fontStyle",Me),P.addGetterSetter(Ne,"fontVariant",Me),P.addGetterSetter(Ne,"padding",0,m()),P.addGetterSetter(Ne,"align",Le),P.addGetterSetter(Ne,"verticalAlign","top"),P.addGetterSetter(Ne,"lineHeight",1,m()),P.addGetterSetter(Ne,"wrap","word"),P.addGetterSetter(Ne,"ellipsis",!1,S()),P.addGetterSetter(Ne,"letterSpacing",0,m()),P.addGetterSetter(Ne,"text","",x()),P.addGetterSetter(Ne,"textDecoration","");var Fe="normal";function Be(t){t.fillText(this.partialText,0,0)}function ze(t){t.strokeText(this.partialText,0,0)}class We extends Ut{constructor(t){super(t),this.dummyCanvas=p.createCanvasElement(),this.dataArray=[],this.dataArray=he.parsePathData(this.attrs.data),this.on("dataChange.konva",(function(){this.dataArray=he.parsePathData(this.attrs.data),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var a=0;a<i.length;a++){t.save();var o=i[a].p0;t.translate(o.x,o.y),t.rotate(i[a].rotation),this.partialText=i[a].text,t.fillStrokeShape(this),"underline"===e&&(0===a&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=r/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var r=0;r<e.length;r++){var i=e[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return p.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Ne.prototype.setText.call(this,t)}_getContextFont(){return Ne.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),r=this.align(),i=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var o=0,s=0;s<t.dataArray.length;s++)t.dataArray[s].pathLength>0&&(o+=t.dataArray[s].pathLength);var h=0;"center"===r&&(h=Math.max(0,o/2-a/2)),"right"===r&&(h=Math.max(0,o-a));for(var u,l,c,f=Oe(this.text()),d=this.text().split(" ").length-1,g=-1,p=0,v=function(){p=0;for(var e=t.dataArray,n=g+1;n<e.length;n++){if(e[n].pathLength>0)return g=n,e[n];"M"===e[n].command&&(u={x:e[n].points[0],y:e[n].points[1]})}return{}},y=function(e){var i=t._getTextSize(e).width+n;" "===e&&"justify"===r&&(i+=(o-a)/d);var s=0,h=0;for(l=void 0;Math.abs(i-s)/i>.01&&h<20;){h++;for(var f=s;void 0===c;)(c=v())&&f+c.pathLength<i&&(f+=c.pathLength,c=void 0);if(c==={}||void 0===u)return;var g=!1;switch(c.command){case"L":he.getLineLength(u.x,u.y,c.points[0],c.points[1])>i?l=he.getPointOnLine(i,u.x,u.y,c.points[0],c.points[1],u.x,u.y):c=void 0;break;case"A":var y=c.points[4],m=c.points[5],_=c.points[4]+m;0===p?p=y+1e-8:i>s?p+=Math.PI/180*m/Math.abs(m):p-=Math.PI/360*m/Math.abs(m),(m<0&&p<_||m>=0&&p>_)&&(p=_,g=!0),l=he.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],p,c.points[6]);break;case"C":0===p?p=i>c.pathLength?1e-8:i/c.pathLength:i>s?p+=(i-s)/c.pathLength/2:p=Math.max(p-(s-i)/c.pathLength/2,0),p>1&&(p=1,g=!0),l=he.getPointOnCubicBezier(p,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);break;case"Q":0===p?p=i/c.pathLength:i>s?p+=(i-s)/c.pathLength:p-=(s-i)/c.pathLength,p>1&&(p=1,g=!0),l=he.getPointOnQuadraticBezier(p,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3])}void 0!==l&&(s=he.getLineLength(u.x,u.y,l.x,l.y)),g&&(g=!1,c=void 0)}},m=h/(t._getTextSize("C").width+n)-1,_=0;_<m&&(y("C"),void 0!==u&&void 0!==l);_++)u=l;for(var b=0;b<f.length&&(y(f[b]),void 0!==u&&void 0!==l);b++){var x=he.getLineLength(u.x,u.y,l.x,l.y),w=0;if(i)try{w=i(f[b-1],f[b])*this.fontSize()}catch(t){w=0}u.x+=w,l.x+=w,this.textWidth+=w;var S=he.getPointOnLine(w+x/2,u.x,u.y,l.x,l.y),k=Math.atan2(l.y-u.y,l.x-u.x);this.glyphInfo.push({transposeX:S.x,transposeY:S.y,text:f[b],rotation:k,p0:u,p1:l}),u=l}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,n,r=t[0]||0,i=t[0]||0,a=t[1]||0,o=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),a=Math.min(a,n),o=Math.max(o,n);var h=this.fontSize();return{x:r-h/2,y:a-h/2,width:i-r+h,height:o-a+h}}}We.prototype._fillFunc=Be,We.prototype._strokeFunc=ze,We.prototype._fillFuncHit=Be,We.prototype._strokeFuncHit=ze,We.prototype.className="TextPath",We.prototype._attrsAffectingSize=["text","fontSize","data"],o(We),P.addGetterSetter(We,"data"),P.addGetterSetter(We,"fontFamily","Arial"),P.addGetterSetter(We,"fontSize",12,m()),P.addGetterSetter(We,"fontStyle",Fe),P.addGetterSetter(We,"align","left"),P.addGetterSetter(We,"letterSpacing",0,m()),P.addGetterSetter(We,"textBaseline","middle"),P.addGetterSetter(We,"fontVariant",Fe),P.addGetterSetter(We,"text",""),P.addGetterSetter(We,"textDecoration",null),P.addGetterSetter(We,"kerningFunc",null);var Ue=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((t=>t+".tr-konva")).join(" "),He="nodesRect",Ye=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],qe={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Xe="ontouchstart"in a._global;var Ve=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Ke(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:i})}class $e extends Vt{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Ue,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return p.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return"tr-konva"+this._id}setNodes(t=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((t=>{const e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},n=t._attrsAffectingSize.map((t=>t+"Change."+this._getEventNamespace())).join(" ");t.on(n,e),t.on(Ye.map((t=>t+`.${this._getEventNamespace()}`)).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,(n=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(n,!1)})),t.on(`dragmove.${this._getEventNamespace()}`,(n=>{if(!e)return;const r=t.getAbsolutePosition(),i=r.x-e.x,a=r.y-e.y;this.nodes().forEach((e=>{if(e===t)return;if(e.isDragging())return;const r=e.getAbsolutePosition();e.setAbsolutePosition({x:r.x+i,y:r.y+a}),e.startDrag(n)})),e=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((t=>{t.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(He),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(He,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),s=r.x*i.x-t.offsetX()*i.x,h=r.y*i.y-t.offsetY()*i.y;const u=(a.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return Ke({x:o.x+s*Math.cos(u)+h*Math.sin(-u),y:o.y+h*Math.cos(u)+s*Math.sin(u),width:r.width*i.x,height:r.height*i.y,rotation:u},-a.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map((e=>{const n=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var r=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],i=e.getAbsoluteTransform();r.forEach((function(e){var n=i.point(e);t.push(n)}))}));const e=new s;var n,r,i,o;e.rotate(-a.getAngle(this.rotation())),t.forEach((function(t){var a=e.point(t);void 0===n&&(n=i=a.x,r=o=a.y),n=Math.min(n,a.x),r=Math.min(r,a.y),i=Math.max(i,a.x),o=Math.max(o,a.y)})),e.invert();const h=e.point({x:n,y:r});return{x:h.x,y:h.y,width:i-n,height:o-r,rotation:a.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ve.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var e=new xe({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Xe?10:"auto"}),n=this;e.on("mousedown touchstart",(function(t){n._handleMouseDown(t)})),e.on("dragstart",(t=>{e.stopDrag(),t.cancelBubble=!0})),e.on("dragend",(t=>{t.cancelBubble=!0})),e.on("mouseenter",(()=>{var n=a.getAngle(this.rotation()),r=function(t,e){if("rotater"===t)return"crosshair";e+=p.degToRad(qe[t]||0);var n=(p.radToDeg(e)%360+360)%360;return p._inRange(n,337.5,360)||p._inRange(n,0,22.5)?"ns-resize":p._inRange(n,22.5,67.5)?"nesw-resize":p._inRange(n,67.5,112.5)?"ew-resize":p._inRange(n,112.5,157.5)?"nwse-resize":p._inRange(n,157.5,202.5)?"ns-resize":p._inRange(n,202.5,247.5)?"nesw-resize":p._inRange(n,247.5,292.5)?"ew-resize":p._inRange(n,292.5,337.5)?"nwse-resize":(p.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,n);e.getStage().content&&(e.getStage().content.style.cursor=r),this._cursorChange=!0})),e.on("mouseout",(()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(e)}_createBack(){var t=new Ut({name:"back",width:0,height:0,draggable:!0,sceneFunc(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*p._sign(this.height())-n),t.fillStrokeShape(this)},hitFunc:(t,e)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();t.beginPath(),t.rect(-n,-n,e.width()+2*n,e.height()+2*n),t.fillStrokeShape(e)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",(t=>{t.cancelBubble=!0})),t.on("dragmove",(t=>{t.cancelBubble=!0})),t.on("dragend",(t=>{t.cancelBubble=!0})),this.on("dragmove",(t=>{this.update()}))}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((e=>{e._fire("transformstart",{evt:t.evt,target:e})}))}_handleMouseMove(t){var e,n,r,i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(t);const s=o.getPointerPosition();let h={x:s.x-this._anchorDragOffset.x,y:s.y-this._anchorDragOffset.y};const u=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(u,h,t)),i.setAbsolutePosition(h);const l=i.getAbsolutePosition();if(u.x!==l.x||u.y!==l.y)if("rotater"!==this._movingAnchorName){var c=this.keepRatio()||t.shiftKey,f=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(c){var d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(d.y-i.y(),2));var g=this.findOne(".top-left").x()>d.x?-1:1,p=this.findOne(".top-left").y()>d.y?-1:1;e=r*this.cos*g,n=r*this.sin*p,this.findOne(".top-left").x(d.x-e),this.findOne(".top-left").y(d.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){c&&(d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},r=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(d.y-i.y(),2)),g=this.findOne(".top-right").x()<d.x?-1:1,p=this.findOne(".top-right").y()>d.y?-1:1,e=r*this.cos*g,n=r*this.sin*p,this.findOne(".top-right").x(d.x+e),this.findOne(".top-right").y(d.y-n));var v=i.position();this.findOne(".top-left").y(v.y),this.findOne(".bottom-right").x(v.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(i.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(i.x()):"bottom-left"===this._movingAnchorName?(c&&(d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},r=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(i.y()-d.y,2)),g=d.x<i.x()?-1:1,p=i.y()<d.y?-1:1,e=r*this.cos*g,n=r*this.sin*p,i.x(d.x-e),i.y(d.y+n)),v=i.position(),this.findOne(".top-left").x(v.x),this.findOne(".bottom-right").y(v.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(i.y()):"bottom-right"===this._movingAnchorName?c&&(d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},r=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(i.y()-d.y,2)),g=this.findOne(".bottom-right").x()<d.x?-1:1,p=this.findOne(".bottom-right").y()<d.y?-1:1,e=r*this.cos*g,n=r*this.sin*p,this.findOne(".bottom-right").x(d.x+e),this.findOne(".bottom-right").y(d.y+n)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||t.altKey){var y=this.findOne(".top-left"),m=this.findOne(".bottom-right"),_=y.x(),b=y.y(),x=this.getWidth()-m.x(),w=this.getHeight()-m.y();m.move({x:-_,y:-b}),y.move({x,y:w})}var S=this.findOne(".top-left").getAbsolutePosition();e=S.x,n=S.y;var k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:k,height:C,rotation:a.getAngle(this.rotation())},t)}else{var P=this._getNodeRect();e=i.x()-P.width/2,n=-i.y()+P.height/2;let r=Math.atan2(-n,e)+Math.PI/2;P.height<0&&(r-=Math.PI);const o=a.getAngle(this.rotation())+r,s=a.getAngle(this.rotationSnapTolerance()),h=function(t,e){return Ke(t,e,function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t))}(P,function(t,e,n){let r=e;for(let i=0;i<t.length;i++){const o=a.getAngle(t[i]),s=Math.abs(o-e)%(2*Math.PI);Math.min(s,2*Math.PI-s)<n&&(r=o)}return r}(this.rotationSnaps(),o,s)-P.rotation);this._fitNodesInto(h,t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((e=>{e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();if(p._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(p._inRange(t.height,2*-this.padding()-1,1))return void this.update();const r=this.flipEnabled();var i=new s;if(i.rotate(a.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=i.point({x:2*-this.padding(),y:0});if(t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,!r)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=i.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding(),!r)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=i.point({x:0,y:2*-this.padding()});if(t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!r)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=i.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!r)return void this.update()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(n,t);e?t=e:p.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,h=new s;h.translate(n.x,n.y),h.rotate(n.rotation),h.scale(n.width/o,n.height/o);const u=new s;u.translate(t.x,t.y),u.rotate(t.rotation),u.scale(t.width/o,t.height/o);const l=u.multiply(h.invert());this._nodes.forEach((t=>{var n;const r=t.getParent().getAbsoluteTransform(),i=t.getTransform().copy();i.translate(t.offsetX(),t.offsetY());const a=new s;a.multiply(r.copy().invert()).multiply(l).multiply(r).multiply(i);const o=a.decompose();t.setAttrs(o),this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()})),this.rotation(p._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(p._getRotation(e.rotation));var n=e.width,r=e.height,i=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),s=this.anchorSize();this.find("._anchor").forEach((t=>{t.setAttrs({width:s,height:s,offsetX:s/2,offsetY:s/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:s/2+o,offsetY:s/2+o,visible:a&&i.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:s/2+o,visible:a&&i.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:s/2-o,offsetY:s/2+o,visible:a&&i.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:s/2+o,visible:a&&i.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:s/2-o,visible:a&&i.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:s/2+o,offsetY:s/2-o,visible:a&&i.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:s/2-o,visible:a&&i.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:s/2-o,offsetY:s/2-o,visible:a&&i.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*p._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Vt.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Q.prototype.toObject.call(this)}}$e.prototype.className="Transformer",o($e),P.addGetterSetter($e,"enabledAnchors",Ve,(function(t){return t instanceof Array||p.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===Ve.indexOf(t)&&p.warn("Unknown anchor name: "+t+". Available names are: "+Ve.join(", "))})),t||[]})),P.addGetterSetter($e,"flipEnabled",!0,S()),P.addGetterSetter($e,"resizeEnabled",!0),P.addGetterSetter($e,"anchorSize",10,m()),P.addGetterSetter($e,"rotateEnabled",!0),P.addGetterSetter($e,"rotationSnaps",[]),P.addGetterSetter($e,"rotateAnchorOffset",50,m()),P.addGetterSetter($e,"rotationSnapTolerance",5,m()),P.addGetterSetter($e,"borderEnabled",!0),P.addGetterSetter($e,"anchorStroke","rgb(0, 161, 255)"),P.addGetterSetter($e,"anchorStrokeWidth",1,m()),P.addGetterSetter($e,"anchorFill","white"),P.addGetterSetter($e,"anchorCornerRadius",0,m()),P.addGetterSetter($e,"borderStroke","rgb(0, 161, 255)"),P.addGetterSetter($e,"borderStrokeWidth",1,m()),P.addGetterSetter($e,"borderDash"),P.addGetterSetter($e,"keepRatio",!0),P.addGetterSetter($e,"centeredScaling",!1),P.addGetterSetter($e,"ignoreStroke",!1),P.addGetterSetter($e,"padding",0,m()),P.addGetterSetter($e,"node"),P.addGetterSetter($e,"nodes"),P.addGetterSetter($e,"boundBoxFunc"),P.addGetterSetter($e,"anchorDragBoundFunc"),P.addGetterSetter($e,"shouldOverdrawWholeArea",!1),P.addGetterSetter($e,"useSingleNodeRotation",!0),P.backCompat($e,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Je extends Ut{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,a.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}function Qe(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Je.prototype.className="Wedge",Je.prototype._centroid=!0,Je.prototype._attrsAffectingSize=["radius"],o(Je),P.addGetterSetter(Je,"radius",0,m()),P.addGetterSetter(Je,"angle",0,m()),P.addGetterSetter(Je,"clockwise",!1),P.backCompat(Je,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Ze=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],tn=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function en(t,e,n,r,i){var a=n-e,o=i-r;return 0===a?r+o/2:0===o?r:o*((t-e)/a)+r}function nn(t,e,n){var r=4*(n*t.width+e),i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function rn(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}P.addGetterSetter(Q,"blurRadius",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"brightness",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"contrast",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"embossStrength",.5,m(),P.afterSetFilter),P.addGetterSetter(Q,"embossWhiteLevel",.5,m(),P.afterSetFilter),P.addGetterSetter(Q,"embossDirection","top-left",null,P.afterSetFilter),P.addGetterSetter(Q,"embossBlend",!1,null,P.afterSetFilter),P.addGetterSetter(Q,"enhance",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"hue",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"saturation",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"luminance",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"hue",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"saturation",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"value",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"kaleidoscopePower",2,m(),P.afterSetFilter),P.addGetterSetter(Q,"kaleidoscopeAngle",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"threshold",0,m(),P.afterSetFilter),P.addGetterSetter(Q,"noise",.2,m(),P.afterSetFilter),P.addGetterSetter(Q,"pixelSize",8,m(),P.afterSetFilter),P.addGetterSetter(Q,"levels",.5,m(),P.afterSetFilter),P.addGetterSetter(Q,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),P.addGetterSetter(Q,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),P.addGetterSetter(Q,"blue",0,y,P.afterSetFilter),P.addGetterSetter(Q,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),P.addGetterSetter(Q,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),P.addGetterSetter(Q,"blue",0,y,P.afterSetFilter),P.addGetterSetter(Q,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})),P.addGetterSetter(Q,"threshold",.5,m(),P.afterSetFilter);const an=re.Util._assign(re,{Arc:ie,Arrow:ue,Circle:le,Ellipse:ce,Image:fe,Label:_e,Tag:be,Line:se,Path:he,Rect:xe,RegularPolygon:we,Ring:ke,Sprite:Ce,Star:Pe,Text:Ne,TextPath:We,Transformer:$e,Wedge:Je,Filters:{Blur:function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,r,i,a,o,s,h,u,l,c,f,d,g,p,v,y,m,_,b,x,w,S,k,C,P=t.data,O=t.width,A=t.height,T=e+e+1,R=O-1,L=A-1,E=e+1,M=E*(E+1)/2,D=new Qe,I=null,j=D,G=null,N=null,F=Ze[e],B=tn[e];for(i=1;i<T;i++)j=j.next=new Qe,i===E&&(I=j);for(j.next=D,h=s=0,r=0;r<A;r++){for(y=m=_=b=u=l=c=f=0,d=E*(x=P[s]),g=E*(w=P[s+1]),p=E*(S=P[s+2]),v=E*(k=P[s+3]),u+=M*x,l+=M*w,c+=M*S,f+=M*k,j=D,i=0;i<E;i++)j.r=x,j.g=w,j.b=S,j.a=k,j=j.next;for(i=1;i<E;i++)a=s+((R<i?R:i)<<2),u+=(j.r=x=P[a])*(C=E-i),l+=(j.g=w=P[a+1])*C,c+=(j.b=S=P[a+2])*C,f+=(j.a=k=P[a+3])*C,y+=x,m+=w,_+=S,b+=k,j=j.next;for(G=D,N=I,n=0;n<O;n++)P[s+3]=k=f*F>>B,0!==k?(k=255/k,P[s]=(u*F>>B)*k,P[s+1]=(l*F>>B)*k,P[s+2]=(c*F>>B)*k):P[s]=P[s+1]=P[s+2]=0,u-=d,l-=g,c-=p,f-=v,d-=G.r,g-=G.g,p-=G.b,v-=G.a,a=h+((a=n+e+1)<R?a:R)<<2,u+=y+=G.r=P[a],l+=m+=G.g=P[a+1],c+=_+=G.b=P[a+2],f+=b+=G.a=P[a+3],G=G.next,d+=x=N.r,g+=w=N.g,p+=S=N.b,v+=k=N.a,y-=x,m-=w,_-=S,b-=k,N=N.next,s+=4;h+=O}for(n=0;n<O;n++){for(m=_=b=y=l=c=f=u=0,d=E*(x=P[s=n<<2]),g=E*(w=P[s+1]),p=E*(S=P[s+2]),v=E*(k=P[s+3]),u+=M*x,l+=M*w,c+=M*S,f+=M*k,j=D,i=0;i<E;i++)j.r=x,j.g=w,j.b=S,j.a=k,j=j.next;for(o=O,i=1;i<=e;i++)s=o+n<<2,u+=(j.r=x=P[s])*(C=E-i),l+=(j.g=w=P[s+1])*C,c+=(j.b=S=P[s+2])*C,f+=(j.a=k=P[s+3])*C,y+=x,m+=w,_+=S,b+=k,j=j.next,i<L&&(o+=O);for(s=n,G=D,N=I,r=0;r<A;r++)P[3+(a=s<<2)]=k=f*F>>B,k>0?(k=255/k,P[a]=(u*F>>B)*k,P[a+1]=(l*F>>B)*k,P[a+2]=(c*F>>B)*k):P[a]=P[a+1]=P[a+2]=0,u-=d,l-=g,c-=p,f-=v,d-=G.r,g-=G.g,p-=G.b,v-=G.a,a=n+((a=r+E)<L?a:L)*O<<2,u+=y+=G.r=P[a],l+=m+=G.g=P[a+1],c+=_+=G.b=P[a+2],f+=b+=G.a=P[a+3],G=G.next,d+=x=N.r,g+=w=N.g,p+=S=N.b,v+=k=N.a,y-=x,m-=w,_-=S,b-=k,N=N.next,s+=O}}(t,e)},Brighten:function(t){var e,n=255*this.brightness(),r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=n,r[e+1]+=n,r[e+2]+=n},Contrast:function(t){var e,n=Math.pow((this.contrast()+100)/100,2),r=t.data,i=r.length,a=150,o=150,s=150;for(e=0;e<i;e+=4)a=r[e],o=r[e+1],s=r[e+2],a/=255,a-=.5,a*=n,a+=.5,o/=255,o-=.5,o*=n,o+=.5,s/=255,s-=.5,s*=n,s+=.5,a=(a*=255)<0?0:a>255?255:a,o=(o*=255)<0?0:o>255?255:o,s=(s*=255)<0?0:s>255?255:s,r[e]=a,r[e+1]=o,r[e+2]=s},Emboss:function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),a=0,o=0,s=t.data,h=t.width,u=t.height,l=4*h,c=u;switch(r){case"top-left":a=-1,o=-1;break;case"top":a=-1,o=0;break;case"top-right":a=-1,o=1;break;case"right":a=0,o=1;break;case"bottom-right":a=1,o=1;break;case"bottom":a=1,o=0;break;case"bottom-left":a=1,o=-1;break;case"left":a=0,o=-1;break;default:p.error("Unknown emboss direction: "+r)}do{var f=(c-1)*l,d=a;c+d<1&&(d=0),c+d>u&&(d=0);var g=(c-1+d)*h*4,v=h;do{var y=f+4*(v-1),m=o;v+m<1&&(m=0),v+m>h&&(m=0);var _=g+4*(v-1+m),b=s[y]-s[_],x=s[y+1]-s[_+1],w=s[y+2]-s[_+2],S=b,k=S>0?S:-S;if((x>0?x:-x)>k&&(S=x),(w>0?w:-w)>k&&(S=w),S*=e,i){var C=s[y]+S,P=s[y+1]+S,O=s[y+2]+S;s[y]=C>255?255:C<0?0:C,s[y+1]=P>255?255:P<0?0:P,s[y+2]=O>255?255:O<0?0:O}else{var A=n-S;A<0?A=0:A>255&&(A=255),s[y]=s[y+1]=s[y+2]=A}}while(--v)}while(--c)},Enhance:function(t){var e,n,r,i,a=t.data,o=a.length,s=a[0],h=s,u=a[1],l=u,c=a[2],f=c,d=this.enhance();if(0!==d){for(i=0;i<o;i+=4)(e=a[i+0])<s?s=e:e>h&&(h=e),(n=a[i+1])<u?u=n:n>l&&(l=n),(r=a[i+2])<c?c=r:r>f&&(f=r);var g,p,v,y,m,_,b,x,w;for(h===s&&(h=255,s=0),l===u&&(l=255,u=0),f===c&&(f=255,c=0),d>0?(p=h+d*(255-h),v=s-d*(s-0),m=l+d*(255-l),_=u-d*(u-0),x=f+d*(255-f),w=c-d*(c-0)):(p=h+d*(h-(g=.5*(h+s))),v=s+d*(s-g),m=l+d*(l-(y=.5*(l+u))),_=u+d*(u-y),x=f+d*(f-(b=.5*(f+c))),w=c+d*(c-b)),i=0;i<o;i+=4)a[i+0]=en(a[i+0],s,h,v,p),a[i+1]=en(a[i+1],u,l,_,m),a[i+2]=en(a[i+2],c,f,w,x)}},Grayscale:function(t){var e,n,r=t.data,i=r.length;for(e=0;e<i;e+=4)n=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=n,r[e+1]=n,r[e+2]=n},HSL:function(t){var e,n,r,i,a,o=t.data,s=o.length,h=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,l=127*this.luminance(),c=1*h*Math.cos(u*Math.PI/180),f=1*h*Math.sin(u*Math.PI/180),d=.299+.701*c+.167*f,g=.587-.587*c+.33*f,p=.114-.114*c-.497*f,v=.299-.299*c-.328*f,y=.587+.413*c+.035*f,m=.114-.114*c+.293*f,_=.299-.3*c+1.25*f,b=.587-.586*c-1.05*f,x=.114+.886*c-.2*f;for(e=0;e<s;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],a=o[e+3],o[e+0]=d*n+g*r+p*i+l,o[e+1]=v*n+y*r+m*i+l,o[e+2]=_*n+b*r+x*i+l,o[e+3]=a},HSV:function(t){var e,n,r,i,a,o=t.data,s=o.length,h=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=h*u*Math.cos(l*Math.PI/180),f=h*u*Math.sin(l*Math.PI/180),d=.299*h+.701*c+.167*f,g=.587*h-.587*c+.33*f,p=.114*h-.114*c-.497*f,v=.299*h-.299*c-.328*f,y=.587*h+.413*c+.035*f,m=.114*h-.114*c+.293*f,_=.299*h-.3*c+1.25*f,b=.587*h-.586*c-1.05*f,x=.114*h+.886*c-.2*f;for(e=0;e<s;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],a=o[e+3],o[e+0]=d*n+g*r+p*i,o[e+1]=v*n+y*r+m*i,o[e+2]=_*n+b*r+x*i,o[e+3]=a},Invert:function(t){var e,n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},Kaleidoscope:function(t){var e,n,r,i,a,o,s,h,u,l=t.width,c=t.height,f=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),g=Math.floor(l*(d%360)/360);if(!(f<1)){var v=p.createCanvasElement();v.width=l,v.height=c;var y=v.getContext("2d").getImageData(0,0,l,c);!function(t,e,n){var r,i,a,o,s=t.data,h=e.data,u=t.width,l=t.height,c=n.polarCenterX||u/2,f=n.polarCenterY||l/2,d=0,g=0,p=0,v=0,y=Math.sqrt(c*c+f*f);i=u-c,a=l-f,y=(o=Math.sqrt(i*i+a*a))>y?o:y;var m,_,b,x,w=l,S=u,k=360/S*Math.PI/180;for(_=0;_<S;_+=1)for(b=Math.sin(_*k),x=Math.cos(_*k),m=0;m<w;m+=1)i=Math.floor(c+y*m/w*x),d=s[0+(r=4*((a=Math.floor(f+y*m/w*b))*u+i))],g=s[r+1],p=s[r+2],v=s[r+3],h[0+(r=4*(_+m*u))]=d,h[r+1]=g,h[r+2]=p,h[r+3]=v}(t,y,{polarCenterX:l/2,polarCenterY:c/2});for(var m=l/Math.pow(2,f);m<=8;)m*=2,f-=1;var _=m=Math.ceil(m),b=0,x=_,w=1;for(g+m>l&&(b=_,x=0,w=-1),n=0;n<c;n+=1)for(e=b;e!==x;e+=w)h=4*(l*n+Math.round(e+g)%l),i=y.data[h+0],a=y.data[h+1],o=y.data[h+2],s=y.data[h+3],u=4*(l*n+e),y.data[u+0]=i,y.data[u+1]=a,y.data[u+2]=o,y.data[u+3]=s;for(n=0;n<c;n+=1)for(_=Math.floor(m),r=0;r<f;r+=1){for(e=0;e<_+1;e+=1)h=4*(l*n+e),i=y.data[h+0],a=y.data[h+1],o=y.data[h+2],s=y.data[h+3],u=4*(l*n+2*_-e-1),y.data[u+0]=i,y.data[u+1]=a,y.data[u+2]=o,y.data[u+3]=s;_*=2}!function(t,e,n){var r,i,a,o,s,h,u=t.data,l=e.data,c=t.width,f=t.height,d=n.polarCenterX||c/2,g=n.polarCenterY||f/2,p=0,v=0,y=0,m=0,_=Math.sqrt(d*d+g*g);i=c-d,a=f-g,_=(h=Math.sqrt(i*i+a*a))>_?h:_;var b,x,w,S=f,k=c,C=n.polarRotation||0;for(i=0;i<c;i+=1)for(a=0;a<f;a+=1)o=i-d,s=a-g,b=Math.sqrt(o*o+s*s)*S/_,x=(x=(180*Math.atan2(s,o)/Math.PI+360+C)%360)*k/360,w=Math.floor(x),p=u[0+(r=4*(Math.floor(b)*c+w))],v=u[r+1],y=u[r+2],m=u[r+3],l[0+(r=4*(a*c+i))]=p,l[r+1]=v,l[r+2]=y,l[r+3]=m}(y,t,{polarRotation:0})}},Mask:function(t){var e=function(t,e){var n=nn(t,0,0),r=nn(t,t.width-1,0),i=nn(t,0,t.height-1),a=nn(t,t.width-1,t.height-1),o=e||10;if(rn(n,r)<o&&rn(r,a)<o&&rn(a,i)<o&&rn(i,n)<o){for(var s=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,n,a,i]),h=[],u=0;u<t.width*t.height;u++){var l=rn(s,[t.data[4*u],t.data[4*u+1],t.data[4*u+2]]);h[u]=l<o?0:255}return h}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var h=0;h<e;h++){for(var u=s*e+h,l=0,c=0;c<i;c++)for(var f=0;f<i;f++){var d=s+c-a,g=h+f-a;if(d>=0&&d<n&&g>=0&&g<e){var p=r[c*i+f];l+=t[d*e+g]*p}}o[u]=l}return o}(e=function(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var h=0;h<e;h++){for(var u=s*e+h,l=0,c=0;c<i;c++)for(var f=0;f<i;f++){var d=s+c-a,g=h+f-a;if(d>=0&&d<n&&g>=0&&g<e){var p=r[c*i+f];l+=t[d*e+g]*p}}o[u]=l>=1020?255:0}return o}(e=function(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),a=Math.floor(i/2),o=[],s=0;s<n;s++)for(var h=0;h<e;h++){for(var u=s*e+h,l=0,c=0;c<i;c++)for(var f=0;f<i;f++){var d=s+c-a,g=h+f-a;if(d>=0&&d<n&&g>=0&&g<e){var p=r[c*i+f];l+=t[d*e+g]*p}}o[u]=2040===l?255:0}return o}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Noise:function(t){var e,n=255*this.noise(),r=t.data,i=r.length,a=n/2;for(e=0;e<i;e+=4)r[e+0]+=a-2*a*Math.random(),r[e+1]+=a-2*a*Math.random(),r[e+2]+=a-2*a*Math.random()},Pixelate:function(t){var e,n,r,i,a,o,s,h,u,l,c,f,d,g,v=Math.ceil(this.pixelSize()),y=t.width,m=t.height,_=Math.ceil(y/v),b=Math.ceil(m/v),x=t.data;if(v<=0)p.error("pixelSize value can not be <= 0");else for(f=0;f<_;f+=1)for(d=0;d<b;d+=1){for(i=0,a=0,o=0,s=0,u=(h=f*v)+v,c=(l=d*v)+v,g=0,e=h;e<u;e+=1)if(!(e>=y))for(n=l;n<c;n+=1)n>=m||(i+=x[0+(r=4*(y*n+e))],a+=x[r+1],o+=x[r+2],s+=x[r+3],g+=1);for(i/=g,a/=g,o/=g,s/=g,e=h;e<u;e+=1)if(!(e>=y))for(n=l;n<c;n+=1)n>=m||(x[0+(r=4*(y*n+e))]=i,x[r+1]=a,x[r+2]=o,x[r+3]=s)}},Posterize:function(t){var e,n=Math.round(254*this.levels())+1,r=t.data,i=r.length,a=255/n;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/a)*a},RGB:function(t){var e,n,r=t.data,i=r.length,a=this.red(),o=this.green(),s=this.blue();for(e=0;e<i;e+=4)n=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=n*a,r[e+1]=n*o,r[e+2]=n*s,r[e+3]=r[e+3]},RGBA:function(t){var e,n,r=t.data,i=r.length,a=this.red(),o=this.green(),s=this.blue(),h=this.alpha();for(e=0;e<i;e+=4)n=1-h,r[e]=a*h+r[e]*n,r[e+1]=o*h+r[e+1]*n,r[e+2]=s*h+r[e+2]*n},Sepia:function(t){var e,n,r,i,a=t.data,o=a.length;for(e=0;e<o;e+=4)n=a[e+0],r=a[e+1],i=a[e+2],a[e+0]=Math.min(255,.393*n+.769*r+.189*i),a[e+1]=Math.min(255,.349*n+.686*r+.168*i),a[e+2]=Math.min(255,.272*n+.534*r+.131*i)},Solarize:function(t){var e=t.data,n=t.width,r=4*n,i=t.height;do{var a=(i-1)*r,o=n;do{var s=a+4*(o-1),h=e[s],u=e[s+1],l=e[s+2];h>127&&(h=255-h),u>127&&(u=255-u),l>127&&(l=255-l),e[s]=h,e[s+1]=u,e[s+2]=l}while(--o)}while(--i)},Threshold:function(t){var e,n=255*this.threshold(),r=t.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<n?0:255}}})}}]);